+function(e){var c=e.oc.foundation.base,b=c.prototype;var d=function(g,f){this.$el=e(g);this.options=f||{};e.oc.foundation.controlUtils.markDisposable(g);c.call(this);this.init()};d.prototype=Object.create(b);d.prototype.constructor=d;d.prototype.init=function(){if(this.options.isMulti===null){this.options.isMulti=this.$el.hasClass("is-multi")}if(this.options.isImage===null){this.options.isImage=this.$el.hasClass("is-image")}this.$el.on("click",".find-button",this.proxy(this.onClickFindButton));this.$el.on("click",".find-remove-button",this.proxy(this.onClickRemoveButton));this.$el.one("dispose-control",this.proxy(this.dispose));this.$findValue=e("[data-find-value]",this.$el)};d.prototype.dispose=function(){this.$el.off("click",".find-button",this.proxy(this.onClickFindButton));this.$el.off("click",".find-remove-button",this.proxy(this.onClickRemoveButton));this.$el.off("dispose-control",this.proxy(this.dispose));this.$el.removeData("oc.mediaFinder");this.$findValue=null;this.$el=null;this.options=null;b.dispose.call(this)};d.prototype.onClickRemoveButton=function(){this.$findValue.val("");this.evalIsPopulated()};d.prototype.onClickFindButton=function(){var f=this;new e.oc.mediaManager.popup({alias:"ocmediamanager",cropAndInsertButton:true,onInsert:function(h){if(!h.length){alert("Please select image(s) to insert.");return}if(h.length>1){alert("Please select a single item.");return}var l,k;for(var j=0,g=h.length;j<g;j++){l=h[j].path;k=h[j].publicUrl}f.$findValue.val(l);if(f.options.isImage){e("[data-find-image]",f.$el).attr("src",k)}f.evalIsPopulated();this.hide()}})};d.prototype.evalIsPopulated=function(){var f=!!this.$findValue.val();this.$el.toggleClass("is-populated",f);e("[data-find-file-name]",this.$el).text(this.$findValue.val().substring(1))};d.DEFAULTS={isMulti:null,isImage:null};var a=e.fn.mediaFinder;e.fn.mediaFinder=function(g){var f=arguments;return this.each(function(){var j=e(this);var i=j.data("oc.mediaFinder");var h=e.extend({},d.DEFAULTS,j.data(),typeof g=="object"&&g);if(!i){j.data("oc.mediaFinder",(i=new d(this,h)))}if(typeof g=="string"){i[g].apply(i,f)}})};e.fn.mediaFinder.Constructor=d;e.fn.mediaFinder.noConflict=function(){e.fn.mediaFinder=a;return this};e(document).render(function(){e('[data-control="mediafinder"]').mediaFinder()})}(window.jQuery);