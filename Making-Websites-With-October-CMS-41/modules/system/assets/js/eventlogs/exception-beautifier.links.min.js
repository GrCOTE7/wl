+function(b){var a=b.fn.exceptionBeautifier.Constructor;a.EDITORS={subl:{scheme:"subl://open?url=file://%file&line=%line",name:"Sublime (subl://)"},txmt:{scheme:"txmt://open/?url=file://%file&line=%line",name:"TextMate (txmt://)"},mvim:{scheme:"mvim://open/?url=file://%file&line=%line",name:"MacVim (mvim://)"},phpstorm:{scheme:"phpstorm://open?file=%file&line=%line",name:"PhpStorm (phpstorm://)"},editor:{scheme:"editor://open/?file=%file&line=%line",name:"Custom (editor://)"}};a.REGEX.editor=/idelink:\/\/([^#]+)&([0-9]+)?/;a.LINKER_POPUP_CONTENT=null;a.extensions.push({onInit:function(c){c.initEditorPopup()},onParse:function(c){c.$el.on("click","a[data-href]",function(){c.openWithEditor(b(this).data("href"))})}});a.prototype.initEditorPopup=function(){if(!a.LINKER_POPUP_CONTENT){var g=b.oc.lang.get("eventlog.editor.title"),j=b.oc.lang.get("eventlog.editor.description"),e=b.oc.lang.get("eventlog.editor.openWith"),d=b.oc.lang.get("eventlog.editor.remember_choice"),f=b.oc.lang.get("eventlog.editor.open"),k=b.oc.lang.get("eventlog.editor.cancel"),c=b('                                                                                            <div>                                                                                                                      <div class="modal-header">                                                                                                 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                           <h4 class="modal-title">'+g+'</h4>                                                                         </div>                                                                                                                 <div class="modal-body">                                                                                                   <p>'+j+'</p>                                                                                             <div class="form-group">                                                                                                   <label class="control-label">'+e+':</label>                                                                 <select class="form-control" name="select-exception-link-editor"></select>                                         </div>                                                                                                                 <div class="checkbox custom-checkbox">                                                                                     <input name="checkbox" value="1" type="checkbox" id="editor-remember-choice" />                                        <label for="editor-remember-choice">'+d+'</label>                                                 </div>                                                                                                             </div>                                                                                                                 <div class="modal-footer">                                                                                                 <button type="button" class="btn btn-primary" data-action="submit" data-dismiss="modal">'+f+'</button>          <button type="button" class="btn btn-default" data-dismiss="popup">'+k+"</button>                         </div>                                                                                                             </div>"),h=b("select",c);for(var i in a.EDITORS){if(a.EDITORS.hasOwnProperty(i)){h.append('<option value="'+i+'">'+b.oc.escapeHtmlString(a.EDITORS[i].name)+"</option>")}}a.LINKER_POPUP_CONTENT=c.html()}};a.prototype.openWithEditor=function(e){var c=this,f,d=function(g){window.open(e.replace(a.REGEX.editor,a.EDITORS[g].scheme.replace(/%file/,f[1]).replace(/%line/,f[2])),"_self")};if(f=e.match(a.REGEX.editor)){if(window.sessionStorage&&window.sessionStorage["oc-exception-beautifier-editor"]){d(window.sessionStorage["oc-exception-beautifier-editor"])}else{b.popup({content:a.LINKER_POPUP_CONTENT}).on("shown.oc.popup",function(i,j,h){var g=b("select",h);c.initCustomSelect(g);b('[data-action="submit"]',h).on("click",function(){if(b("#editor-remember-choice").prop("checked")&&window.sessionStorage){window.sessionStorage["oc-exception-beautifier-editor"]=g.val()}d(g.val())})}).on("hide.oc.popup",function(h,i,g){b("[data-action]",g).off("click")})}}};a.prototype.formatFilePath=function(e,c){var d=this;return'{exception-beautifier-file#a href="javascript:" data-href="idelink://'+encodeURIComponent(d.rewritePath(e))+"&"+c+'"}'+e+"{/exception-beautifier-file#a}"};a.prototype.rewritePath=function(c){return c.replace(/\\/g,"/")};a.prototype.initCustomSelect=function(c){if(Modernizr.touch){return}var d={minimumResultsForSearch:Infinity,escapeMarkup:function(e){return e}};c.select2(d)}}(window.jQuery);