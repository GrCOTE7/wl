+function(c){var b=function(f,d){var e=this.$el=c(f);this.options=d||{};this.$tabsContainer=c(".nav-tabs:first",e);this.$pagesContainer=c(".tab-content:first",e);this.tabId="tabs"+e.parents().length+Math.round(Math.random()*1000);if(this.options.closable!==undefined&&this.options.closable!==false){e.attr("data-closable","")}this.init()};b.prototype.init=function(){var d=this;this.options.slidable=this.options.slidable!==undefined&&this.options.slidable!==false;c("> li",this.$tabsContainer).each(function(e){d.initTab(this)});this.$el.on("close.oc.tab",function(e,g){e.preventDefault();var f=(g!==undefined&&g.force!==undefined)?g.force:false;d.closeTab(c(e.target).closest("ul.nav-tabs > li, div.tab-content > div"),f)});this.$el.on("toggleCollapse.oc.tab",function(e,f){e.preventDefault();c(e.target).closest("div.tab-content > div").toggleClass("collapsed")});this.$el.on("modified.oc.tab",function(e){e.preventDefault();d.modifyTab(c(e.target).closest("ul.nav-tabs > li, div.tab-content > div"))});this.$el.on("unmodified.oc.tab",function(e){e.preventDefault();d.unmodifyTab(c(e.target).closest("ul.nav-tabs > li, div.tab-content > div"))});this.$tabsContainer.on("shown.bs.tab","li",function(){c(window).trigger("oc.updateUi");var e=c("> a",this).data("tabUrl");if(e){window.history.replaceState({},"Tab link reference",e)}});if(this.options.slidable){this.$pagesContainer.touchwipe({wipeRight:function(){d.prev()},wipeLeft:function(){d.next()},preventDefaultEvents:false,min_move_x:60})}this.$tabsContainer.toolbar({scrollClassContainer:this.$el});this.updateClasses()};b.prototype.initTab=function(f){var e=c(">li",this.$tabsContainer),d=e.index(f),j=new Date().getTime(),g=this.tabId+"-tab-"+d+j,i=c("a",f);i.data("target","#"+g).attr("data-target","#"+g).attr("data-toggle","tab");if(!i.attr("title")){i.attr("title",i.text())}var h=i.html();i.html("");i.append(c('<span class="title"></span>').append(c("<span></span>").html(h)));var k=c("> .tab-pane",this.$pagesContainer).eq(d).attr("id",g);if(!c("span.tab-close",f).length){c(f).append(c('<span class="tab-close"><i>&times;</i></span>').click(function(){c(this).trigger("close.oc.tab");return false}))}k.data("tab",f);this.$el.trigger("initTab.oc.tab",[{pane:k,tab:f}])};b.prototype.addTab=function(j,f,g,l){var e=this.generateTitleText(j,-1),h=c("<a/>").attr("href","javascript:;").text(e),i=c("<li/>"),d=c("<div>").html(f).addClass("tab-pane");h.attr("title",j);i.append(h);this.$tabsContainer.append(i);this.$pagesContainer.append(d);if(l!==undefined){h.addClass(l)}if(g!==undefined){i.attr("data-tab-id",g)}if(this.options.paneClasses!==undefined){d.addClass(this.options.paneClasses)}this.initTab(i);h.tab("show");c(window).trigger("resize");this.$tabsContainer.dragScroll("goToElement",i);var k=c("[default-focus]",d);if(k.is(":visible")){k.focus()}this.updateClasses()};b.prototype.updateTab=function(g,k,i){var d=this.findTabIndex(g);if(d==-1){return}var f=this.generateTitleText(k,-1),j=c("> li",this.$tabsContainer).eq(d),h=c("> div",this.$pagesContainer).eq(d),e=c("a",j);e.text(f).attr("title",k);h.html(i);this.initTab(j);this.updateClasses()};b.prototype.generateTitleText=function(e,d){var f=e;if(this.options.titleAsFileNames){f=e.replace(/^.*[\\\/]/,"")}if(this.options.maxTitleSymbols&&f.length>this.options.maxTitleSymbols){f="..."+f.substring(f.length-this.options.maxTitleSymbols)}return f};b.prototype.closeTab=function(h,k){var d=this.findTabIndex(h);if(d==-1){return}var j=c("> li",this.$tabsContainer).eq(d),i=c("> div",this.$pagesContainer).eq(d),g=j.hasClass("active"),f=j.attr("data-modified")!==undefined;if(f&&this.options.closeConfirmation!==undefined&&k!==true){if(!confirm(this.options.closeConfirmation)){return}}var l=c.Event("beforeClose.oc.tab",{relatedTarget:i});this.$el.trigger(l);if(l.isDefaultPrevented()){return}c.oc.foundation.controlUtils.disposeControls(i.get(0));i.remove();j.remove();if(g){c("> li > a",this.$tabsContainer).eq(d-1).tab("show")}if(c("> li > a",this.$tabsContainer).length==0){this.$el.trigger("afterAllClosed.oc.tab")}this.$el.trigger("closed.oc.tab",[j,i]);c(window).trigger("resize");this.updateClasses()};b.prototype.updateClasses=function(){if(this.$tabsContainer.children().length>0){this.$el.addClass("has-tabs")}else{this.$el.removeClass("has-tabs")}};b.prototype.modifyTab=function(e){var d=this.findTabIndex(e);if(d==-1){return}c("> li",this.$tabsContainer).eq(d).attr("data-modified","");c("> div",this.$pagesContainer).eq(d).attr("data-modified","")};b.prototype.unmodifyTab=function(e){var d=this.findTabIndex(e);if(d==-1){return}c("> li",this.$tabsContainer).eq(d).removeAttr("data-modified");c("> div",this.$pagesContainer).eq(d).removeAttr("data-modified")};b.prototype.findTabIndex=function(e){var d=e;if(e===undefined){d=c("li.active",this.$tabsContainer)}var f=this.$pagesContainer;if(c(d).parent().hasClass("nav-tabs")){f=this.$tabsContainer}return f.children().index(c(d))};b.prototype.findTabFromPane=function(f){var e="#"+c(f).attr("id"),d=c('[data-target="'+e+'"]',this.$tabsContainer);return d};b.prototype.findPaneFromTab=function(d){var f=c(d).find("> a").data("target"),e=this.$pagesContainer.find(f);return e};b.prototype.goTo=function(e){var f=c('[data-tab-id="'+e+'" ]',this.$tabsContainer);if(f.length==0){return false}var d=this.findTabIndex(f);if(d==-1){return false}this.goToIndex(d);this.$tabsContainer.dragScroll("goToElement",f);return true};b.prototype.goToPane=function(g){var e=c(g),f=this.findTabFromPane(e);if(e.length==0){return}e.removeClass("collapsed");var d=this.findTabIndex(e);if(d==-1){return false}this.goToIndex(d);if(f.length>0){this.$tabsContainer.dragScroll("goToElement",f)}return true};b.prototype.goToElement=function(d){return this.goToPane(d.closest(".tab-pane"))};b.prototype.findByIdentifier=function(d){return c('[data-tab-id="'+d+'" ]',this.$tabsContainer)};b.prototype.updateIdentifier=function(f,e){var d=this.findTabIndex(f);if(d==-1){return}c("> li",this.$tabsContainer).eq(d).attr("data-tab-id",e)};b.prototype.updateTitle=function(g,h){var f=this.findTabIndex(g);if(f==-1){return}var e=this.generateTitleText(h,f),d=c("> li > a span.title",this.$tabsContainer).eq(f);d.attr("title",h);d.text(e)};b.prototype.goToIndex=function(d){c("> li > a",this.$tabsContainer).eq(d).tab("show")};b.prototype.prev=function(){var d=this.findTabIndex();if(d<=0){return}this.goToIndex(d-1)};b.prototype.next=function(){var d=this.findTabIndex();if(d==-1){return}this.goToIndex(d+1)};b.DEFAULTS={};var a=c.fn.ocTab;c.fn.ocTab=function(e){var d=arguments;return this.each(function(){var k=c(this);var j=k.data("oc.tab");var g=c.extend({},b.DEFAULTS,k.data(),typeof e=="object"&&e);if(!j){k.data("oc.tab",(j=new b(this,g)))}if(typeof e=="string"){var f=[];for(var h=1;h<d.length;h++){f.push(d[h])}j[e].apply(j,f)}})};c.fn.ocTab.Constructor=b;c.fn.ocTab.noConflict=function(){c.fn.ocTab=a;return this};c(document).render(function(){c("[data-control=tab]").ocTab()});c(window).on("ajaxInvalidField",function(i,g,e,h,d){if(!d){return}i.preventDefault();var f=c(g);f.closest("[data-control=tab]").ocTab("goToElement",f);f.focus()})}(window.jQuery);