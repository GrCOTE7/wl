+function(e){var c=e.oc.foundation.base,b=c.prototype;var d=function(g,f){this.$el=e(g);this.options=f||{};e.oc.foundation.controlUtils.markDisposable(g);c.call(this);this.init()};d.prototype=Object.create(b);d.prototype.constructor=d;d.prototype.init=function(){this.initDefaults();this.$el.text(this.getDateTimeValue());this.$el.one("dispose-control",this.proxy(this.dispose))};d.prototype.initDefaults=function(){if(!this.options.timezone){this.options.timezone=e('meta[name="backend-timezone"]').attr("content")}if(!this.options.locale){this.options.locale=e('meta[name="backend-locale"]').attr("content")}if(!this.options.format){this.options.format="llll"}if(this.options.formatAlias){this.options.format=this.getFormatFromAlias(this.options.formatAlias)}this.appTimezone=e('meta[name="app-timezone"]').attr("content");if(!this.appTimezone){this.appTimezone="UTC"}};d.prototype.getDateTimeValue=function(){this.datetime=this.$el.attr("datetime");var g=moment.tz(this.datetime,this.appTimezone),f;if(this.options.locale){g=g.locale(this.options.locale)}if(this.options.timezone){g=g.tz(this.options.timezone)}if(this.options.timeSince){f=g.fromNow()}else{if(this.options.timeTense){f=g.calendar()}else{f=g.format(this.options.format)}}return f};d.prototype.getFormatFromAlias=function(f){var g={time:"LT",timeLong:"LTS",date:"L",dateMin:"l",dateLong:"LL",dateLongMin:"ll",dateTime:"LLL",dateTimeMin:"lll",dateTimeLong:"LLLL",dateTimeLongMin:"llll"};return g[f]?g[f]:"llll"};d.prototype.dispose=function(){this.$el.off("dispose-control",this.proxy(this.dispose));this.$el.removeData("oc.dateTimeConverter");this.$el=null;this.options=null;b.dispose.call(this)};d.DEFAULTS={format:null,formatAlias:null,timezone:null,locale:null,timeTense:false,timeSince:false};var a=e.fn.dateTimeConverter;e.fn.dateTimeConverter=function(i){var h=Array.prototype.slice.call(arguments,1),g,f;g=this.each(function(){var l=e(this);var k=l.data("oc.dateTimeConverter");var j=e.extend({},d.DEFAULTS,l.data(),typeof i=="object"&&i);if(!k){l.data("oc.dateTimeConverter",(k=new d(this,j)))}if(typeof i=="string"){f=k[i].apply(k,h)}if(typeof f!="undefined"){return false}});return f?f:g};e.fn.dateTimeConverter.Constructor=d;e.fn.dateTimeConverter.noConflict=function(){e.fn.dateTimeConverter=a;return this};e(document).render(function(){e("time[data-datetime-control]").dateTimeConverter()})}(window.jQuery);