+function(c){var b=function(e,d){this.options=d;this.$el=c(e);this.init()};b.DEFAULTS={ignoreItemClick:false};b.prototype.init=function(){var d=this;this.$el.on("click","li.group > h4 > a, li.group > div.group",function(){d.toggleGroup(c(this).closest("li"));return false});if(!this.options.ignoreItemClick){this.$el.on("click","li.item > a",function(f){var g=c.Event("open.oc.list",{relatedTarget:c(this).parent().get(0),clickEvent:f});d.$el.trigger(g,this);return false})}this.$el.on("ajaxUpdate",c.proxy(this.update,this))};b.prototype.toggleGroup=function(e){var d=c(e);d.attr("data-status")=="expanded"?this.collapseGroup(d):this.expandGroup(d)};b.prototype.collapseGroup=function(f){var e=c("> ul, > div.subitems",f),d=this;e.css("overflow","hidden");e.animate({height:0},{duration:100,queue:false,complete:function(){e.css({overflow:"visible",display:"none"});c(f).attr("data-status","collapsed");c(window).trigger("resize")}});this.sendGroupStatusRequest(f,0)};b.prototype.expandGroup=function(f){var e=c("> ul, > div.subitems",f),d=this;e.css({overflow:"hidden",display:"block",height:0});e.animate({height:e[0].scrollHeight},{duration:100,queue:false,complete:function(){e.css({overflow:"visible",height:"auto"});c(f).attr("data-status","expanded");c(window).trigger("resize")}});this.sendGroupStatusRequest(f,1)};b.prototype.sendGroupStatusRequest=function(f,d){if(this.options.groupStatusHandler!==undefined){var e=c(f).data("group-id");if(e===undefined){e=c("> h4 a",f).text()}c(f).request(this.options.groupStatusHandler,{data:{group:e,status:d}})}};b.prototype.markActive=function(d){c("li.item",this.$el).removeClass("active");if(d){c('li.item[data-id="'+d+'"]',this.$el).addClass("active")}this.dataId=d};b.prototype.update=function(){if(this.dataId!==undefined){this.markActive(this.dataId)}};var a=c.fn.fileList;c.fn.fileList=function(e){var d=arguments;return this.each(function(){var k=c(this);var j=k.data("oc.fileList");var g=c.extend({},b.DEFAULTS,k.data(),typeof e=="object"&&e);if(!j){k.data("oc.fileList",(j=new b(this,g)))}if(typeof e=="string"){var f=[];for(var h=1;h<d.length;h++){f.push(d[h])}j[e].apply(j,f)}})};c.fn.fileList.Constructor=b;c.fn.fileList.noConflict=function(){c.fn.fileList=a;return this};c(document).ready(function(){c("[data-control=filelist]").fileList()})}(window.jQuery);