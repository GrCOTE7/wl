+function(d){var c=d.oc.foundation.base,b=c.prototype;var e=function(l,v){var u=this.$el=d(l),g=u.get(0),s=this,v=this.options=v||{},n=this.sizeName=v.vertical?"height":"width",i=this.isTouch=Modernizr.touch,m=this.isScrollable=false,f=this.isLocked=false,p=v.vertical?"pageY":"pageX",r=0,o=0;d.oc.foundation.controlUtils.markDisposable(l);c.call(this);this.$el.one("dispose-control",this.proxy(this.dispose));this.$scrollbar=d("<div />").addClass("scrollbar-scrollbar");this.$track=d("<div />").addClass("scrollbar-track").appendTo(this.$scrollbar);this.$thumb=d("<div />").addClass("scrollbar-thumb").appendTo(this.$track);u.addClass("drag-scrollbar").addClass(v.vertical?"vertical":"horizontal").prepend(this.$scrollbar);if(i){this.$el.on("touchstart",function(x){var w=x.originalEvent;if(w.touches.length==1){j(w.touches[0]);x.stopPropagation()}})}else{this.$thumb.on("mousedown",function(w){j(w)});this.$track.on("mouseup",function(w){q(w)})}u.mousewheel(function(w){var x=s.options.vertical?((w.deltaFactor*w.deltaY)*-1):(w.deltaFactor*w.deltaX);return !t(x*s.options.scrollSpeed)});u.on("oc.scrollbar.gotoStart",function(w){s.options.vertical?u.scrollTop(0):u.scrollLeft(0);s.update();w.stopPropagation()});d(window).on("resize",d.proxy(this.update,this));d(window).on("oc.updateUi",d.proxy(this.update,this));function j(w){d("body").addClass("drag-noselect");u.trigger("oc.scrollStart");r=w[p];o=s.options.vertical?u.scrollTop():u.scrollLeft();if(i){d(window).on("touchmove.scrollbar",function(y){var x=y.originalEvent;if(q(x.touches[0])){y.preventDefault()}});u.on("touchend.scrollbar",h)}else{d(window).on("mousemove.scrollbar",function(x){q(x);return false});d(window).on("mouseup.scrollbar",function(){h();return false})}}function q(y){s.isLocked=true;var z,x=y[p];if(s.isTouch){z=r-x}else{var w=s.getCanvasSize()/s.getViewportSize();z=(x-r)*w}s.options.vertical?u.scrollTop(o+z):u.scrollLeft(o+z);s.setThumbPosition();return s.options.vertical?g.scrollTop!=o:g.scrollLeft!=o}function h(){d("body").removeClass("drag-noselect");u.trigger("oc.scrollEnd");d(window).off(".scrollbar")}var k=d(document.documentElement).hasClass("webkit");function t(x){o=s.options.vertical?g.scrollTop:g.scrollLeft;u.trigger("oc.scrollStart");s.options.vertical?u.scrollTop(o+x):u.scrollLeft(o+x);var w=s.options.vertical?g.scrollTop!=o:g.scrollLeft!=o;s.setThumbPosition();if(!k){if(s.endScrollTimeout!==undefined){clearTimeout(s.endScrollTimeout);s.endScrollTimeout=undefined}s.endScrollTimeout=setTimeout(function(){u.trigger("oc.scrollEnd");s.endScrollTimeout=undefined},50)}else{u.trigger("oc.scrollEnd")}return w}setTimeout(function(){s.update()},1)};e.prototype=Object.create(b);e.prototype.constructor=e;e.prototype.dispose=function(){this.unregisterHandlers();b.dispose.call(this)};e.prototype.unregisterHandlers=function(){};e.DEFAULTS={vertical:true,scrollSpeed:2,animation:true,start:function(){},drag:function(){},stop:function(){}};e.prototype.update=function(){if(!this.$scrollbar){return}this.$scrollbar.hide();this.setThumbSize();this.setThumbPosition();this.$scrollbar.show()};e.prototype.setThumbSize=function(){var f=this.calculateProperties();this.isScrollable=!(f.thumbSizeRatio>=1);this.$scrollbar.toggleClass("disabled",!this.isScrollable);if(this.options.vertical){this.$track.height(f.canvasSize);this.$thumb.height(f.thumbSize)}else{this.$track.width(f.canvasSize);this.$thumb.width(f.thumbSize)}};e.prototype.setThumbPosition=function(){var f=this.calculateProperties();if(this.options.vertical){this.$thumb.css({top:f.thumbPosition})}else{this.$thumb.css({left:f.thumbPosition})}};e.prototype.calculateProperties=function(){var g=this.$el,f={};f.viewportSize=this.getViewportSize();f.canvasSize=this.getCanvasSize();f.scrollAmount=(this.options.vertical)?g.scrollTop():g.scrollLeft();f.thumbSizeRatio=f.viewportSize/f.canvasSize;f.thumbSize=f.viewportSize*f.thumbSizeRatio;f.thumbPositionRatio=f.scrollAmount/(f.canvasSize-f.viewportSize);f.thumbPosition=((f.viewportSize-f.thumbSize)*f.thumbPositionRatio)+f.scrollAmount;if(isNaN(f.thumbPosition)){f.thumbPosition=0}return f};e.prototype.getViewportSize=function(){return(this.options.vertical)?this.$el.height():this.$el.width()};e.prototype.getCanvasSize=function(){return(this.options.vertical)?this.$el.get(0).scrollHeight:this.$el.get(0).scrollWidth};e.prototype.gotoElement=function(h,l){var g=d(h);if(!g.length){return}var f=this,k=0,i=false,j={duration:300,queue:false,complete:function(){if(l!==undefined){l()}}};if(!this.options.vertical){k=g.get(0).offsetLeft-this.$el.scrollLeft();if(k<0){this.$el.animate({scrollLeft:g.get(0).offsetLeft},j);i=true}else{k=g.get(0).offsetLeft+g.outerWidth()-(this.$el.scrollLeft()+this.$el.outerWidth());if(k>0){this.$el.animate({scrollLeft:g.get(0).offsetLeft+g.outerWidth()-this.$el.outerWidth()},j);i=true}}}else{k=g.get(0).offsetTop-this.$el.scrollTop();if(this.options.animation){if(k<0){this.$el.animate({scrollTop:g.get(0).offsetTop},j);i=true}else{k=g.get(0).offsetTop-(this.$el.scrollTop()+this.$el.outerHeight());if(k>0){this.$el.animate({scrollTop:g.get(0).offsetTop+g.outerHeight()-this.$el.outerHeight()},j);i=true}}}else{if(k<0){this.$el.scrollTop(g.get(0).offsetTop)}else{k=g.get(0).offsetTop-(this.$el.scrollTop()+this.$el.outerHeight());if(k>0){this.$el.scrollTop(g.get(0).offsetTop+g.outerHeight()-this.$el.outerHeight())}}}}if(!i&&l!==undefined){l()}return this};e.prototype.dispose=function(){this.$el=null;this.$scrollbar=null;this.$track=null;this.$thumb=null};var a=d.fn.scrollbar;d.fn.scrollbar=function(f){return this.each(function(){var i=d(this);var h=i.data("oc.scrollbar");var g=d.extend({},e.DEFAULTS,i.data(),typeof f=="object"&&f);if(!h){i.data("oc.scrollbar",(h=new e(this,g)))}if(typeof f=="string"){h[f].call(i)}})};d.fn.scrollbar.Constructor=e;d.fn.scrollbar.noConflict=function(){d.fn.scrollbar=a;return this};d(document).render(function(){d("[data-control=scrollbar]").scrollbar()})}(window.jQuery);