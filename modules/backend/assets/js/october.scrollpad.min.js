+function(e){var d=e.oc.foundation.base,c=d.prototype;var b=function(g,f){this.$el=e(g);this.scrollbarElement=null;this.dragHandleElement=null;this.scrollContentElement=null;this.contentElement=null;this.options=f;this.scrollbarSize=null;this.updateScrollbarTimer=null;this.dragOffset=null;d.call(this);this.init();e.oc.foundation.controlUtils.markDisposable(g)};b.prototype=Object.create(c);b.prototype.constructor=b;b.prototype.dispose=function(){this.unregisterHandlers();this.$el.get(0).removeChild(this.scrollbarElement);this.$el.removeData("oc.scrollpad");this.$el=null;this.scrollbarElement=null;this.dragHandleElement=null;this.scrollContentElement=null;this.contentElement=null;c.dispose.call(this)};b.prototype.scrollToStart=function(){var f=this.options.direction=="vertical"?"scrollTop":"scrollLeft";this.scrollContentElement[f]=0};b.prototype.update=function(){this.updateScrollbarSize()};b.prototype.init=function(){this.build();this.setScrollContentSize();this.registerHandlers()};b.prototype.build=function(){var f=this.$el.get(0);this.scrollContentElement=f.children[0];this.contentElement=this.scrollContentElement.children[0];this.$el.prepend('<div class="scrollpad-scrollbar"><div class="drag-handle"></div></div>');this.scrollbarElement=f.querySelector(".scrollpad-scrollbar");this.dragHandleElement=f.querySelector(".scrollpad-scrollbar > .drag-handle")};b.prototype.registerHandlers=function(){this.$el.on("mouseenter",this.proxy(this.onMouseEnter));this.$el.on("mouseleave",this.proxy(this.onMouseLeave));this.$el.one("dispose-control",this.proxy(this.dispose));this.scrollContentElement.addEventListener("scroll",this.proxy(this.onScroll));this.dragHandleElement.addEventListener("mousedown",this.proxy(this.onStartDrag))};b.prototype.unregisterHandlers=function(){this.$el.off("mouseenter",this.proxy(this.onMouseEnter));this.$el.off("mouseleave",this.proxy(this.onMouseLeave));this.$el.off("dispose-control",this.proxy(this.dispose));this.scrollContentElement.removeEventListener("scroll",this.proxy(this.onScroll));this.dragHandleElement.removeEventListener("mousedown",this.proxy(this.onStartDrag));document.removeEventListener("mousemove",this.proxy(this.onMouseMove));document.removeEventListener("mouseup",this.proxy(this.onEndDrag))};b.prototype.setScrollContentSize=function(){var f=this.getScrollbarSize();if(this.options.direction=="vertical"){this.scrollContentElement.setAttribute("style","margin-right: -"+f+"px")}else{this.scrollContentElement.setAttribute("style","margin-bottom: -"+f+"px")}};b.prototype.getScrollbarSize=function(){if(this.scrollbarSize!==null){return this.scrollbarSize}var g=document.createElement("div");g.setAttribute("class","scrollpad-scrollbar-size-tester");g.appendChild(document.createElement("div"));document.body.appendChild(g);var h=g.offsetWidth,f=g.querySelector("div").offsetWidth;document.body.removeChild(g);if(h===f&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1){return this.scrollbarSize=17}return this.scrollbarSize=h-f};b.prototype.updateScrollbarSize=function(){this.scrollbarElement.removeAttribute("data-hidden");var k=this.options.direction=="vertical"?this.contentElement.scrollHeight:this.contentElement.scrollWidth,h=this.options.direction=="vertical"?this.scrollContentElement.scrollTop:this.scrollContentElement.scrollLeft,j=this.options.direction=="vertical"?this.scrollbarElement.offsetHeight:this.scrollbarElement.offsetWidth,i=j/k,g=Math.round(i*h)+2,f=Math.floor(i*(j-2))-2;if(j<k){if(this.options.direction=="vertical"){this.dragHandleElement.setAttribute("style","top: "+g+"px; height: "+f+"px")}else{this.dragHandleElement.setAttribute("style","left: "+g+"px; width: "+f+"px")}this.scrollbarElement.removeAttribute("data-hidden")}else{this.scrollbarElement.setAttribute("data-hidden",true)}};b.prototype.displayScrollbar=function(){this.clearUpdateScrollbarTimer();this.updateScrollbarSize();this.scrollbarElement.setAttribute("data-visible","true")};b.prototype.hideScrollbar=function(){this.scrollbarElement.removeAttribute("data-visible")};b.prototype.clearUpdateScrollbarTimer=function(){if(this.updateScrollbarTimer===null){return}clearTimeout(this.updateScrollbarTimer);this.updateScrollbarTimer=null};b.prototype.onMouseEnter=function(){this.displayScrollbar()};b.prototype.onMouseLeave=function(){this.hideScrollbar()};b.prototype.onScroll=function(){if(this.updateScrollbarTimer!==null){return}this.updateScrollbarTimer=setTimeout(this.proxy(this.displayScrollbar),10)};b.prototype.onStartDrag=function(i){e.oc.foundation.event.stop(i);var h=e.oc.foundation.event.pageCoordinates(i),j=this.options.direction=="vertical"?h.y:h.x,f=e.oc.foundation.element.absolutePosition(this.dragHandleElement),g=this.options.direction=="vertical"?f.top:f.left;this.dragOffset=j-g;document.addEventListener("mousemove",this.proxy(this.onMouseMove));document.addEventListener("mouseup",this.proxy(this.onEndDrag))};b.prototype.onMouseMove=function(n){e.oc.foundation.event.stop(n);var p=this.options.direction=="vertical"?"y":"x",q=this.options.direction=="vertical"?"top":"left",j=this.options.direction=="vertical"?"offsetHeight":"offsetWidth",m=this.options.direction=="vertical"?"scrollTop":"scrollLeft";var i=e.oc.foundation.event.pageCoordinates(n)[p],l=e.oc.foundation.element.absolutePosition(this.scrollbarElement)[q],k=i-l-this.dragOffset,f=this.scrollbarElement[j],h=this.contentElement[j],o=k/f;if(o>1){o=1}var g=o*h;this.scrollContentElement[m]=g};b.prototype.onEndDrag=function(f){document.removeEventListener("mousemove",this.proxy(this.onMouseMove));document.removeEventListener("mouseup",this.proxy(this.onEndDrag))};b.DEFAULTS={direction:"vertical"};var a=e.fn.scrollpad;e.fn.scrollpad=function(h){var g=Array.prototype.slice.call(arguments,1),f=undefined;this.each(function(){var k=e(this);var j=k.data("oc.scrollpad");var i=e.extend({},b.DEFAULTS,k.data(),typeof h=="object"&&h);if(!j){k.data("oc.scrollpad",(j=new b(this,i)))}if(typeof h=="string"){f=j[h].apply(j,g)}if(typeof f!="undefined"){return false}});return f?f:this};e.fn.scrollpad.Constructor=b;e.fn.scrollpad.noConflict=function(){e.fn.scrollpad=a;return this};e(document).on("render",function(){e("div[data-control=scrollpad]").scrollpad()})}(window.jQuery);