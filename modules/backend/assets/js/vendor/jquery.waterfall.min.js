(function(a){a.waterfall=function(){var c=[],b=a.Deferred(),d=0;a.each(arguments,function(f,e){c.push(function(){var g=[].slice.apply(arguments),h;if(typeof(e)=="function"){if(!((h=e.apply(null,g))&&h.promise)){h=a.Deferred()[h===false?"reject":"resolve"](h)}}else{if(e&&e.promise){h=e}else{h=a.Deferred()[e===false?"reject":"resolve"](e)}}h.fail(function(){b.reject.apply(b,[].slice.apply(arguments))}).done(function(i){d++;g.push(i);d==c.length?b.resolve.apply(b,g):c[d].apply(null,g)})})});c.length?c[0]():b.resolve();return b}})(jQuery);