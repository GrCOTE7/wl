+function(b){var a=function(){this.processImport=function(){var c=b("#importFileColumns").closest("form");c.request("onImport",{success:function(d){b("#importContainer").html(d.result);b(document).trigger("render")}})};this.loadFileColumnSample=function(d){var c=b(d),f=c.closest("[data-column-id]"),e=f.data("column-id");c.popup({handler:"onImportLoadColumnSampleForm",extraData:{file_column_id:e}})};this.bindColumnSorting=function(){b("#importDbColumns > ul, .import-column-bindings > ul").each(function(){var d=b(this);if(d.data("oc.sortable")){d.sortable("destroyGroup");d.sortable("destroy")}});var c={group:"import-fields",usePlaceholderClone:true,nested:false,onDrop:b.proxy(this.onDropColumn,this)};b("#importDbColumns > ul, .import-column-bindings > ul").sortable(c)};this.onDropColumn=function(f,e,i,h){var d=b("#importFileColumns"),c,g=b.contains(d.get(0),f.get(0)),j;j=f.data("column-matched-id");if(j!==null){c=b("[data-column-id="+j+"]",d);this.toggleMatchState(c)}if(g){c=f.closest("[data-column-id]"),this.matchColumn(f,c)}else{this.unmatchColumn(f)}if(i){i(f,e)}};this.toggleMatchState=function(c){var d=!!b(".import-column-bindings li",c).length;c.toggleClass("is-matched",d)};this.ignoreFileColumn=function(d){var c=b(d),e=c.closest("[data-column-id]");e.addClass("is-ignored");b("#showIgnoredColumnsButton").removeClass("disabled")};this.showIgnoredColumns=function(){b("#importFileColumns li.is-ignored").removeClass("is-ignored");b("#showIgnoredColumnsButton").addClass("disabled")};this.autoMatchColumns=function(){var c=this,e={},f,d;b("#importFileColumns li").each(function(){f=b(this);d=b.trim(b(".column-label",f).text());e[d]=f});b("#importDbColumns li").each(function(){f=b(this);d=b.trim(b("> span",f).text());if(e[d]){f.appendTo(b(".import-column-bindings > ul",e[d]));c.matchColumn(f,e[d])}})};this.matchColumn=function(e,c){var g=c.data("column-id"),f=e.data("column-name"),d=b("[data-column-match-input]",e);this.toggleMatchState(c);e.data("column-matched-id",g);d.attr("name","column_match["+g+"][]");d.attr("value",f)};this.unmatchColumn=function(d){var c=b("[data-column-match-input]",d);d.removeData("column-matched-id");c.attr("name","");c.attr("value","")}};b.oc.importBehavior=new a}(window.jQuery);