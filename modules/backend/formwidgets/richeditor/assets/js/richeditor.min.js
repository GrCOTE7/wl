+function(e){var d=e.oc.foundation.base,c=d.prototype;var b=function(g,f){this.options=f;this.$el=e(g);this.$textarea=this.$el.find(">textarea:first");this.$form=this.$el.closest("form");this.editor=null;e.oc.foundation.controlUtils.markDisposable(g);d.call(this);this.init()};b.prototype=Object.create(c);b.prototype.constructor=b;b.DEFAULTS={linksHandler:null,stylesheet:null,fullpage:false,editorLang:"en",toolbarButtons:null,allowEmptyTags:null,allowTags:null,noWrapTags:null,removeTags:null,imageStyles:null,linkStyles:null,paragraphStyles:null,tableStyles:null,tableCellStyles:null,aceVendorPath:"/",readOnly:false};b.prototype.init=function(){var f=this;this.$el.one("dispose-control",this.proxy(this.dispose));if(!this.$textarea.attr("id")){this.$textarea.attr("id","element-"+Math.random().toString(36).substring(7))}this.initFroala()};b.prototype.initFroala=function(){var g={editorClass:"control-richeditor",language:this.options.editorLang,fullPage:this.options.fullpage,pageLinksHandler:this.options.linksHandler,aceEditorVendorPath:this.options.aceVendorPath,toolbarSticky:false};if(this.options.toolbarButtons){g.toolbarButtons=this.options.toolbarButtons.split(",")}else{g.toolbarButtons=e.oc.richEditorButtons}g.imageStyles=this.options.imageStyles?this.options.imageStyles:{"oc-img-rounded":"Rounded","oc-img-bordered":"Bordered"};g.linkStyles=this.options.linkStyles?this.options.linkStyles:{"oc-link-green":"Green","oc-link-strong":"Thick"};g.paragraphStyles=this.options.paragraphStyles?this.options.paragraphStyles:{"oc-text-gray":"Gray","oc-text-bordered":"Bordered","oc-text-spaced":"Spaced","oc-text-uppercase":"Uppercase"};g.tableStyles=this.options.tableStyles?this.options.tableStyles:{"oc-dashed-borders":"Dashed Borders","oc-alternate-rows":"Alternate Rows"};g.tableCellStyles=this.options.tableCellStyles?this.options.tableCellStyles:{"oc-cell-highlighted":"Highlighted","oc-cell-thick-border":"Thick"};g.toolbarButtonsMD=g.toolbarButtons;g.toolbarButtonsSM=g.toolbarButtons;g.toolbarButtonsXS=g.toolbarButtons;if(this.options.htmlAllowedEmptyTags){g.allowEmptyTags=this.options.htmlAllowedEmptyTags.split(/[\s,]+/)}if(this.options.allowTags){g.htmlAllowedTags=this.options.allowTags.split(/[\s,]+/)}g.htmlDoNotWrapTags=this.options.noWrapTags?this.options.noWrapTags.split(/[\s,]+/):["figure","script","style"];if(this.options.removeTags){g.htmlRemoveTags=this.options.removeTags.split(/[\s,]+/)}g.lineBreakerTags=["figure","table","hr","iframe","form","dl"];g.shortcutsEnabled=["show","bold","italic","underline","indent","outdent","undo","redo"];g.imageUploadURL=g.fileUploadURL=window.location;g.imageUploadParam=g.fileUploadParam="file_data";g.imageUploadParams=g.fileUploadParams={X_OCTOBER_MEDIA_MANAGER_QUICK_UPLOAD:1};var f=this.$textarea.attr("placeholder");g.placeholderText=f?f:"";g.height=this.$el.hasClass("stretch")?Infinity:e(".height-indicator",this.$el).height();e.FroalaEditor.ICON_TEMPLATES={font_awesome:'<i class="icon-[NAME]"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />"};this.$textarea.on("froalaEditor.initialized",this.proxy(this.build));this.$textarea.on("froalaEditor.contentChanged",this.proxy(this.onChange));this.$textarea.on("froalaEditor.keydown",this.proxy(this.onKeydown));this.$textarea.on("froalaEditor.html.get",this.proxy(this.onSyncContent));this.$textarea.on("froalaEditor.html.set",this.proxy(this.onSetContent));this.$form.on("oc.beforeRequest",this.proxy(this.onFormBeforeRequest));this.$textarea.froalaEditor(g);this.editor=this.$textarea.data("froala.editor");if(this.options.readOnly){this.editor.edit.off()}this.$el.on("keydown",".fr-view figure",this.proxy(this.onFigureKeydown))};b.prototype.dispose=function(){this.unregisterHandlers();this.$textarea.froalaEditor("destroy");this.$el.removeData("oc.richEditor");this.options=null;this.$el=null;this.$textarea=null;this.$form=null;this.editor=null;c.dispose.call(this)};b.prototype.unregisterHandlers=function(){this.$el.off("keydown",".fr-view figure",this.proxy(this.onFigureKeydown));this.$textarea.off("froalaEditor.initialized",this.proxy(this.build));this.$textarea.off("froalaEditor.contentChanged",this.proxy(this.onChange));this.$textarea.off("froalaEditor.keydown",this.proxy(this.onKeydown));this.$textarea.off("froalaEditor.html.get",this.proxy(this.onSyncContent));this.$textarea.off("froalaEditor.html.set",this.proxy(this.onSetContent));this.$form.off("oc.beforeRequest",this.proxy(this.onFormBeforeRequest));e(window).off("resize",this.proxy(this.updateLayout));e(window).off("oc.updateUi",this.proxy(this.updateLayout));this.$el.off("dispose-control",this.proxy(this.dispose))};b.prototype.build=function(g,f){this.updateLayout();e(window).on("resize",this.proxy(this.updateLayout));e(window).on("oc.updateUi",this.proxy(this.updateLayout));this.$textarea.trigger("init.oc.richeditor",[this])};b.prototype.isCodeViewActive=function(){return this.editor&&this.editor.codeView&&this.editor.codeView.isActive()};b.prototype.getElement=function(){return this.$el};b.prototype.getEditor=function(){return this.editor};b.prototype.getTextarea=function(){return this.$textarea};b.prototype.getContent=function(){return this.editor.html.get()};b.prototype.setContent=function(f){this.editor.html.set(f)};b.prototype.syncContent=function(){this.editor.events.trigger("contentChanged")};b.prototype.updateLayout=function(){var j=e(".fr-wrapper",this.$el),g=e(".fr-code",this.$el),h=e(".fr-toolbar",this.$el),i=e(".fr-box",this.$el);if(!j.length){return}if(this.$el.hasClass("stretch")&&!i.hasClass("fr-fullscreen")){var f=h.outerHeight(true);j.css("top",f+1);g.css("top",f)}else{j.css("top","");g.css("top","")}};b.prototype.insertHtml=function(f){this.editor.html.insert(f);this.editor.selection.restore()};b.prototype.insertElement=function(f){this.insertHtml(e("<div />").append(f.clone()).remove().html())};b.prototype.insertUiBlock=function(f){this.$textarea.froalaEditor("figures.insert",f)};b.prototype.insertVideo=function(f,g){this.$textarea.froalaEditor("figures.insertVideo",f,g)};b.prototype.insertAudio=function(f,g){this.$textarea.froalaEditor("figures.insertAudio",f,g)};b.prototype.onSetContent=function(g,f){this.$textarea.trigger("setContent.oc.richeditor",[this])};b.prototype.onSyncContent=function(i,h,g){if(h.codeBeautifier){g=h.codeBeautifier.run(g,h.opts.codeBeautifierOptions)}var f={html:g};this.$textarea.trigger("syncContent.oc.richeditor",[this,f]);return f.html};b.prototype.onFocus=function(){this.$el.addClass("editor-focus")};b.prototype.onBlur=function(){this.$el.removeClass("editor-focus")};b.prototype.onFigureKeydown=function(f){this.$textarea.trigger("figureKeydown.oc.richeditor",[f,this])};b.prototype.onKeydown=function(h,f,g){this.$textarea.trigger("keydown.oc.richeditor",[g,this]);if(h.isDefaultPrevented()){return false}};b.prototype.onChange=function(f){this.$form.trigger("change")};b.prototype.onFormBeforeRequest=function(f){if(!this.editor){return}if(this.isCodeViewActive()){this.editor.html.set(this.editor.codeView.get())}this.$textarea.val(this.editor.html.get())};var a=e.fn.richEditor;e.fn.richEditor=function(h){var g=Array.prototype.slice.call(arguments,1),f;this.each(function(){var k=e(this);var j=k.data("oc.richEditor");var i=e.extend({},b.DEFAULTS,k.data(),typeof h=="object"&&h);if(!j){k.data("oc.richEditor",(j=new b(this,i)))}if(typeof h=="string"){f=j[h].apply(j,g)}if(typeof f!="undefined"){return false}});return f?f:this};e.fn.richEditor.Constructor=b;e.fn.richEditor.noConflict=function(){e.fn.richEditor=a;return this};e(document).render(function(){e('[data-control="richeditor"]').richEditor()});if(e.oc===undefined){e.oc={}}e.oc.richEditorButtons=["paragraphFormat","paragraphStyle","quote","bold","italic","align","formatOL","formatUL","insertTable","insertLink","insertImage","insertVideo","insertAudio","insertFile","insertHR","fullscreen","html"]}(window.jQuery);