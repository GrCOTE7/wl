+function(c){var b=function(e,d){this.options=d;this.$el=c(e);this.$form=this.$el.closest("form");this.$toolbar=c("[data-container-toolbar]",this.$form);this.alias=c("[data-container-alias]",this.$form).val();this.init()};b.DEFAULTS={breakpoint:768,columns:10};b.prototype.init=function(){var d=this;this.$el.isotope({itemSelector:".item",resizable:false});c(window).resize(c.proxy(this.updateWidth,this));this.updateWidth();if(!Modernizr.touch){this.$el.sortable({vertical:false,handle:".drag-handle",onDrop:function(f,e,g){f.removeClass("dragged");c("body").removeClass("dragging");d.updateSeparators();d.redraw();d.postSortOrders()}})}this.$el.on("hidden.oc.inspector","[data-inspectable]",function(){var f=c("[data-inspector-values]",this).val(),g=c.parseJSON(f),e=c(this).closest("li").get(0);d.$form.request(d.alias+"::onUpdateWidget",{data:{fields:f,alias:c("[data-widget-alias]",c(this).closest("div.content")).val()},success:function(h){this.success(h).done(function(){e.className=e.className.replace(/width\-[0-9]+/g,"");c(e).addClass("width-"+g.ocWidgetWidth);c(e).toggleClass("new-line",g.ocWidgetNewRow==1);d.updateSeparators();d.redraw()})}})});this.$el.on("click",".content > button.close",function(){var e=c(this);c.oc.confirm(c.oc.lang.get("alert.widget_remove_confirm"),function(){d.$form.request(d.alias+"::onRemoveWidget",{data:{alias:c("[data-widget-alias]",e.closest("div.content")).val()}});e.closest("li").remove();d.redraw();d.setSortOrders()})});c(window).on("oc.reportWidgetAdded",function(){d.redraw();d.setSortOrders()});c(window).on("oc.reportWidgetRefresh",function(){d.redraw()});window.setTimeout(function(){d.updateWidth();d.redraw()},200);this.setSortOrders()};b.prototype.updateWidth=function(){var e=this.$el.width(),d=e<=this.options.breakpoint,f=d?e:e/this.options.columns;this.$el.isotope({masonry:{columnWidth:f}});this.$el.toggleClass("wrapped",d)};b.prototype.redraw=function(){this.$el.isotope("reloadItems").isotope({sortBy:"original-order"});var d=c("li.item",this.$el);d.css({width:"",height:""});c("> .dropdown",this.$toolbar).toggleClass("dropup",!!d.length)};b.prototype.setSortOrders=function(){this.sortOrders=[];var d=this;c("[data-widget-order]",this.$el).each(function(){d.sortOrders.push(c(this).val())})};b.prototype.postSortOrders=function(){var d=[],e=this;c("[data-widget-alias]",this.$el).each(function(){d.push(c(this).val())});this.$form.request(e.alias+"::onSetWidgetOrders",{data:{aliases:d.join(","),orders:e.sortOrders.join(",")}})};b.prototype.updateSeparators=function(){c("li.item.separator",this.$el).remove();c("li.item.new-line",this.$el).each(function(){c(this).before('<li class="item separator"></li>')})};var a=c.fn.reportContainer;c.fn.reportContainer=function(d){return this.each(function(){var g=c(this);var f=g.data("oc.reportContainer");var e=c.extend({},b.DEFAULTS,g.data(),typeof d=="object"&&d);if(!f){g.data("oc.reportContainer",(f=new b(this,e)))}if(typeof d=="string"){f[d].call(g)}})};c.fn.reportContainer.Constructor=b;c.fn.reportContainer.noConflict=function(){c.fn.reportContainer=a;return this};c(document).render(function(){c('[data-control="report-container"]').reportContainer()})}(window.jQuery);