+function(b){if(b.oc.table===undefined){throw new Error("The $.oc.table namespace is not defined. Make sure that the table.js script is loaded.")}if(b.oc.table.helper===undefined){b.oc.table.helper={}}var a=function(c){this.tableObj=c;this.pageIndex=0;this.pageCount=0;this.init()};a.prototype.init=function(){};a.prototype.dispose=function(){this.tableObj=null};a.prototype.paginationEnabled=function(){return this.tableObj.options.recordsPerPage!=null&&this.tableObj.options.recordsPerPage!=false};a.prototype.getPageFirstRowOffset=function(){return this.pageIndex*this.tableObj.options.recordsPerPage};a.prototype.buildPagination=function(f){if(!this.paginationEnabled()){return}var d=this.tableObj.getElement().querySelector(".pagination"),c=false,g=0;this.pageCount=this.calculatePageCount(f,this.tableObj.options.recordsPerPage);if(!d){d=document.createElement("div");d.setAttribute("class","pagination");c=true}else{g=this.getRecordCount(d)}if(c||g!=f){d.setAttribute("data-record-count",f);var e=this.buildPaginationLinkList(f,this.tableObj.options.recordsPerPage,this.pageIndex);if(!c){d.replaceChild(e,d.children[0])}else{d.appendChild(e);this.tableObj.getElement().appendChild(d)}}else{this.markActiveLinkItem(d,this.pageIndex)}};a.prototype.calculatePageCount=function(d,e){var c=Math.ceil(d/e);if(!c){c=1}return c};a.prototype.getRecordCount=function(d){var c=d?d:this.tableObj.getElement().querySelector(".pagination");return parseInt(c.getAttribute("data-record-count"))};a.prototype.buildPaginationLinkList=function(g,k,c){var d=this.calculatePageCount(g,k),f=document.createElement("ul");for(var e=0;e<d;e++){var j=document.createElement("li"),h=document.createElement("a");if(e==c){j.setAttribute("class","active")}h.innerText=e+1;h.setAttribute("data-page-index",e);h.setAttribute("href","#");j.appendChild(h);f.appendChild(j);b(h).addClass("pagination-link")}return f};a.prototype.markActiveLinkItem=function(e,d){var h=e.querySelector(".active"),g=e.children[0];h.setAttribute("class","");for(var f=0,c=g.children.length;f<c;f++){if(f==d){g.children[f].setAttribute("class","active")}}};a.prototype.gotoPage=function(c,d){this.tableObj.unfocusTable();if(!this.tableObj.validate()){return}this.pageIndex=c;this.tableObj.updateDataTable(d)};a.prototype.getRowCountOnPage=function(c){return this.tableObj.getDataTableBody().children.length};a.prototype.getNewRowPage=function(c,d){var e=this.getRecordCount();if(c==="bottom"){return this.calculatePageCount(e+1,this.tableObj.options.recordsPerPage)-1}if(c=="above"){return this.pageIndex}if(c=="below"){if(d==(this.tableObj.options.recordsPerPage-1)){return this.pageIndex+1}return this.pageIndex}return this.pageIndex};a.prototype.getPageAfterDeletion=function(c){if(c==0&&this.getRowCountOnPage()==1){return this.pageIndex==0?0:this.pageIndex-1}return this.pageIndex};a.prototype.navigateDown=function(h,d){if(!this.tableObj.activeCell){return}if(this.tableObj.activeCellProcessor&&!this.tableObj.activeCellProcessor.keyNavigationAllowed(h,"down")){return}var j=this.tableObj.activeCell.parentNode,g=!h.shiftKey?j.nextElementSibling:j.parentNode.children[j.parentNode.children.length-1],f=d!==undefined?d:this.tableObj.activeCell.cellIndex;if(g){var c=g.children[f];if(c){this.tableObj.focusCell(c)}}else{if(!this.paginationEnabled()){return}if(this.pageIndex<this.pageCount-1){var e=this;this.gotoPage(this.pageIndex+1,function i(){e.focusCell("top",f);e=null})}}};a.prototype.navigateUp=function(f,d,c){if(!this.tableObj.activeCell){return}if(this.tableObj.activeCellProcessor&&!this.tableObj.activeCellProcessor.keyNavigationAllowed(f,"up")){return}var k=this.tableObj.activeCell.parentNode,i=(!f.shiftKey||c)?k.previousElementSibling:k.parentNode.children[0],e=d!==undefined?d:this.tableObj.activeCell.cellIndex;if(i){var h=i.children[e];if(h){this.tableObj.focusCell(h)}}else{if(!this.paginationEnabled()){return}if(this.pageIndex>0){var j=this;this.gotoPage(this.pageIndex-1,function g(){j.focusCell("bottom",e);j=null})}}};a.prototype.navigateLeft=function(f,d){if(!this.tableObj.activeCell){return}if(!d&&this.tableObj.activeCellProcessor&&!this.tableObj.activeCellProcessor.keyNavigationAllowed(f,"left")){return}var g=this.tableObj.activeCell.parentNode,e=(!f.shiftKey||d)?this.tableObj.activeCell.cellIndex-1:0;var c=g.children[e];if(c){this.tableObj.focusCell(c)}else{this.navigateUp(f,g.children.length-1,d)}};a.prototype.navigateRight=function(f,d){if(!this.tableObj.activeCell){return}if(!d&&this.tableObj.activeCellProcessor&&!this.tableObj.activeCellProcessor.keyNavigationAllowed(f,"right")){return}var g=this.tableObj.activeCell.parentNode,e=!f.shiftKey?this.tableObj.activeCell.cellIndex+1:g.children.length-1;var c=g.children[e];if(c){this.tableObj.focusCell(c)}else{this.navigateDown(f,0)}};a.prototype.navigateNext=function(c){if(!this.tableObj.activeCell){return}if(this.tableObj.activeCellProcessor&&!this.tableObj.activeCellProcessor.keyNavigationAllowed(c,"tab")){return}if(!c.shiftKey){this.navigateRight(c,true)}else{this.navigateLeft(c,true)}this.tableObj.stopEvent(c)};a.prototype.focusCell=function(d,f){var g=null,e=this.tableObj.getDataTableBody();if(typeof d==="object"){g=d}else{if(d=="bottom"){g=e.children[e.children.length-1]}else{if(d=="top"){g=e.children[0]}}}if(!g){return}var c=g.children[f];if(c){this.tableObj.focusCell(c)}};a.prototype.focusCellInReplacedRow=function(e,d){if(e==0){this.focusCell("top",d)}else{var c=this.tableObj.findRowByIndex(e);if(!c){c=this.tableObj.findRowByIndex(e-1)}if(c){this.focusCell(c,d)}else{this.focusCell("top",d)}}};a.prototype.onKeydown=function(c){if(c.keyCode==40){return this.navigateDown(c)}else{if(c.keyCode==38){return this.navigateUp(c)}else{if(c.keyCode==37){return this.navigateLeft(c)}}}if(c.keyCode==39){return this.navigateRight(c)}if(c.keyCode==9){return this.navigateNext(c)}};a.prototype.onClick=function(d){var e=this.tableObj.getEventTarget(d,"A");if(!e||!b(e).hasClass("pagination-link")){return}var c=parseInt(e.getAttribute("data-page-index"));if(c===null){return}this.gotoPage(c);this.tableObj.stopEvent(d);return false};b.oc.table.helper.navigation=a}(window.jQuery);