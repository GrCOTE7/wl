+function(c){if(c.oc.table===undefined){throw new Error("The $.oc.table namespace is not defined. Make sure that the table.js script is loaded.")}if(c.oc.table.processor===undefined){throw new Error("The $.oc.table.processor namespace is not defined. Make sure that the table.processor.base.js script is loaded.")}var b=c.oc.table.processor.string,a=b.prototype;var d=function(g,f,e){this.cachedOptionPromises={};b.call(this,g,f,e)};d.prototype=Object.create(a);d.prototype.constructor=d;d.prototype.dispose=function(){this.cachedOptionPromises=null;a.dispose.call(this)};d.prototype.onUnfocus=function(){if(!this.activeCell){return}this.removeAutocomplete();a.onUnfocus.call(this)};d.prototype.renderCell=function(e,f){a.renderCell.call(this,e,f)};d.prototype.buildEditor=function(e,i,h){a.buildEditor.call(this,e,i,h);var g=this;this.fetchOptions(e,function f(j){g.buildAutoComplete(j);g=null})};d.prototype.fetchOptions=function(k,i){if(this.columnConfiguration.options){if(i!==undefined){i(this.columnConfiguration.options)}}else{if(this.triggerGetOptions(i)===false){return}var m=k.parentNode,e=this.createOptionsCachingKey(m),l=this.getViewContainer(k);c.oc.foundation.element.addClass(l,"loading");if(!this.cachedOptionPromises[e]){var f={column:this.columnName,rowData:this.tableObj.getRowData(m)},g=this.tableObj.getAlias()+"::onGetAutocompleteOptions";this.cachedOptionPromises[e]=this.tableObj.$el.request(g,{data:f})}this.cachedOptionPromises[e].done(function h(n){if(i!==undefined){i(n.options)}}).always(function j(){c.oc.foundation.element.removeClass(l,"loading")})}};d.prototype.createOptionsCachingKey=function(j){var g="non-dependent",f=this.columnConfiguration.dependsOn;if(f){if(typeof f=="object"){for(var h=0,e=f.length;h<e;h++){g+=f[h]+this.tableObj.getRowCellValueByColumnName(j,f[h])}}else{g=f+this.tableObj.getRowCellValueByColumnName(j,f)}}return g};d.prototype.triggerGetOptions=function(h){var g=this.tableObj.getElement();if(!g){return}var f=c.Event("autocompleteitems.oc.table"),e={};c(g).trigger(f,[{values:e,callback:h,column:this.columnName,columnConfiguration:this.columnConfiguration}]);if(f.isDefaultPrevented()){return false}return true};d.prototype.getInput=function(){if(!this.activeCell){return null}return this.activeCell.querySelector(".string-input")};d.prototype.buildAutoComplete=function(f){if(!this.activeCell){return}var e=this.getInput();if(!e){return}if(f===undefined){f=[]}c(e).autocomplete({source:this.prepareItems(f),matchWidth:true,menu:'<ul class="autocomplete dropdown-menu table-widget-autocomplete"></ul>',bodyContainer:true})};d.prototype.prepareItems=function(g){var f={};if(c.isArray(g)){for(var h=0,e=g.length;h<e;h++){f[g[h]]=g[h]}}else{f=g}return f};d.prototype.removeAutocomplete=function(){var e=this.getInput();c(e).autocomplete("destroy")};c.oc.table.processor.autocomplete=d}(window.jQuery);