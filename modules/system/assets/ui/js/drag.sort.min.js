+function(e){var d=e.oc.foundation.base,c=d.prototype;var a=function(g,f){this.$el=e(g);this.options=f||{};this.cursorAdjustment=null;e.oc.foundation.controlUtils.markDisposable(g);d.call(this);this.init()};a.prototype=Object.create(c);a.prototype.constructor=a;a.prototype.init=function(){this.$el.one("dispose-control",this.proxy(this.dispose));var f=this,g={},h={onDragStart:this.proxy(this.onDragStart),onDrag:this.proxy(this.onDrag),onDrop:this.proxy(this.onDrop)};if(this.options.onDragStart){g.onDragStart=function(j,i,l,k){f.options.onDragStart(j,i,h.onDragStart,k)}}if(this.options.onDrag){g.onDrag=function(j,i,l,k){f.options.onDrag(j,i,h.onDrag,k)}}if(this.options.onDrop){g.onDrop=function(j,i,l,k){f.options.onDrop(j,i,h.onDrop,k)}}this.$el.jqSortable(e.extend({},h,this.options,g))};a.prototype.dispose=function(){this.$el.jqSortable("destroy");this.$el.off("dispose-control",this.proxy(this.dispose));this.$el.removeData("oc.sortable");this.$el=null;this.options=null;this.cursorAdjustment=null;c.dispose.call(this)};a.prototype.onDragStart=function(g,f,i,h){var k=g.offset(),j=f.rootGroup.pointer;if(j){this.cursorAdjustment={left:j.left-k.left,top:j.top-k.top}}else{this.cursorAdjustment=null}if(this.options.tweakCursorAdjustment){this.cursorAdjustment=this.options.tweakCursorAdjustment(this.cursorAdjustment)}g.css({height:g.height(),width:g.width()});g.addClass("dragged");e("body").addClass("dragging");this.$el.addClass("dragging");if(this.options.useAnimation){g.data("oc.animated",true)}if(this.options.usePlaceholderClone){e(f.rootGroup.placeholder).html(g.html())}if(!this.options.useDraggingClone){g.hide()}};a.prototype.onDrag=function(g,f,i,h){if(this.cursorAdjustment){g.css({left:f.left-this.cursorAdjustment.left,top:f.top-this.cursorAdjustment.top})}else{g.css(f)}};a.prototype.onDrop=function(g,f,i,h){g.removeClass("dragged").removeAttr("style");e("body").removeClass("dragging");this.$el.removeClass("dragging");if(g.data("oc.animated")){g.hide().slideDown(200)}};a.prototype.enable=function(){this.$el.jqSortable("enable")};a.prototype.disable=function(){this.$el.jqSortable("disable")};a.prototype.refresh=function(){this.$el.jqSortable("refresh")};a.prototype.serialize=function(){this.$el.jqSortable("serialize")};a.prototype.destroy=function(){this.dispose()};a.prototype.destroyGroup=function(){var f=this.$el.data("jqSortable");if(f.group){f.group._destroy()}};a.DEFAULTS={useAnimation:false,usePlaceholderClone:false,useDraggingClone:true,tweakCursorAdjustment:null};var b=e.fn.sortable;e.fn.sortable=function(g){var f=arguments;return this.each(function(){var j=e(this);var i=j.data("oc.sortable");var h=e.extend({},a.DEFAULTS,j.data(),typeof g=="object"&&g);if(!i){j.data("oc.sortable",(i=new a(this,h)))}if(typeof g=="string"){i[g].apply(i,f)}})};e.fn.sortable.Constructor=a;e.fn.sortable.noConflict=function(){e.fn.sortable=b;return this}}(window.jQuery);