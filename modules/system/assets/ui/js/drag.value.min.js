+function(b){var c=function(e,d){this.options=d;this.$el=b(e);this.init()};c.DEFAULTS={dragClick:false};c.prototype.init=function(){this.$el.prop("draggable",true);this.textValue=this.$el.data("textValue");this.$el.on("dragstart",b.proxy(this.handleDragStart,this));this.$el.on("drop",b.proxy(this.handleDrop,this));this.$el.on("dragend",b.proxy(this.handleDragEnd,this));if(this.options.dragClick){this.$el.on("click",b.proxy(this.handleClick,this));this.$el.on("mouseover",b.proxy(this.handleMouseOver,this))}};c.prototype.handleDragStart=function(d){var f=d.originalEvent;f.dataTransfer.effectAllowed="all";f.dataTransfer.setData("text/plain",this.textValue);this.$el.css({opacity:0.5}).addClass("dragvalue-dragging")};c.prototype.handleDrop=function(d){d.stopPropagation();return false};c.prototype.handleDragEnd=function(d){this.$el.css({opacity:1}).removeClass("dragvalue-dragging")};c.prototype.handleMouseOver=function(e){var d=document.activeElement;if(!d){return}if(d.isContentEditable||(d.tagName.toLowerCase()=="input"&&d.type=="text"||d.tagName.toLowerCase()=="textarea")){this.lastElement=d}};c.prototype.handleClick=function(e){if(!this.lastElement){return}var d=b(this.lastElement);if(d.hasClass("ace_text-input")){return this.handleClickCodeEditor(e,d)}if(this.lastElement.isContentEditable){return this.handleClickContentEditable()}this.insertAtCaret(this.lastElement,this.textValue)};c.prototype.handleClickCodeEditor=function(f,e){var d=e.closest("[data-control=codeeditor]");if(!d.length){return}d.codeEditor("getEditorObject").insert(this.textValue)};c.prototype.handleClickContentEditable=function(){var f,d,e;if(window.getSelection){f=window.getSelection();if(f.getRangeAt&&f.rangeCount){d=f.getRangeAt(0);d.deleteContents();d.insertNode(document.createTextNode(this.textValue))}}else{if(document.selection&&document.selection.createRange){document.selection.createRange().text=this.textValue}}};c.prototype.insertAtCaret=function(g,f){if(document.selection){g.focus();var h=document.selection.createRange();h.text=f;g.focus()}else{if(g.selectionStart||g.selectionStart=="0"){var e=g.selectionStart,d=g.selectionEnd,i=g.scrollTop;g.value=g.value.substring(0,e)+f+g.value.substring(d,g.value.length);g.focus();g.selectionStart=e+f.length;g.selectionEnd=e+f.length;g.scrollTop=i}else{g.value+=f;g.focus()}}};var a=b.fn.dragValue;b.fn.dragValue=function(f){var e=Array.prototype.slice.call(arguments,1),d;this.each(function(){var i=b(this);var h=i.data("oc.dragvalue");var g=b.extend({},c.DEFAULTS,i.data(),typeof f=="object"&&f);if(!h){i.data("oc.dragvalue",(h=new c(this,g)))}if(typeof f=="string"){d=h[f].apply(h,e)}if(typeof d!="undefined"){return false}});return d?d:this};b.fn.dragValue.Constructor=c;b.fn.dragValue.noConflict=function(){b.fn.dragValue=a;return this};b(document).render(function(){b('[data-control="dragvalue"]').dragValue()})}(window.jQuery);