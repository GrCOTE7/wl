+function(c){var a=c.fn.filterWidget.Constructor;var b=a.prototype.init;a.prototype.init=function(){b.apply(this);this.initFilterNumber()};a.prototype.initFilterNumber=function(){var d=this;this.$el.on("show.oc.popover","a.filter-scope-number",function(){d.initNumberInputs(c(this).hasClass("range"))});this.$el.on("hide.oc.popover","a.filter-scope-number",function(){var e=c(this);d.pushOptions(d.activeScopeName);d.activeScopeName=null;d.$activeScope=null;setTimeout(function(){e.removeClass("filter-scope-open")},200)});this.$el.on("click","a.filter-scope-number",function(){var f=c(this),e=f.data("scope-name");if(f.hasClass("filter-scope-open")){return}if(null!==d.activeScopeName){return}d.$activeScope=f;d.activeScopeName=e;d.isActiveScopeDirty=false;if(f.hasClass("range")){d.displayPopoverNumberRange(f)}else{d.displayPopoverNumber(f)}f.addClass("filter-scope-open")});c(document).on("click",'#controlFilterPopoverNum [data-trigger="filter"]',function(f){f.preventDefault();f.stopPropagation();d.filterByNumber()});c(document).on("click",'#controlFilterPopoverNum [data-trigger="clear"]',function(f){f.preventDefault();f.stopPropagation();d.filterByNumber(true)})};a.prototype.getPopoverNumberTemplate=function(){return'                                                                                                                        <form>                                                                                                                      <input type="hidden" name="scopeName" value="{{ scopeName }}" />                                                        <div id="controlFilterPopoverNum" class="control-filter-popover control-filter-box-popover --range">                        <div class="filter-search loading-indicator-container size-input-text">                                                     <div class="field-number">                                                                                                  <input                                                                                                                      type="number"                                                                                                           name="number"                                                                                                           value="{{ number }}"                                                                                                    class="form-control align-right"                                                                                        autocomplete="off"                                                                                                      placeholder="{{ number_placeholder }}" />                                                                       </div>                                                                                                                  <div class="filter-buttons">                                                                                                <button class="btn btn-block btn-primary" data-trigger="filter">                                                            {{ filter_button_text }}                                                                                            </button>                                                                                                               <button class="btn btn-block btn-secondary" data-trigger="clear">                                                           {{ reset_button_text }}                                                                                             </button>                                                                                                           </div>                                                                                                              </div>                                                                                                              </div>                                                                                                              </form>                                                                                                             '};a.prototype.getPopoverNumberRangeTemplate=function(){return'                                                                                                                            <form>                                                                                                                          <input type="hidden" name="scopeName" value="{{ scopeName }}" />                                                            <div id="controlFilterPopoverNum" class="control-filter-popover control-filter-box-popover --range">                            <div class="filter-search loading-indicator-container size-input-text">                                                         <div class="field-number">                                                                                                      <div class="right-align">                                                                                                       <input                                                                                                                          type="number"                                                                                                               name="number"                                                                                                               value="{{ number }}"                                                                                                        class="form-control align-right"                                                                                            autocomplete="off"                                                                                                          placeholder="{{ min_placeholder }}" />                                                                              </div>                                                                                                                  </div>                                                                                                                      <div class="field-number">                                                                                                      <div class="right-align">                                                                                                       <input                                                                                                                          type="number"                                                                                                               {{ maxNumber }}                                                                                                             name="number"                                                                                                               value="{{ number }}"                                                                                                        class="form-control align-right"                                                                                            autocomplete="off"                                                                                                          placeholder="{{ max_placeholder }}" />                                                                              </div>                                                                                                                  </div>                                                                                                                      <div class="filter-buttons">                                                                                                    <button class="btn btn-block btn-primary" data-trigger="filter">                                                                {{ filter_button_text }}                                                                                                </button>                                                                                                                   <button class="btn btn-block btn-secondary" data-trigger="clear">                                                               {{ reset_button_text }}                                                                                                 </button>                                                                                                               </div>                                                                                                                  </div>                                                                                                                  </div>                                                                                                                  </form>                                                                                                                 '};a.prototype.displayPopoverNumber=function(f){var e=this,d=f.data("scope-name"),g=this.scopeValues[d];g=c.extend({},g,{filter_button_text:this.getLang("filter.numbers.filter_button_text"),reset_button_text:this.getLang("filter.numbers.reset_button_text"),number_placeholder:this.getLang("filter.numbers.number_placeholder","Number")});g.scopeName=d;f.data("oc.popover",null);f.ocPopover({content:Mustache.render(this.getPopoverNumberTemplate(),g),modal:false,highlightModalTarget:true,closeOnPageClick:true,placement:"bottom",})};a.prototype.displayPopoverNumberRange=function(f){var e=this,d=f.data("scope-name"),g=this.scopeValues[d];g=c.extend({},g,{filter_button_text:this.getLang("filter.numbers.filter_button_text"),reset_button_text:this.getLang("filter.numbers.reset_button_text"),min_placeholder:this.getLang("filter.numbers.min_placeholder","Min"),max_placeholder:this.getLang("filter.numbers.max_placeholder","Max")});g.scopeName=d;f.data("oc.popover",null);f.ocPopover({content:Mustache.render(this.getPopoverNumberRangeTemplate(),g),modal:false,highlightModalTarget:true,closeOnPageClick:true,placement:"bottom",})};a.prototype.initNumberInputs=function(g){var d=this,f=this.$activeScope.data("scope-data"),e=c(".field-number input","#controlFilterPopoverNum"),h=this.scopeValues[this.activeScopeName];if(!h){h={numbers:g?(f.numbers?f.numbers:[]):(f.number?[f.number]:[])}}e.each(function(j,k){var i="";if(0<=j&&j<h.numbers.length){i=h.numbers[j]?h.numbers[j]:""}k.value=""!==i?i:""})};a.prototype.updateScopeNumberSetting=function(f,e){var h=f.find(".filter-setting"),j=/\d*/,i=false;if(e&&e.length){e[0]=e[0]&&e[0].match(j)?e[0]:null;if(e.length>1){e[1]=e[1]&&e[1].match(j)?e[1]:null;if(e[0]||e[1]){var g=e[0]?e[0]:"",d=e[1]?e[1]:"∞";h.text(g+" → "+d)}else{i=true}}else{if(e[0]){h.text(e[0])}else{i=true}}}else{i=true}if(i){h.text(this.getLang("filter.numbers.all","all"));f.removeClass("active")}else{f.addClass("active")}};a.prototype.filterByNumber=function(g){var e=this,d=[];if(!g){var f=c(".field-number input","#controlFilterPopoverNum");f.each(function(h,j){var i=c(j).val();d.push(i)})}this.updateScopeNumberSetting(this.$activeScope,d);this.scopeValues[this.activeScopeName]={numbers:d};this.isActiveScopeDirty=true;this.$activeScope.data("oc.popover").hide()}}(window.jQuery);