+function(e){var c=e.oc.foundation.base,b=c.prototype;var d=function(g,f){if(!f.hotkey){throw new Error("No hotkey has been defined.")}this.$el=e(g);this.$target=e(f.hotkeyTarget);this.options=f||{};this.keyConditions=[];this.keyMap=null;e.oc.foundation.controlUtils.markDisposable(g);c.call(this);this.init()};d.prototype=Object.create(b);d.prototype.constructor=d;d.prototype.dispose=function(){if(this.$el===null){return}this.unregisterHandlers();this.$el.removeData("oc.hotkey");this.$target=null;this.$el=null;this.keyConditions=null;this.keyMap=null;this.options=null;b.dispose.call(this)};d.prototype.init=function(){this.initKeyMap();var h=this.options.hotkey.toLowerCase().split(",");for(var g=0,f=h.length;g<f;g++){var j=this.trim(h[g]);this.keyConditions.push(this.makeCondition(j))}this.$target.on("keydown",this.proxy(this.onKeyDown));this.$el.one("dispose-control",this.proxy(this.dispose))};d.prototype.unregisterHandlers=function(){this.$target.off("keydown",this.proxy(this.onKeyDown));this.$el.off("dispose-control",this.proxy(this.dispose))};d.prototype.makeCondition=function(g){var k={shift:false,ctrl:false,cmd:false,alt:false,specific:-1},j=g.split("+");for(var h=0,f=j.length;h<f;h++){switch(j[h]){case"shift":k.shift=true;break;case"ctrl":k.ctrl=true;break;case"command":case"cmd":case"meta":k.cmd=true;break;case"alt":k.alt=true;break}}k.specific=this.keyMap[j[j.length-1]];if(typeof(k.specific)=="undefined"){k.specific=j[j.length-1].toUpperCase().charCodeAt()}return k};d.prototype.initKeyMap=function(){this.keyMap={esc:27,tab:9,space:32,"return":13,enter:13,backspace:8,scroll:145,capslock:20,numlock:144,pause:19,"break":19,insert:45,home:36,"delete":46,suppr:46,end:35,pageup:33,pagedown:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}};d.prototype.trim=function(f){return f.replace(/^\s+/,"").replace(/\s+$/,"")};d.prototype.testConditions=function(h){for(var g=0,f=this.keyConditions.length;g<f;g++){var j=this.keyConditions[g];if(h.which==j.specific&&h.originalEvent.shiftKey==j.shift&&h.originalEvent.ctrlKey==j.ctrl&&h.originalEvent.metaKey==j.cmd&&h.originalEvent.altKey==j.alt){return true}}return false};d.prototype.onKeyDown=function(f){if(this.testConditions(f)){if(this.options.hotkeyVisible&&!this.$el.is(":visible")){return}if(this.options.callback){return this.options.callback(this.$el,f.currentTarget)}}};d.DEFAULTS={hotkey:null,hotkeyTarget:"html",hotkeyVisible:true,callback:function(f){f.trigger("click");return false}};var a=e.fn.hotKey;e.fn.hotKey=function(g){var f=arguments;return this.each(function(){var j=e(this);var i=j.data("oc.hotkey");var h=e.extend({},d.DEFAULTS,j.data(),typeof g=="object"&&g);if(!i){j.data("oc.hotkey",(i=new d(this,h)))}if(typeof g=="string"){i[g].apply(i,f)}})};e.fn.hotKey.Constructor=d;e.fn.hotKey.noConflict=function(){e.fn.hotKey=a;return this};e(document).render(function(){e("[data-hotkey]").hotKey()})}(window.jQuery);