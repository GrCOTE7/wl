+function(e){var d=e.oc.foundation.base,b=d.prototype;var c=function(g,f){this.$el=e(g);this.paused=false;this.options=f||{};e.oc.foundation.controlUtils.markDisposable(g);d.call(this);this.init()};c.prototype=Object.create(b);c.prototype.constructor=c;c.prototype.init=function(){this.$el.on("change",this.proxy(this.change));this.$el.on("unchange.oc.changeMonitor",this.proxy(this.unchange));this.$el.on("pause.oc.changeMonitor",this.proxy(this.pause));this.$el.on("resume.oc.changeMonitor",this.proxy(this.resume));this.$el.on("keyup input paste","input, textarea:not(.ace_text-input)",this.proxy(this.onInputChange));e("input:not([type=hidden]), textarea:not(.ace_text-input)",this.$el).each(function(){e(this).data("oldval.oc.changeMonitor",e(this).val())});if(this.options.windowCloseConfirm){e(window).on("beforeunload",this.proxy(this.onBeforeUnload))}this.$el.one("dispose-control",this.proxy(this.dispose));this.$el.trigger("ready.oc.changeMonitor")};c.prototype.dispose=function(){if(this.$el===null){return}this.unregisterHandlers();this.$el.removeData("oc.changeMonitor");this.$el=null;this.options=null;b.dispose.call(this)};c.prototype.unregisterHandlers=function(){this.$el.off("change",this.proxy(this.change));this.$el.off("unchange.oc.changeMonitor",this.proxy(this.unchange));this.$el.off("pause.oc.changeMonitor ",this.proxy(this.pause));this.$el.off("resume.oc.changeMonitor ",this.proxy(this.resume));this.$el.off("keyup input paste","input, textarea:not(.ace_text-input)",this.proxy(this.onInputChange));this.$el.off("dispose-control",this.proxy(this.dispose));if(this.options.windowCloseConfirm){e(window).off("beforeunload",this.proxy(this.onBeforeUnload))}};c.prototype.change=function(h,g){if(this.paused){return}if(!g){var f=e(h.target).attr("type");if(f=="text"||f=="password"){return}}if(!this.$el.hasClass("oc-data-changed")){this.$el.trigger("changed.oc.changeMonitor");this.$el.addClass("oc-data-changed")}};c.prototype.unchange=function(){if(this.paused){return}if(this.$el.hasClass("oc-data-changed")){this.$el.trigger("unchanged.oc.changeMonitor");this.$el.removeClass("oc-data-changed")}};c.prototype.onInputChange=function(g){if(this.paused){return}var f=e(g.target);if(f.data("oldval.oc.changeMonitor")!=f.val()){f.data("oldval.oc.changeMonitor",f.val());this.change(g,true)}};c.prototype.pause=function(){this.paused=true};c.prototype.resume=function(){this.paused=false};c.prototype.onBeforeUnload=function(){if(e.contains(document.documentElement,this.$el.get(0))&&this.$el.hasClass("oc-data-changed")){return this.options.windowCloseConfirm}};c.DEFAULTS={windowCloseConfirm:false};var a=e.fn.changeMonitor;e.fn.changeMonitor=function(f){return this.each(function(){var i=e(this);var h=i.data("oc.changeMonitor");var g=e.extend({},c.DEFAULTS,i.data(),typeof f=="object"&&f);if(!h){i.data("oc.changeMonitor",(h=new c(this,g)))}})};e.fn.changeMonitor.Constructor=c;e.fn.changeMonitor.noConflict=function(){e.fn.changeMonitor=a;return this};e(document).render(function(){e("[data-change-monitor]").changeMonitor()})}(window.jQuery);