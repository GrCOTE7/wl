+function(d){var b=d.oc.inspector.wrappers.base,a=b.prototype;var c=function(f,e,g){if(!g.container){throw new Error("Cannot create Inspector container wrapper without a container element.")}this.surfaceContainer=null;b.call(this,f,e,g)};c.prototype=Object.create(a);c.prototype.constructor=b;c.prototype.init=function(){this.registerHandlers();a.init.call(this)};c.prototype.dispose=function(){this.unregisterHandlers();this.removeControls();this.surfaceContainer=null;a.dispose.call(this)};c.prototype.createSurfaceAndUi=function(f,e){this.buildUi();this.initSurface(this.surfaceContainer,f,e);if(this.isLiveUpdateEnabled()){this.surface.options.onChange=this.proxy(this.onLiveUpdate)}};c.prototype.adoptSurface=function(){this.buildUi();this.surface.moveToContainer(this.surfaceContainer);if(this.isLiveUpdateEnabled()){this.surface.options.onChange=this.proxy(this.onLiveUpdate)}a.adoptSurface.call(this)};c.prototype.buildUi=function(){var g=this.isScrollable(),f=this.buildHead(),h=this.buildLayout();h.headContainer.appendChild(f);if(g){var e=this.buildScrollpad();this.surfaceContainer=e.container;h.bodyContainer.appendChild(e.scrollpad);d(e.scrollpad).scrollpad()}else{this.surfaceContainer=h.bodyContainer}this.setInspectorVisibleFlag(true)};c.prototype.buildHead=function(){var f=document.createElement("div"),i=document.createElement("h3"),h=document.createElement("p"),e=document.createElement("span"),g=document.createElement("span");f.setAttribute("class","inspector-header");e.setAttribute("class","oc-icon-external-link-square detach");g.setAttribute("class","close");i.textContent=this.title;h.textContent=this.description;g.innerHTML="&times;";f.appendChild(i);f.appendChild(h);f.appendChild(e);f.appendChild(g);return f};c.prototype.buildScrollpad=function(){var e=document.createElement("div"),g=document.createElement("div"),f=document.createElement("div");e.setAttribute("class","control-scrollpad");e.setAttribute("data-control","scrollpad");g.setAttribute("class","scroll-wrapper inspector-wrapper");e.appendChild(g);g.appendChild(f);return{scrollpad:e,container:f}};c.prototype.buildLayout=function(){var f=document.createElement("div"),g=document.createElement("div"),e=document.createElement("div");f.setAttribute("class","flex-layout-column fill-container");g.setAttribute("class","flex-layout-item fix");e.setAttribute("class","flex-layout-item stretch relative");f.appendChild(g);f.appendChild(e);this.options.container.get(0).appendChild(f);d.oc.foundation.controlUtils.markDisposable(f);this.registerLayoutHandlers(f);return{headContainer:g,bodyContainer:e}};c.prototype.validateAndApply=function(){if(!this.surface.validate()){return false}this.applyValues();return true};c.prototype.isScrollable=function(){return this.options.container.data("inspector-scrollable")!==undefined};c.prototype.isLiveUpdateEnabled=function(){return this.options.container.data("inspector-live-update")!==undefined};c.prototype.getLayout=function(){return this.options.container.get(0).querySelector("div.flex-layout-column")};c.prototype.registerLayoutHandlers=function(e){var f=d(e);f.one("dispose-control",this.proxy(this.dispose));f.on("click","span.close",this.proxy(this.onClose));f.on("click","span.detach",this.proxy(this.onDetach))};c.prototype.registerHandlers=function(){this.options.container.on("apply.oc.inspector",this.proxy(this.onApplyValues));this.options.container.on("beforeContainerHide.oc.inspector",this.proxy(this.onBeforeHide))};c.prototype.unregisterHandlers=function(){var e=d(this.getLayout());this.options.container.off("apply.oc.inspector",this.proxy(this.onApplyValues));this.options.container.off("beforeContainerHide.oc.inspector",this.proxy(this.onBeforeHide));e.off("dispose-control",this.proxy(this.dispose));e.off("click","span.close",this.proxy(this.onClose));e.off("click","span.detach",this.proxy(this.onDetach));if(this.surface!==null&&this.surface.options.onChange===this.proxy(this.onLiveUpdate)){this.surface.options.onChange=null}};c.prototype.removeControls=function(){if(this.isScrollable()){this.options.container.find(".control-scrollpad").scrollpad("dispose")}var e=this.getLayout();e.parentNode.removeChild(e)};c.prototype.onApplyValues=function(e){if(!this.validateAndApply()){e.preventDefault();return false}};c.prototype.onBeforeHide=function(e){if(!this.triggerHiding()){e.preventDefault();return false}};c.prototype.onClose=function(e){if(!this.validateAndApply()){e.preventDefault();return false}if(!this.triggerHiding()){e.preventDefault();return false}this.surface.dispose();this.dispose()};c.prototype.onLiveUpdate=function(){this.applyValues(true)};c.prototype.onDetach=function(){d.oc.inspector.manager.switchToPopup(this)};d.oc.inspector.wrappers.container=c}(window.jQuery);