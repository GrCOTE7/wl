+function(b){var c=function(e,d){this.$el=b(e);this.options=d||{};this.tally=0;this.show()};c.prototype.hide=function(){this.tally--;if(this.tally<=0){b("div.loading-indicator",this.$el).remove();this.$el.removeClass("in-progress")}};c.prototype.show=function(e){if(e){this.options=e}this.hide();var d=b('<div class="loading-indicator"></div>');d.append(b("<div></div>").text(this.options.text));d.append(b("<span></span>"));if(this.options.opaque!==undefined){d.addClass("is-opaque")}this.$el.prepend(d);this.$el.addClass("in-progress");this.tally++};c.prototype.destroy=function(){this.$el.removeData("oc.loadIndicator");this.$el=null};c.DEFAULTS={text:""};var a=b.fn.loadIndicator;b.fn.loadIndicator=function(e){var d=arguments;return this.each(function(){var k=b(this);var j=k.data("oc.loadIndicator");var g=b.extend({},c.DEFAULTS,typeof e=="object"&&e);if(!j){if(typeof e=="string"){return}k.data("oc.loadIndicator",(j=new c(this,g)))}else{if(typeof e!=="string"){j.show(g)}else{var f=[];for(var h=1;h<d.length;h++){f.push(d[h])}j[e].apply(j,f)}}})};b.fn.loadIndicator.Constructor=c;b.fn.loadIndicator.noConflict=function(){b.fn.loadIndicator=a;return this};b(document).on("ajaxPromise","[data-load-indicator]",function(){var f=b(this).closest(".loading-indicator-container"),e=b(this).data("load-indicator"),d={opaque:b(this).data("load-indicator-opaque")};if(e){d.text=e}f.loadIndicator(d)}).on("ajaxFail ajaxDone","[data-load-indicator]",function(){b(this).closest(".loading-indicator-container").loadIndicator("hide")})}(window.jQuery);