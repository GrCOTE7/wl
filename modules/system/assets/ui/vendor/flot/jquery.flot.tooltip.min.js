(function(b){var a={tooltip:false,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:true,onHover:function(f,e){}}};var c=function(e){this.tipPosition={x:0,y:0};this.init(e)};c.prototype.init=function(f){var e=this;f.hooks.bindEvents.push(function(h,g){e.plotOptions=h.getOptions();if(e.plotOptions.tooltip===false||typeof e.plotOptions.tooltip==="undefined"){return}e.tooltipOptions=e.plotOptions.tooltipOpts;var i=e.getDomElement();b(h.getPlaceholder()).bind("plothover",function(l,m,k){if(k){var j;j=e.stringFormat(e.tooltipOptions.content,k);i.html(j);e.updateTooltipPosition({x:m.pageX,y:m.pageY});i.css({left:e.tipPosition.x+e.tooltipOptions.shifts.x,top:e.tipPosition.y+e.tooltipOptions.shifts.y}).show();if(typeof e.tooltipOptions.onHover==="function"){e.tooltipOptions.onHover(k,i)}}else{i.hide().html("")}});g.mousemove(function(j){var k={};k.x=j.pageX;k.y=j.pageY;e.updateTooltipPosition(k)})})};c.prototype.getDomElement=function(){var e;if(b("#flotTip").length>0){e=b("#flotTip")}else{e=b("<div />").attr("id","flotTip");e.appendTo("body").hide().css({position:"absolute"});if(this.tooltipOptions.defaultTheme){e.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"inline-block","white-space":"nowrap"})}}return e};c.prototype.updateTooltipPosition=function(g){var e=b("#flotTip").outerWidth()+this.tooltipOptions.shifts.x;var f=b("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;if((g.x-b(window).scrollLeft())>(b(window).innerWidth()-e)){g.x-=e}if((g.y-b(window).scrollTop())>(b(window).innerHeight()-f)){g.y-=f}this.tipPosition.x=g.x;this.tipPosition.y=g.y};c.prototype.stringFormat=function(h,g){var j=/%p\.{0,1}(\d{0,})/;var i=/%s/;var f=/%x\.{0,1}(\d{0,})/;var e=/%y\.{0,1}(\d{0,})/;if(typeof(h)==="function"){h=h(g.series.data[g.dataIndex][0],g.series.data[g.dataIndex][1])}if(typeof(g.series.percent)!=="undefined"){h=this.adjustValPrecision(j,h,g.series.percent)}if(typeof(g.series.label)!=="undefined"){h=h.replace(i,g.series.label)}if(this.isTimeMode("xaxis",g)&&this.isXDateFormat(g)){h=h.replace(f,this.timestampToDate(g.series.data[g.dataIndex][0],this.tooltipOptions.xDateFormat))}if(this.isTimeMode("yaxis",g)&&this.isYDateFormat(g)){h=h.replace(e,this.timestampToDate(g.series.data[g.dataIndex][1],this.tooltipOptions.yDateFormat))}if(typeof g.series.data[g.dataIndex][0]==="number"){h=this.adjustValPrecision(f,h,g.series.data[g.dataIndex][0])}if(typeof g.series.data[g.dataIndex][1]==="number"){h=this.adjustValPrecision(e,h,g.series.data[g.dataIndex][1])}if(typeof g.series.xaxis.tickFormatter!=="undefined"){h=h.replace(f,g.series.xaxis.tickFormatter(g.series.data[g.dataIndex][0],g.series.xaxis))}if(typeof g.series.yaxis.tickFormatter!=="undefined"){h=h.replace(e,g.series.yaxis.tickFormatter(g.series.data[g.dataIndex][1],g.series.yaxis))}return h};c.prototype.isTimeMode=function(f,e){return(typeof e.series[f].options.mode!=="undefined"&&e.series[f].options.mode==="time")};c.prototype.isXDateFormat=function(e){return(typeof this.tooltipOptions.xDateFormat!=="undefined"&&this.tooltipOptions.xDateFormat!==null)};c.prototype.isYDateFormat=function(e){return(typeof this.tooltipOptions.yDateFormat!=="undefined"&&this.tooltipOptions.yDateFormat!==null)};c.prototype.timestampToDate=function(f,e){var g=new Date(f);return b.plot.formatDate(g,e)};c.prototype.adjustValPrecision=function(h,f,g){var e;if(f.match(h)!==null){if(RegExp.$1!==""){e=RegExp.$1;g=g.toFixed(e);f=f.replace(h,g)}}return f};var d=function(e){new c(e)};b.plot.plugins.push({init:d,options:a,name:"tooltip",version:"0.6.1"})})(jQuery);