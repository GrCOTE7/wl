/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(b,a){if(typeof exports==="object"&&exports){a(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],a)}else{a(b.Mustache={})}}}(this,function(a){var u=Object.prototype.toString;var k=Array.isArray||function(x){return u.call(x)==="[object Array]"};function b(x){return typeof x==="function"}function e(x){return x.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var g=RegExp.prototype.test;function q(y,x){return g.call(y,x)}var j=/\S/;function h(x){return !q(j,x)}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function m(x){return String(x).replace(/[&<>"'\/]/g,function(y){return d[y]})}var f=/\s*/;var l=/\s+/;var t=/\s*=/;var n=/\s*\}/;var r=/#|\^|\/|>|\{|&|=|!/;function w(Q,F){if(!Q){return[]}var H=[];var G=[];var C=[];var R=false;var O=false;function N(){if(R&&!O){while(C.length){delete G[C.pop()]}}else{C=[]}R=false;O=false}var J,E,P;function D(S){if(typeof S==="string"){S=S.split(l,2)}if(!k(S)||S.length!==2){throw new Error("Invalid tags: "+S)}J=new RegExp(e(S[0])+"\\s*");E=new RegExp("\\s*"+e(S[1]));P=new RegExp("\\s*"+e("}"+S[1]))}D(F||a.tags);var z=new s(Q);var A,y,I,L,B,x;while(!z.eos()){A=z.pos;I=z.scanUntil(J);if(I){for(var M=0,K=I.length;M<K;++M){L=I.charAt(M);if(h(L)){C.push(G.length)}else{O=true}G.push(["text",L,A,A+1]);A+=1;if(L==="\n"){N()}}}if(!z.scan(J)){break}R=true;y=z.scan(r)||"name";z.scan(f);if(y==="="){I=z.scanUntil(t);z.scan(t);z.scanUntil(E)}else{if(y==="{"){I=z.scanUntil(P);z.scan(n);z.scanUntil(E);y="&"}else{I=z.scanUntil(E)}}if(!z.scan(E)){throw new Error("Unclosed tag at "+z.pos)}B=[y,I,A,z.pos];G.push(B);if(y==="#"||y==="^"){H.push(B)}else{if(y==="/"){x=H.pop();if(!x){throw new Error('Unopened section "'+I+'" at '+A)}if(x[1]!==I){throw new Error('Unclosed section "'+x[1]+'" at '+A)}}else{if(y==="name"||y==="{"||y==="&"){O=true}else{if(y==="="){D(I)}}}}}x=H.pop();if(x){throw new Error('Unclosed section "'+x[1]+'" at '+z.pos)}return v(c(G))}function c(C){var y=[];var A,x;for(var z=0,B=C.length;z<B;++z){A=C[z];if(A){if(A[0]==="text"&&x&&x[0]==="text"){x[1]+=A[1];x[3]=A[3]}else{y.push(A);x=A}}}return y}function v(C){var E=[];var B=E;var D=[];var y,A;for(var x=0,z=C.length;x<z;++x){y=C[x];switch(y[0]){case"#":case"^":B.push(y);D.push(y);B=y[4]=[];break;case"/":A=D.pop();A[5]=y[2];B=D.length>0?D[D.length-1][4]:E;break;default:B.push(y)}}return E}function s(x){this.string=x;this.tail=x;this.pos=0}s.prototype.eos=function(){return this.tail===""};s.prototype.scan=function(z){var y=this.tail.match(z);if(!y||y.index!==0){return""}var x=y[0];this.tail=this.tail.substring(x.length);this.pos+=x.length;return x};s.prototype.scanUntil=function(z){var y=this.tail.search(z),x;switch(y){case -1:x=this.tail;this.tail="";break;case 0:x="";break;default:x=this.tail.substring(0,y);this.tail=this.tail.substring(y)}this.pos+=x.length;return x};function p(y,x){this.view=y;this.cache={".":this.view};this.parent=x}p.prototype.push=function(x){return new p(x,this)};p.prototype.lookup=function(A){var y=this.cache;var C;if(A in y){C=y[A]}else{var B=this,D,z,x=false;while(B){if(A.indexOf(".")>0){C=B.view;D=A.split(".");z=0;while(C!=null&&z<D.length){if(z===D.length-1&&C!=null){x=(typeof C==="object")&&C.hasOwnProperty(D[z])}C=C[D[z++]]}}else{if(B.view!=null&&typeof B.view==="object"){C=B.view[A];x=B.view.hasOwnProperty(A)}}if(x){break}B=B.parent}y[A]=C}if(b(C)){C=C.call(this.view)}return C};function o(){this.cache={}}o.prototype.clearCache=function(){this.cache={}};o.prototype.parse=function(z,y){var x=this.cache;var A=x[z];if(A==null){A=x[z]=w(z,y)}return A};o.prototype.render=function(A,x,z){var B=this.parse(A);var y=(x instanceof p)?x:new p(x);return this.renderTokens(B,y,z,A)};o.prototype.renderTokens=function(E,x,C,G){var A="";var z,y,F;for(var B=0,D=E.length;B<D;++B){F=undefined;z=E[B];y=z[0];if(y==="#"){F=this._renderSection(z,x,C,G)}else{if(y==="^"){F=this._renderInverted(z,x,C,G)}else{if(y===">"){F=this._renderPartial(z,x,C,G)}else{if(y==="&"){F=this._unescapedValue(z,x)}else{if(y==="name"){F=this._escapedValue(z,x)}else{if(y==="text"){F=this._rawValue(z)}}}}}}if(F!==undefined){A+=F}}return A};o.prototype._renderSection=function(z,x,C,F){var G=this;var B="";var D=x.lookup(z[1]);function y(H){return G.render(H,x,C)}if(!D){return}if(k(D)){for(var A=0,E=D.length;A<E;++A){B+=this.renderTokens(z[4],x.push(D[A]),C,F)}}else{if(typeof D==="object"||typeof D==="string"||typeof D==="number"){B+=this.renderTokens(z[4],x.push(D),C,F)}else{if(b(D)){if(typeof F!=="string"){throw new Error("Cannot use higher-order sections without the original template")}D=D.call(x.view,F.slice(z[3],z[5]),y);if(D!=null){B+=D}}else{B+=this.renderTokens(z[4],x,C,F)}}}return B};o.prototype._renderInverted=function(z,y,x,B){var A=y.lookup(z[1]);if(!A||(k(A)&&A.length===0)){return this.renderTokens(z[4],y,x,B)}};o.prototype._renderPartial=function(z,y,x){if(!x){return}var A=b(x)?x(z[1]):x[z[1]];if(A!=null){return this.renderTokens(this.parse(A),y,x,A)}};o.prototype._unescapedValue=function(y,x){var z=x.lookup(y[1]);if(z!=null){return z}};o.prototype._escapedValue=function(y,x){var z=x.lookup(y[1]);if(z!=null){return a.escape(z)}};o.prototype._rawValue=function(x){return x[1]};a.name="mustache.js";a.version="2.0.0";a.tags=["{{","}}"];var i=new o();a.clearCache=function(){return i.clearCache()};a.parse=function(y,x){return i.parse(y,x)};a.render=function(z,x,y){return i.render(z,x,y)};a.to_html=function(A,y,z,B){var x=a.render(A,y,z);if(b(B)){B(x)}else{return x}};a.escape=m;a.Scanner=s;a.Context=p;a.Writer=o}));