/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
(function(a,b){var d;if(typeof exports==="object"){try{d=require("moment")}catch(c){}module.exports=b(d)}else{if(typeof define==="function"&&define.amd){define(function(f){var h="moment";try{d=f(h)}catch(g){}return b(d)})}else{a.Pikaday=b(a.moment)}}}(this,function(B){var j=typeof B==="function",d=!!window.addEventListener,q=window.document,u=window.setTimeout,s=function(G,H,I,F){if(d){G.addEventListener(H,I,!!F)}else{G.attachEvent("on"+H,I)}},w=function(G,H,I,F){if(d){G.removeEventListener(H,I,!!F)}else{G.detachEvent("on"+H,I)}},E=function(G,F,I){var H;if(q.createEvent){H=q.createEvent("HTMLEvents");H.initEvent(F,true,false);H=y(H,I);G.dispatchEvent(H)}else{if(q.createEventObject){H=q.createEventObject();H=y(H,I);G.fireEvent("on"+F,H)}}},x=function(F){return F.trim?F.trim():F.replace(/^\s+|\s+$/g,"")},a=function(F,G){return(" "+F.className+" ").indexOf(" "+G+" ")!==-1},m=function(F,G){if(!a(F,G)){F.className=(F.className==="")?G:F.className+" "+G}},n=function(F,G){F.className=x((" "+F.className+" ").replace(" "+G+" "," "))},l=function(F){return(/Array/).test(Object.prototype.toString.call(F))},C=function(F){return(/Date/).test(Object.prototype.toString.call(F))&&!isNaN(F.getTime())},p=function(G){var F=G.getDay();return F===0||F===6},g=function(F){return F%4===0&&F%100!==0||F%400===0},c=function(F,G){return[31,g(F)?29:28,31,30,31,30,31,31,30,31,30,31][G]},A=function(F){if(C(F)){F.setHours(0,0,0,0)}},r=function(G,F){return G.getTime()===F.getTime()},y=function(J,I,F){var H,G;for(H in I){G=J[H]!==undefined;if(G&&typeof I[H]==="object"&&I[H]!==null&&I[H].nodeName===undefined){if(C(I[H])){if(F){J[H]=new Date(I[H].getTime())}}else{if(l(I[H])){if(F){J[H]=I[H].slice(0)}}else{J[H]=y({},I[H],F)}}}else{if(F||!G){J[H]=I[H]}}}return J},i=function(F){if(F.month<0){F.year-=Math.ceil(Math.abs(F.month)/12);F.month+=12}if(F.month>11){F.year+=Math.floor(Math.abs(F.month)/12);F.month-=12}return F},k={field:null,bound:undefined,position:"bottom left",reposition:true,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:false,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,startRange:null,endRange:null,isRTL:false,yearSuffix:"",showMonthAfterYear:false,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},D=function(H,F,G){F+=H.firstDay;while(F>=7){F-=7}return G?H.i18n.weekdaysShort[F]:H.i18n.weekdays[F]},v=function(G){if(G.isEmpty){return'<td class="is-empty"></td>'}var F=[];if(G.isDisabled){F.push("is-disabled")}if(G.isToday){F.push("is-today")}if(G.isSelected){F.push("is-selected")}if(G.isInRange){F.push("is-inrange")}if(G.isStartRange){F.push("is-startrange")}if(G.isEndRange){F.push("is-endrange")}return'<td data-day="'+G.day+'" class="'+F.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+G.year+'" data-pika-month="'+G.month+'" data-pika-day="'+G.day+'">'+G.day+"</button></td>"},f=function(I,F,J){var H=new Date(J,0,1),G=Math.ceil((((new Date(J,F,I)-H)/86400000)+H.getDay()+1)/7);return'<td class="pika-week">'+G+"</td>"},e=function(G,F){return"<tr>"+(F?G.reverse():G).join("")+"</tr>"},b=function(F){return"<tbody>"+F.join("")+"</tbody>"},z=function(H){var G,F=[];if(H.showWeekNumber){F.push("<th></th>")}for(G=0;G<7;G++){F.push('<th scope="col"><abbr title="'+D(H,G)+'">'+D(H,G,true)+"</abbr></th>")}return"<thead>"+(H.isRTL?F.reverse():F).join("")+"</thead>"},t=function(S,P,Q,O,U){var K,J,N,F=S._o,I=Q===F.minYear,T=Q===F.maxYear,M='<div class="pika-title">',H,R,G=true,L=true;for(N=[],K=0;K<12;K++){N.push('<option value="'+(Q===U?K-P:12+K-P)+'"'+(K===O?" selected":"")+((I&&K<F.minMonth)||(T&&K>F.maxMonth)?"disabled":"")+">"+F.i18n.months[K]+"</option>")}H='<div class="pika-label">'+F.i18n.months[O]+'<select class="pika-select pika-select-month" tabindex="-1">'+N.join("")+"</select></div>";if(l(F.yearRange)){K=F.yearRange[0];J=F.yearRange[1]+1}else{K=Q-F.yearRange;J=1+Q+F.yearRange}for(N=[];K<J&&K<=F.maxYear;K++){if(K>=F.minYear){N.push('<option value="'+K+'"'+(K===Q?" selected":"")+">"+(K)+"</option>")}}R='<div class="pika-label">'+Q+F.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+N.join("")+"</select></div>";if(F.showMonthAfterYear){M+=R+H}else{M+=H+R}if(I&&(O===0||F.minMonth>=O)){G=false}if(T&&(O===11||F.maxMonth<=O)){L=false}if(P===0){M+='<button class="pika-prev'+(G?"":" is-disabled")+'" type="button">'+F.i18n.previousMonth+"</button>"}if(P===(S._o.numberOfMonths-1)){M+='<button class="pika-next'+(L?"":" is-disabled")+'" type="button">'+F.i18n.nextMonth+"</button>"}return M+="</div>"},o=function(F,G){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+z(F)+b(G)+"</table>"},h=function(H){var F=this,I=F.config(H);F._onMouseDown=function(K){if(!F._v){return}K=K||window.event;var J=K.target||K.srcElement;if(!J){return}if(!a(J,"is-disabled")){if(a(J,"pika-button")&&!a(J,"is-empty")){F.setDate(new Date(J.getAttribute("data-pika-year"),J.getAttribute("data-pika-month"),J.getAttribute("data-pika-day")));if(I.bound){u(function(){F.hide();if(I.field){I.field.blur()}},100)}}else{if(a(J,"pika-prev")){F.prevMonth()}else{if(a(J,"pika-next")){F.nextMonth()}}}}if(!a(J,"pika-select")){if(K.preventDefault){K.preventDefault()}else{K.returnValue=false;return false}}else{F._c=true}};F._onChange=function(K){K=K||window.event;var J=K.target||K.srcElement;if(!J){return}if(a(J,"pika-select-month")){F.gotoMonth(J.value)}else{if(a(J,"pika-select-year")){F.gotoYear(J.value)}}};F._onInputChange=function(K){var J;if(K.firedBy===F){return}if(j){J=B(I.field.value,I.format);J=(J&&J.isValid())?J.toDate():null}else{J=new Date(Date.parse(I.field.value))}if(C(J)){F.setDate(J)}if(!F._v){F.show()}};F._onInputFocus=function(){F.show()};F._onInputClick=function(){F.show()};F._onInputBlur=function(){var J=q.activeElement;do{if(a(J,"pika-single")){return}}while((J=J.parentNode));if(!F._c){F._b=u(function(){F.hide()},50)}F._c=false};F._onClick=function(K){K=K||window.event;var J=K.target||K.srcElement,L=J;if(!J){return}if(!d&&a(J,"pika-select")){if(!J.onchange){J.setAttribute("onchange","return;");s(J,"change",F._onChange)}}do{if(a(L,"pika-single")||L===I.trigger){return}}while((L=L.parentNode));if(F._v&&J!==I.trigger&&L!==I.trigger){F.hide()}};F.el=q.createElement("div");F.el.className="pika-single"+(I.isRTL?" is-rtl":"")+(I.theme?" "+I.theme:"");s(F.el,"mousedown",F._onMouseDown,true);s(F.el,"touchend",F._onMouseDown,true);s(F.el,"change",F._onChange);if(I.field){if(I.container){I.container.appendChild(F.el)}else{if(I.bound){q.body.appendChild(F.el)}else{I.field.parentNode.insertBefore(F.el,I.field.nextSibling)}}s(I.field,"change",F._onInputChange);if(!I.defaultDate){if(j&&I.field.value){I.defaultDate=B(I.field.value,I.format).toDate()}else{I.defaultDate=new Date(Date.parse(I.field.value))}I.setDefaultDate=true}}var G=I.defaultDate;if(C(G)){if(I.setDefaultDate){F.setDate(G,true)}else{F.gotoDate(G)}}else{F.gotoDate(new Date())}if(I.bound){this.hide();F.el.className+=" is-bound";s(I.trigger,"click",F._onInputClick);s(I.trigger,"focus",F._onInputFocus);s(I.trigger,"blur",F._onInputBlur)}else{this.show()}};h.prototype={config:function(G){if(!this._o){this._o=y({},k,true)}var H=y(this._o,G,true);H.isRTL=!!H.isRTL;H.field=(H.field&&H.field.nodeName)?H.field:null;H.theme=(typeof H.theme)==="string"&&H.theme?H.theme:null;H.bound=!!(H.bound!==undefined?H.field&&H.bound:H.field);H.trigger=(H.trigger&&H.trigger.nodeName)?H.trigger:H.field;H.disableWeekends=!!H.disableWeekends;H.disableDayFn=(typeof H.disableDayFn)==="function"?H.disableDayFn:null;var F=parseInt(H.numberOfMonths,10)||1;H.numberOfMonths=F>4?4:F;if(!C(H.minDate)){H.minDate=false}if(!C(H.maxDate)){H.maxDate=false}if((H.minDate&&H.maxDate)&&H.maxDate<H.minDate){H.maxDate=H.minDate=false}if(H.minDate){this.setMinDate(H.minDate)}if(H.maxDate){this.setMaxDate(H.maxDate)}if(l(H.yearRange)){var I=new Date().getFullYear()-10;H.yearRange[0]=parseInt(H.yearRange[0],10)||I;H.yearRange[1]=parseInt(H.yearRange[1],10)||I}else{H.yearRange=Math.abs(parseInt(H.yearRange,10))||k.yearRange;if(H.yearRange>100){H.yearRange=100}}return H},toString:function(F){return !C(this._d)?"":j?B(this._d).format(F||this._o.format):this._d.toDateString()},getMoment:function(){return j?B(this._d):null},setMoment:function(F,G){if(j&&B.isMoment(F)){this.setDate(F.toDate(),G)}},getDate:function(){return C(this._d)?new Date(this._d.getTime()):null},setDate:function(G,I){if(!G){this._d=null;if(this._o.field){this._o.field.value="";E(this._o.field,"change",{firedBy:this})}return this.draw()}if(typeof G==="string"){G=new Date(Date.parse(G))}if(!C(G)){return}var H=this._o.minDate,F=this._o.maxDate;if(C(H)&&G<H){G=H}else{if(C(F)&&G>F){G=F}}this._d=new Date(G.getTime());A(this._d);this.gotoDate(this._d);if(this._o.field){this._o.field.value=this.toString();E(this._o.field,"change",{firedBy:this})}if(!I&&typeof this._o.onSelect==="function"){this._o.onSelect.call(this,this.getDate())}},gotoDate:function(H){var G=true;if(!C(H)){return}if(this.calendars){var J=new Date(this.calendars[0].year,this.calendars[0].month,1),F=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),I=H.getTime();F.setMonth(F.getMonth()+1);F.setDate(F.getDate()-1);G=(I<J.getTime()||F.getTime()<I)}if(G){this.calendars=[{month:H.getMonth(),year:H.getFullYear()}];if(this._o.mainCalendar==="right"){this.calendars[0].month+=1-this._o.numberOfMonths}}this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=i(this.calendars[0]);for(var F=1;F<this._o.numberOfMonths;F++){this.calendars[F]=i({month:this.calendars[0].month+F,year:this.calendars[0].year})}this.draw()},gotoToday:function(){this.gotoDate(new Date())},gotoMonth:function(F){if(!isNaN(F)){this.calendars[0].month=parseInt(F,10);this.adjustCalendars()}},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(F){if(!isNaN(F)){this.calendars[0].year=parseInt(F,10);this.adjustCalendars()}},setMinDate:function(F){A(F);this._o.minDate=F;this._o.minYear=F.getFullYear();this._o.minMonth=F.getMonth();this.draw()},setMaxDate:function(F){A(F);this._o.maxDate=F;this._o.maxYear=F.getFullYear();this._o.maxMonth=F.getMonth();this.draw()},setStartRange:function(F){this._o.startRange=F},setEndRange:function(F){this._o.endRange=F},draw:function(G){if(!this._v&&!G){return}var F=this._o,M=F.minYear,J=F.maxYear,K=F.minMonth,H=F.maxMonth,I="";if(this._y<=M){this._y=M;if(!isNaN(K)&&this._m<K){this._m=K}}if(this._y>=J){this._y=J;if(!isNaN(H)&&this._m>H){this._m=H}}for(var L=0;L<F.numberOfMonths;L++){I+='<div class="pika-lendar">'+t(this,L,this.calendars[L].year,this.calendars[L].month,this.calendars[0].year)+this.render(this.calendars[L].year,this.calendars[L].month)+"</div>"}this.el.innerHTML=I;if(F.bound){if(F.field.type!=="hidden"){u(function(){F.trigger.focus()},1)}}if(typeof this._o.onDraw==="function"){var N=this;u(function(){N._o.onDraw.call(N)},0)}},adjustPosition:function(){var N,L,G,O,K,J,H,I,M,F;if(this._o.container){return}this.el.style.position="absolute";N=this._o.trigger;L=N;G=this.el.offsetWidth;O=this.el.offsetHeight;K=window.innerWidth||q.documentElement.clientWidth;J=window.innerHeight||q.documentElement.clientHeight;H=window.pageYOffset||q.body.scrollTop||q.documentElement.scrollTop;if(typeof N.getBoundingClientRect==="function"){F=N.getBoundingClientRect();I=F.left+window.pageXOffset;M=F.bottom+window.pageYOffset}else{I=L.offsetLeft;M=L.offsetTop+L.offsetHeight;while((L=L.offsetParent)){I+=L.offsetLeft;M+=L.offsetTop}}if((this._o.reposition&&I+G>K)||(this._o.position.indexOf("right")>-1&&I-G+N.offsetWidth>0)){I=I-G+N.offsetWidth}if((this._o.reposition&&M+O>J+H)||(this._o.position.indexOf("top")>-1&&M-O-N.offsetHeight>0)){M=M-O-N.offsetHeight}this.el.style.left=I+"px";this.el.style.top=M+"px"},render:function(O,W){var R=this._o,H=new Date(),L=c(O,W),Q=new Date(O,W,1).getDay(),Y=[],M=[];A(H);if(R.firstDay>0){Q-=R.firstDay;if(Q<0){Q+=7}}var K=L+Q,J=K;while(J>7){J-=7}K+=7-J;for(var V=0,T=0;V<K;V++){var U=new Date(O,W,1+(V-Q)),N=C(this._d)?r(U,this._d):false,Z=r(U,H),S=V<Q||V>=(L+Q),X=R.startRange&&r(R.startRange,U),I=R.endRange&&r(R.endRange,U),F=R.startRange&&R.endRange&&R.startRange<U&&U<R.endRange,P=(R.minDate&&U<R.minDate)||(R.maxDate&&U>R.maxDate)||(R.disableWeekends&&p(U))||(R.disableDayFn&&R.disableDayFn(U)),G={day:1+(V-Q),month:W,year:O,isSelected:N,isToday:Z,isDisabled:P,isEmpty:S,isStartRange:X,isEndRange:I,isInRange:F};M.push(v(G));if(++T===7){if(R.showWeekNumber){M.unshift(f(V-Q,W,O))}Y.push(e(M,R.isRTL));M=[];T=0}}return o(R,Y)},isVisible:function(){return this._v},show:function(){if(!this._v){n(this.el,"is-hidden");this._v=true;this.draw();if(this._o.bound){s(q,"click",this._onClick);this.adjustPosition()}if(typeof this._o.onOpen==="function"){this._o.onOpen.call(this)}}},hide:function(){var F=this._v;if(F!==false){if(this._o.bound){w(q,"click",this._onClick)}this.el.style.position="static";this.el.style.left="auto";this.el.style.top="auto";m(this.el,"is-hidden");this._v=false;if(F!==undefined&&typeof this._o.onClose==="function"){this._o.onClose.call(this)}}},destroy:function(){this.hide();w(this.el,"mousedown",this._onMouseDown,true);w(this.el,"touchend",this._onMouseDown,true);w(this.el,"change",this._onChange);if(this._o.field){w(this._o.field,"change",this._onInputChange);if(this._o.bound){w(this._o.trigger,"click",this._onInputClick);w(this._o.trigger,"focus",this._onInputFocus);w(this._o.trigger,"blur",this._onInputBlur)}}if(this.el.parentNode){this.el.parentNode.removeChild(this.el)}}};return h}));