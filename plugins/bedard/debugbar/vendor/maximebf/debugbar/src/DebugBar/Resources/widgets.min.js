if(typeof(PhpDebugBar)=="undefined"){var PhpDebugBar={};PhpDebugBar.$=jQuery}(function(g){PhpDebugBar.Widgets={};var e=PhpDebugBar.Widgets.htmlize=function(n){return n.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")};var l=PhpDebugBar.Widgets.renderValue=function(o,n){if(typeof(o)!=="string"){if(n){return e(JSON.stringify(o,undefined,2))}return JSON.stringify(o)}return o};var c=PhpDebugBar.Widgets.highlight=function(n,o){if(typeof(n)==="string"){if(typeof(hljs)==="undefined"){return e(n)}if(o){return hljs.highlight(o,n).value}return hljs.highlightAuto(n).value}if(typeof(hljs)==="object"){n.each(function(p,q){hljs.highlightBlock(q)})}return n};var j=PhpDebugBar.Widgets.createCodeBlock=function(n,p){var o=g("<pre />");g("<code />").text(n).appendTo(o);if(p){o.addClass("language-"+p)}c(o);return o};var d=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-");var k=PhpDebugBar.Widgets.ListWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:d("list"),initialize:function(n){if(!n.itemRenderer){n.itemRenderer=this.itemRenderer}this.set(n)},render:function(){this.bindAttr(["itemRenderer","data"],function(){this.$el.empty();if(!this.has("data")){return}var p=this.get("data");for(var o=0;o<p.length;o++){var n=g("<li />").addClass(d("list-item")).appendTo(this.$el);this.get("itemRenderer")(n,p[o])}})},itemRenderer:function(n,o){n.html(l(o))}});var h=PhpDebugBar.Widgets.KVListWidget=k.extend({tagName:"dl",className:d("kvlist"),render:function(){this.bindAttr(["itemRenderer","data"],function(){this.$el.empty();if(!this.has("data")){return}var n=this;g.each(this.get("data"),function(p,r){var q=g("<dt />").addClass(d("key")).appendTo(n.$el);var o=g("<dd />").addClass(d("value")).appendTo(n.$el);n.get("itemRenderer")(q,o,p,r)})})},itemRenderer:function(p,n,o,q){p.text(o);n.html(e(q))}});var f=PhpDebugBar.Widgets.VariableListWidget=h.extend({className:d("kvlist varlist"),itemRenderer:function(r,n,p,s){g("<span />").attr("title",p).text(p).appendTo(r);var o=s;if(o&&o.length>100){o=o.substr(0,100)+"..."}var q=null;n.text(o).click(function(){if(n.hasClass(d("pretty"))){n.text(o).removeClass(d("pretty"))}else{q=q||j(s);n.addClass(d("pretty")).empty().append(q)}})}});var a=PhpDebugBar.Widgets.IFrameWidget=PhpDebugBar.Widget.extend({tagName:"iframe",className:d("iframe"),render:function(){this.$el.attr({seamless:"seamless",border:"0",width:"100%",height:"100%"});this.bindAttr("data",function(n){this.$el.attr("src",n)})}});var b=PhpDebugBar.Widgets.MessagesWidget=PhpDebugBar.Widget.extend({className:d("messages"),render:function(){var n=this;this.$list=new k({itemRenderer:function(p,r){var o=r.message;if(o.length>100){o=o.substr(0,100)+"..."}var s=g("<span />").addClass(d("value")).text(o).appendTo(p);if(!r.is_string||r.message.length>100){var q=r.message;if(!r.is_string){q=null}p.css("cursor","pointer").click(function(){if(s.hasClass(d("pretty"))){s.text(o).removeClass(d("pretty"))}else{q=q||j(r.message,"php");s.addClass(d("pretty")).empty().append(q)}})}if(r.label){s.addClass(d(r.label));g("<span />").addClass(d("label")).text(r.label).appendTo(p)}if(r.collector){g("<span />").addClass(d("collector")).text(r.collector).appendTo(p)}}});this.$list.$el.appendTo(this.$el);this.$toolbar=g('<div><i class="phpdebugbar-fa phpdebugbar-fa-search"></i></div>').addClass(d("toolbar")).appendTo(this.$el);g('<input type="text" />').on("change",function(){n.set("search",this.value)}).appendTo(this.$toolbar);this.bindAttr("data",function(r){this.set({exclude:[],search:""});this.$toolbar.find(d(".filter")).remove();var q=[],o=this;for(var p=0;p<r.length;p++){if(!r[p].label||g.inArray(r[p].label,q)>-1){continue}q.push(r[p].label);g("<a />").addClass(d("filter")).text(r[p].label).attr("rel",r[p].label).on("click",function(){o.onFilterClick(this)}).appendTo(this.$toolbar)}});this.bindAttr(["exclude","search"],function(){var u=this.get("data"),o=this.get("exclude"),r=this.get("search"),t=false,p=[];if(r&&r===r.toLowerCase()){t=true}for(var q=0;q<u.length;q++){var s=t?u[q].message.toLowerCase():u[q].message;if((!u[q].label||g.inArray(u[q].label,o)===-1)&&(!r||s.indexOf(r)>-1)){p.push(u[q])}}this.$list.set("data",p)})},onFilterClick:function(o){g(o).toggleClass(d("excluded"));var n=[];this.$toolbar.find(d(".filter")+d(".excluded")).each(function(){n.push(this.rel)});this.set("exclude",n)}});var i=PhpDebugBar.Widgets.TimelineWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:d("timeline"),render:function(){this.bindAttr("data",function(r){this.$el.empty();if(r.measures){for(var s=0;s<r.measures.length;s++){var n=r.measures[s];var q=g("<div />").addClass(d("measure")),u=g("<li />"),p=(n.relative_start*100/r.duration).toFixed(2),o=Math.min((n.duration*100/r.duration).toFixed(2),100-p);q.append(g("<span />").addClass(d("value")).css({left:p+"%",width:o+"%"}));q.append(g("<span />").addClass(d("label")).text(n.label+" ("+n.duration_str+")"));if(n.collector){g("<span />").addClass(d("collector")).text(n.collector).appendTo(q)}q.appendTo(u);this.$el.append(u);if(n.params&&!g.isEmptyObject(n.params)){var v=g('<table><tr><th colspan="2">Params</th></tr></table>').addClass(d("params")).appendTo(u);for(var t in n.params){if(typeof n.params[t]!=="function"){v.append('<tr><td class="'+d("name")+'">'+t+'</td><td class="'+d("value")+'"><pre><code>'+n.params[t]+"</code></pre></td></tr>")}}u.css("cursor","pointer").click(function(){var w=g(this).find("table");if(w.is(":visible")){w.hide()}else{w.show()}})}}}})}});var m=PhpDebugBar.Widgets.ExceptionsWidget=PhpDebugBar.Widget.extend({className:d("exceptions"),render:function(){this.$list=new k({itemRenderer:function(n,p){g("<span />").addClass(d("message")).text(p.message).appendTo(n);if(p.file){g("<span />").addClass(d("filename")).text(p.file+"#"+p.line).appendTo(n)}if(p.type){g("<span />").addClass(d("type")).text(p.type).appendTo(n)}if(p.surrounding_lines){var o=j(p.surrounding_lines.join(""),"php").addClass(d("file")).appendTo(n);n.click(function(){if(o.is(":visible")){o.hide()}else{o.show()}})}}});this.$list.$el.appendTo(this.$el);this.bindAttr("data",function(n){this.$list.set("data",n);if(n.length==1){this.$list.$el.children().first().find(d(".file")).show()}})}})})(PhpDebugBar.$);