/*! Sortable 1.0.1 - MIT | git://github.com/rubaxa/Sortable.git */
!function(b){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=b():"undefined"!=typeof Package?Sortable=b():window.Sortable=b()}(function(){function aG(f,c){this.el=f,this.options=c=c||{};var l={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(f.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(e,d){e.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1};for(var k in l){!(k in c)&&(c[k]=l[k])}var j=c.group;j&&"object"==typeof j||(j=c.group={name:j}),["pull","put"].forEach(function(b){b in j||(j[b]=!0)}),U.forEach(function(a){c[a]=aE(this,c[a]||T),aB(f,a.substr(2).toLowerCase(),c[a])},this),f[ab]=j.name+" "+(j.put.join?j.put.join(" "):"");for(var i in this){"_"===i.charAt(0)&&(this[i]=aE(this,this[i]))}aB(f,"mousedown",this._onTapStart),aB(f,"touchstart",this._onTapStart),X&&aB(f,"selectstart",this._onTapStart),aB(f,"dragover",this._onDragOver),aB(f,"dragenter",this._onDragOver),Q.push(this._onDragOver),c.store&&this.sort(c.store.get(this))}function aF(b){an&&an.state!==b&&(ay(an,"display",b?"none":""),!b&&an.state&&am.insertBefore(an,ap),an.state=b)}function aE(e,d){var f=R.call(arguments,2);return d.bind?d.bind.apply(d,[e].concat(f)):function(){return d.apply(e,f.concat(R.call(arguments)))}}function aD(g,f,j){if(g){j=j||Z,f=f.split(".");var i=f.shift().toUpperCase(),h=new RegExp("\\s("+f.join("|")+")\\s","g");do{if(">*"===i&&g.parentNode===j||(""===i||g.nodeName.toUpperCase()==i)&&(!f.length||((" "+g.className+" ").match(h)||[]).length==f.length)){return g}}while(g!==j&&(g=g.parentNode))}return null}function aC(b){b.dataTransfer.dropEffect="move",b.preventDefault()}function aB(e,d,f){e.addEventListener(d,f,!1)}function aA(e,d,f){e.removeEventListener(d,f,!1)}function az(f,e,h){if(f){if(f.classList){f.classList[h?"add":"remove"](e)}else{var g=(" "+f.className+" ").replace(/\s+/g," ").replace(" "+e+" ","");f.className=g+(h?" "+e:"")}}}function ay(f,e,h){var g=f&&f.style;if(g){if(void 0===h){return Z.defaultView&&Z.defaultView.getComputedStyle?h=Z.defaultView.getComputedStyle(f,""):f.currentStyle&&(h=f.currentStyle),void 0===e?h:h[e]}e in g||(e="-webkit-"+e),g[e]=h+("string"==typeof h?"":"px")}}function ax(h,g,l){if(h){var k=h.getElementsByTagName(g),j=0,i=k.length;if(l){for(;i>j;j++){l(k[j],j)}}return k}return[]}function aw(b){b.draggable=!1}function av(){W=!1}function au(f,e){var h=f.lastElementChild,g=h.getBoundingClientRect();return e.clientY-(g.top+g.height)>5&&h}function at(f){for(var e=f.tagName+f.className+f.src+f.href+f.textContent,h=e.length,g=0;h--;){g+=e.charCodeAt(h)}return g.toString(36)}function ar(d){for(var c=0;d&&(d=d.previousElementSibling)&&"TEMPLATE"!==d.nodeName.toUpperCase();){c++}return c}function aq(f,e){var h,g;return function(){void 0===h&&(h=arguments,g=this,setTimeout(function(){1===h.length?f.call(g,h[0]):f.apply(g,h),h=void 0},e))}}var ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac={},ab="Sortable"+(new Date).getTime(),aa=window,Z=aa.document,Y=aa.parseInt,X=!!Z.createElement("div").dragDrop,W=!1,V=function(i,h,n,m,l,k){var j=Z.createEvent("Event");j.initEvent(h,!0,!0),j.item=n||i,j.from=m||i,j.clone=an,j.oldIndex=l,j.newIndex=k,i.dispatchEvent(j)},U="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),T=function(){},S=Math.abs,R=[].slice,Q=[];return aG.prototype={constructor:aG,_dragStarted:function(){az(ap,this.options.ghostClass,!0),aG.active=this,V(am,"start",ap,am,ah)},_onTapStart:function(r){var q=r.type,p=r.touches&&r.touches[0],o=(p||r).target,n=o,k=this.options,j=this.el,f=k.filter;if(!("mousedown"===q&&0!==r.button||k.disabled)){if(k.handle&&(o=aD(o,k.handle,j)),o=aD(o,k.draggable,j),ah=ar(o),"function"==typeof f){if(f.call(this,r,o,this)){return V(n,"filter",o,j,ah),void r.preventDefault()}}else{if(f&&(f=f.split(",").some(function(b){return b=aD(n,b.trim(),j),b?(V(b,"filter",o,j,ah),!0):void 0}))){return void r.preventDefault()}}if(o&&!ap&&o.parentNode===j){"selectstart"===q&&o.dragDrop(),ae=r,am=this.el,ap=o,ak=ap.nextSibling,af=this.options.group,ap.draggable=!0,k.ignore.split(",").forEach(function(b){ax(o,b.trim(),aw)}),p&&(ae={target:o,clientX:p.clientX,clientY:p.clientY},this._onDragStart(ae,!0),r.preventDefault()),aB(Z,"mouseup",this._onDrop),aB(Z,"touchend",this._onDrop),aB(Z,"touchcancel",this._onDrop),aB(ap,"dragend",this),aB(am,"dragstart",this._onDragStart),aB(Z,"dragover",this);try{Z.selection?Z.selection.empty():window.getSelection().removeAllRanges()}catch(d){}}}},_emulateDragOver:function(){if(ad){ay(ao,"display","none");var f=Z.elementFromPoint(ad.clientX,ad.clientY),e=f,h=this.options.group.name,g=Q.length;if(e){do{if((" "+e[ab]+" ").indexOf(h)>-1){for(;g--;){Q[g]({clientX:ad.clientX,clientY:ad.clientY,target:f,rootEl:e})}break}f=e}while(e=e.parentNode)}ay(ao,"display","")}},_onTouchMove:function(g){if(ae){var f=g.touches[0],j=f.clientX-ae.clientX,i=f.clientY-ae.clientY,h="translate3d("+j+"px,"+i+"px,0)";ad=f,ay(ao,"webkitTransform",h),ay(ao,"mozTransform",h),ay(ao,"msTransform",h),ay(ao,"transform",h),this._onDrag(f),g.preventDefault()}},_onDragStart:function(i,f){var n=i.dataTransfer,m=this.options;if(this._offUpEvents(),"clone"==af.pull&&(an=ap.cloneNode(!0),ay(an,"display","none"),am.insertBefore(an,ap)),f){var l,k=ap.getBoundingClientRect(),j=ay(ap);ao=ap.cloneNode(!0),ay(ao,"top",k.top-Y(j.marginTop,10)),ay(ao,"left",k.left-Y(j.marginLeft,10)),ay(ao,"width",k.width),ay(ao,"height",k.height),ay(ao,"opacity","0.8"),ay(ao,"position","fixed"),ay(ao,"zIndex","100000"),am.appendChild(ao),l=ao.getBoundingClientRect(),ay(ao,"width",2*k.width-l.width),ay(ao,"height",2*k.height-l.height),aB(Z,"touchmove",this._onTouchMove),aB(Z,"touchend",this._onDrop),aB(Z,"touchcancel",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else{n&&(n.effectAllowed="move",m.setData&&m.setData.call(this,n,ap)),aB(Z,"drop",this)}if(al=m.scroll,al===!0){al=am;do{if(al.offsetWidth<al.scrollWidth||al.offsetHeight<al.scrollHeight){break}}while(al=al.parentNode)}setTimeout(this._dragStarted,0)},_onDrag:aq(function(x){if(am&&this.options.scroll){var w,v,u=this.options,t=u.scrollSensitivity,s=u.scrollSpeed,r=x.clientX,q=x.clientY,p=window.innerWidth,o=window.innerHeight,n=(t>=p-r)-(t>=r),m=(t>=o-q)-(t>=q);n||m?w=aa:al&&(w=al,v=al.getBoundingClientRect(),n=(S(v.right-r)<=t)-(S(v.left-r)<=t),m=(S(v.bottom-q)<=t)-(S(v.top-q)<=t)),(ac.vx!==n||ac.vy!==m||ac.el!==w)&&(ac.el=w,ac.vx=n,ac.vy=m,clearInterval(ac.pid),w&&(ac.pid=setInterval(function(){w===aa?aa.scrollTo(aa.scrollX+n*s,aa.scrollY+m*s):(m&&(w.scrollTop+=m*s),n&&(w.scrollLeft+=n*s))},24)))}},30),_onDragOver:function(L){var K,J,I,H=this.el,E=this.options,A=E.group,x=A.put,w=af===A,v=E.sort;if(void 0!==L.preventDefault&&(L.preventDefault(),!E.dragoverBubble&&L.stopPropagation()),!W&&af&&(w?v||(I=!am.contains(ap)):af.pull&&x&&(af.name===A.name||x.indexOf&&~x.indexOf(af.name)))&&(void 0===L.rootEl||L.rootEl===this.el)){if(K=aD(L.target,E.draggable,H),J=ap.getBoundingClientRect(),I){return aF(!0),void (an||ak?am.insertBefore(ap,an||ak):v||am.appendChild(ap))}if(0===H.children.length||H.children[0]===ao||H===L.target&&(K=au(H,L))){if(K){if(K.animated){return}m=K.getBoundingClientRect()}aF(w),H.appendChild(ap),this._animate(J,ap),K&&this._animate(m,K)}else{if(K&&!K.animated&&K!==ap&&void 0!==K.parentNode[ab]){aj!==K&&(aj=K,ai=ay(K));var t,m=K.getBoundingClientRect(),d=m.right-m.left,b=m.bottom-m.top,s=/left|right|inline/.test(ai.cssFloat+ai.display),r=K.offsetWidth>ap.offsetWidth,q=K.offsetHeight>ap.offsetHeight,l=(s?(L.clientX-m.left)/d:(L.clientY-m.top)/b)>0.5,i=K.nextElementSibling;W=!0,setTimeout(av,30),aF(w),t=s?K.previousElementSibling===ap&&!r||l&&r:i!==ap&&!q||l&&q,t&&!i?H.appendChild(ap):K.parentNode.insertBefore(ap,t?i:K),this._animate(J,ap),this._animate(m,K)}}}},_animate:function(f,e){var h=this.options.animation;if(h){var g=e.getBoundingClientRect();ay(e,"transition","none"),ay(e,"transform","translate3d("+(f.left-g.left)+"px,"+(f.top-g.top)+"px,0)"),e.offsetWidth,ay(e,"transition","all "+h+"ms"),ay(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){ay(e,"transition",""),e.animated=!1},h)}},_offUpEvents:function(){aA(Z,"mouseup",this._onDrop),aA(Z,"touchmove",this._onTouchMove),aA(Z,"touchend",this._onDrop),aA(Z,"touchcancel",this._onDrop)},_onDrop:function(a){var f=this.el,e=this.options;clearInterval(this._loopId),clearInterval(ac.pid),aA(Z,"drop",this),aA(Z,"dragover",this),aA(f,"dragstart",this._onDragStart),this._offUpEvents(),a&&(a.preventDefault(),!e.dropBubble&&a.stopPropagation(),ao&&ao.parentNode.removeChild(ao),ap&&(aA(ap,"dragend",this),aw(ap),az(ap,this.options.ghostClass,!1),am!==ap.parentNode?(ag=ar(ap),V(ap.parentNode,"sort",ap,am,ah,ag),V(am,"sort",ap,am,ah,ag),V(ap,"add",ap,am,ah,ag),V(am,"remove",ap,am,ah,ag)):(an&&an.parentNode.removeChild(an),ap.nextSibling!==ak&&(ag=ar(ap),V(am,"update",ap,am,ah,ag),V(am,"sort",ap,am,ah,ag))),aG.active&&V(am,"end",ap,am,ah,ag)),am=ap=ao=ak=an=ae=ad=aj=ai=af=aG.active=null,this.save())},handleEvent:function(d){var c=d.type;"dragover"===c?(this._onDrag(d),aC(d)):("drop"===c||"dragend"===c)&&this._onDrop(d)},toArray:function(){for(var g,d=[],j=this.el.children,i=0,h=j.length;h>i;i++){g=j[i],aD(g,this.options.draggable,this.el)&&d.push(g.getAttribute("data-id")||at(g))}return d},sort:function(e){var d={},f=this.el;this.toArray().forEach(function(b,g){var c=f.children[g];aD(c,this.options.draggable,f)&&(d[b]=c)},this),e.forEach(function(b){d[b]&&(f.removeChild(d[b]),f.appendChild(d[b]))})},save:function(){var b=this.options.store;b&&b.set(this)},closest:function(d,c){return aD(d,c||this.options.draggable,this.el)},option:function(e,d){var f=this.options;return void 0===d?f[e]:void (f[e]=d)},destroy:function(){var d=this.el,c=this.options;U.forEach(function(a){aA(d,a.substr(2).toLowerCase(),c[a])}),aA(d,"mousedown",this._onTapStart),aA(d,"touchstart",this._onTapStart),aA(d,"selectstart",this._onTapStart),aA(d,"dragover",this._onDragOver),aA(d,"dragenter",this._onDragOver),Array.prototype.forEach.call(d.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")}),Q.splice(Q.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},aG.utils={on:aB,off:aA,css:ay,find:ax,bind:aE,is:function(d,c){return !!aD(d,c,d)},throttle:aq,closest:aD,toggleClass:az,dispatchEvent:V,index:ar},aG.version="1.0.1",aG.create=function(a,d){return new aG(a,d)},aG});