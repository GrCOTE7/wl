+function(c){if(c.oc.builder===undefined){c.oc.builder={}}if(c.oc.builder.entityControllers===undefined){c.oc.builder.entityControllers={}}var b=c.oc.builder.entityControllers.base,a=b.prototype;var d=function(e){b.call(this,"controller",e)};d.prototype=Object.create(a);d.prototype.constructor=d;d.prototype.cmdCreateController=function(g){var f=c(g.currentTarget),e=this,j=f.data("pluginCode"),h=f.find('input[name="behaviors[]"]:checked').length,i=null;if(h){i=this.indexController.openOrLoadMasterTab(f,"onControllerCreate",this.makeTabId(j+"-new-controller"),{})}else{i=f.request("onControllerCreate")}i.done(function(k){f.trigger("close.oc.popup");e.updateDataRegistry(k)}).always(c.oc.builder.indexController.hideStripeIndicatorProxy)};d.prototype.cmdOpenController=function(f){var e=c(f.currentTarget).data("id"),g=c(f.currentTarget).data("pluginCode");this.indexController.openOrLoadMasterTab(c(f.target),"onControllerOpen",this.makeTabId(g+"-"+e),{controller:e})};d.prototype.cmdSaveController=function(h){var e=c(h.currentTarget),f=e.closest("form"),g=f.find(".inspector-container");if(!c.oc.inspector.manager.applyValuesFromContainer(g)){return}e.request("onControllerSave").done(this.proxy(this.saveControllerDone))};d.prototype.saveControllerDone=function(e){if(e.builderResponseData===undefined){throw new Error("Invalid response data")}var f=this.getMasterTabsActivePane();this.getIndexController().unchangeTab(f)};d.prototype.updateDataRegistry=function(f){if(f.builderResponseData.registryData!==undefined){var e=f.builderResponseData.registryData;c.oc.builder.dataRegistry.set(e.pluginCode,"controller-urls",null,e.urls)}};d.prototype.getControllerList=function(){return c("#layout-side-panel form[data-content-id=controller] [data-control=filelist]")};c.oc.builder.entityControllers.controller=d}(window.jQuery);