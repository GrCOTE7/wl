+function(d){if(d.oc.builder===undefined){d.oc.builder={}}if(d.oc.builder.entityControllers===undefined){d.oc.builder.entityControllers={}}var b=d.oc.builder.entityControllers.base,a=b.prototype;var c=function(e){b.call(this,"plugin",e);this.popupZIndex=5050};c.prototype=Object.create(a);c.prototype.constructor=c;c.prototype.cmdMakePluginActive=function(g){var e=d(g.currentTarget),f=e.data("pluginCode");this.makePluginActive(f)};c.prototype.cmdCreatePlugin=function(f){var e=d(f.currentTarget);e.one("shown.oc.popup",this.proxy(this.onPluginPopupShown));e.popup({handler:"onPluginLoadPopup",zIndex:this.popupZIndex})};c.prototype.cmdApplyPluginSettings=function(g){var f=d(g.currentTarget),e=this;d.oc.stripeLoadIndicator.show();f.request("onPluginSave").always(d.oc.builder.indexController.hideStripeIndicatorProxy).done(function(h){f.trigger("close.oc.popup");e.applyPluginSettingsDone(h)})};c.prototype.cmdEditPluginSettings=function(f){var e=d(f.currentTarget);e.one("shown.oc.popup",this.proxy(this.onPluginPopupShown));e.popup({handler:"onPluginLoadPopup",zIndex:this.popupZIndex,extraData:{pluginCode:e.data("pluginCode")}})};c.prototype.onPluginPopupShown=function(g,f,e){d(e).find("input[name=name]").focus()};c.prototype.applyPluginSettingsDone=function(e){if(e.responseData!==undefined&&e.responseData.isNewPlugin!==undefined){this.makePluginActive(e.responseData.pluginCode,true)}};c.prototype.makePluginActive=function(g,f){var e=d("#builder-plugin-selector-panel form").first();d.oc.stripeLoadIndicator.show();e.request("onPluginSetActive",{data:{pluginCode:g,updatePluginList:(f?1:0)}}).always(d.oc.builder.indexController.hideStripeIndicatorProxy).done(this.proxy(this.makePluginActiveDone))};c.prototype.makePluginActiveDone=function(e){var f=e.responseData.pluginCode;d("#builder-plugin-selector-panel [data-control=filelist]").fileList("markActive",f)};d.oc.builder.entityControllers.plugin=c}(window.jQuery);