+function(d){if(d.oc.table===undefined){throw new Error("The $.oc.table namespace is not defined. Make sure that the table.js script is loaded.")}if(d.oc.table.processor===undefined){throw new Error("The $.oc.table.processor namespace is not defined. Make sure that the table.processor.base.js script is loaded.")}var c=d.oc.table.processor.string,b=c.prototype;var a=function(g,f,e){this.localizationInput=null;this.popupDisplayed=false;c.call(this,g,f,e)};a.prototype=Object.create(b);a.prototype.constructor=a;a.prototype.dispose=function(){this.removeLocalizationInput();b.dispose.call(this)};a.prototype.onUnfocus=function(){if(!this.activeCell||this.popupDisplayed){return}this.removeLocalizationInput();b.onUnfocus.call(this)};a.prototype.onBeforePopupShow=function(){this.popupDisplayed=true};a.prototype.onAfterPopupHide=function(){this.popupDisplayed=false};a.prototype.renderCell=function(e,f){b.renderCell.call(this,e,f)};a.prototype.buildEditor=function(e,g,f){b.buildEditor.call(this,e,g,f);d.oc.foundation.element.addClass(g,"autocomplete-container");this.buildLocalizationEditor()};a.prototype.buildLocalizationEditor=function(){var e=this.getInput();this.localizationInput=new d.oc.builder.localizationInput(e,d(e),{plugin:this.getPluginCode(e),beforePopupShowCallback:d.proxy(this.onBeforePopupShow,this),afterPopupHideCallback:d.proxy(this.onAfterPopupHide,this),autocompleteOptions:{menu:'<ul class="autocomplete dropdown-menu table-widget-autocomplete localization"></ul>',bodyContainer:true}})};a.prototype.getInput=function(){if(!this.activeCell){return null}return this.activeCell.querySelector(".string-input")};a.prototype.getPluginCode=function(f){var e=d(f).closest("form"),g=e.find("input[name=plugin_code]");if(!g.length){throw new Error('The input "plugin_code" should be defined in the form in order to use the localization table processor.')}return g.val()};a.prototype.removeLocalizationInput=function(){if(!this.localizationInput){return}this.localizationInput.dispose();this.localizationInput=null};d.oc.table.processor.builderLocalization=a}(window.jQuery);