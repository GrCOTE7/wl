+function(g){if(g.oc.builder===undefined){g.oc.builder={}}if(g.oc.builder.formbuilder===undefined){g.oc.builder.formbuilder={}}function d(p){for(var o=0,n=p.children.length;o<n;o++){var q=p.children[o];if(q.tagName==="INPUT"&&q.hasAttribute("data-inspector-values")){return g.parseJSON(q.value)}}return false}function c(n){delete n["oc.fieldName"];if(String(n["oc.comment"]).length>0&&n["oc.commentPosition"]=="above"){n.commentAbove=n["oc.comment"];if(n.comment!==undefined){delete n.comment}delete n["oc.comment"];delete n["oc.commentPosition"]}if(String(n["oc.comment"]).length>0&&n["oc.commentPosition"]=="below"){n.comment=n["oc.comment"];if(n.comentAbove!==undefined){delete n.comentAbove}delete n["oc.comment"];delete n["oc.commentPosition"]}if(n["oc.comment"]!==undefined){if(String(n["oc.comment"]).length>0){n.comment=n["oc.comment"]}delete n["oc.comment"]}}function b(t){var r=t.children,o={};for(var q=0,n=r.length;q<n;q++){var u=r[q];if(u.tagName!=="DIV"||!u.hasAttribute("data-control-container")||!u.hasAttribute("data-container-name")){continue}var s=String(u.getAttribute("data-container-name")),p=e(u);o[s]=p}return o}function i(s,p){var o=s.children,w={};for(var q=0,r=o.length;q<r;q++){var n=o[q];if(!n.hasAttribute("data-control-type")){continue}var u=d(n);if(u===null){throw new Error("Property values are not found for a control list item.")}if(u["oc.fieldName"]===undefined){throw new Error("Field name property is not found for a control.")}var v=u["oc.fieldName"];u.type=n.getAttribute("data-control-type");c(u);if(p!==undefined){u=g.extend(u,p)}if(w[v]!==undefined){throw new Error("Duplicate field name: "+v)}var t=b(n);if(!g.isEmptyObject(t)){u=g.extend(u,t)}w[v]=u}return w}function f(s){var q=s.querySelectorAll("[data-control-list]"),v=[],o=null;for(var p=0,r=q.length;p<r;p++){var u=q[p],t=String(u.getAttribute("data-control-list")),n=j(u);if(n===s){v.push(u)}}return v}function j(n){var o=n;while(o){if(o.hasAttribute("data-control-list-container")||o.hasAttribute("data-control-container")){return o}o=o.parentNode}return null}function k(y,n){var t=String(n.getAttribute("data-control-list-container-type"));if(t.length===0){throw new Error("Control list container type is not specified")}if(t!=="tabs"){throw new Error("Unknown control list container type: "+t)}var u=f(n),w=g.oc.builder.formbuilder.tabManager.getGlobalTabsProperties(n);for(var s=0,v=u.length;s<v;s++){var x=u[s],r=g.oc.builder.formbuilder.tabManager.getElementTabTitle(x),q={tab:r},p=i(x,q),o=String(x.getAttribute("data-control-list"));if(!g.isEmptyObject(p)||!g.isEmptyObject(p)){if(y[o]===undefined){y[o]={}}y[o]=g.extend(y[o],w);m(y,p,o)}}}function l(o){for(var n in o){return true}return false}function m(n,o,p){if(p.length>0){if(l(o)){if(n[p].fields===undefined){n[p].fields={}}n[p].fields=g.extend(n[p].fields,o)}}else{if(l(o)){if(n.fields===undefined){n.fields={}}n.fields=g.extend(n.fields,o)}}}function e(n){var p=n.children,w={};for(var r=0,u=p.length;r<u;r++){var s=p[r],t=s.hasAttribute("data-control-list-container");if(s.tagName!=="UL"&&!t){throw new Error("Control container can contain only UL elements and control list containers.")}if(t){k(w,s);continue}else{if(!s.hasAttribute("data-control-list")){throw new Error("Control container can contain only UL elements with data-control-list attribute or control list containers.")}}var v=s,q=i(v),o=String(v.getAttribute("data-control-list"));m(w,q,o)}return w}var h=null,a={};a.convert=function(o){h=null;try{return JSON.stringify(e(o))}catch(n){h=n.message;return false}};a.getLastError=function(){return h};a.getAllControlNames=function(s){var o=s.querySelectorAll("ul[data-control-list] > li.control"),n=[];for(var r=o.length-1;r>=0;r--){var q=d(o[r]);if(typeof q!=="object"){continue}if(q["oc.fieldName"]===undefined){continue}var p=q["oc.fieldName"];if(n.indexOf(p)===-1){n.push(p)}}n.sort();return n};g.oc.builder.formbuilder.domToPropertyJson=a}(window.jQuery);