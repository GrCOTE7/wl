+function(b){var c=function(e,d){this.options=d;this.$el=b(e);this.init()};c.DEFAULTS={};c.prototype.init=function(){this.activeAction=null;this.$primaryBtn=b("[data-primary-button]",this.$el);this.$toggleBtn=b(".dropdown-toggle",this.$el);this.$dropdownMenu=b(".dropdown-menu",this.$el);this.baseCss=this.$primaryBtn.attr("class");this.$primaryBtn.on("click",b.proxy(this.onClickPrimaryButton,this));this.$dropdownMenu.on("click","li > a",b.proxy(this.onClickMenuItem,this));this.setActiveItem(b("li > a:first",this.$dropdownMenu))};c.prototype.onClickPrimaryButton=function(){if(!this.activeAction){throw new Error("Bulk action not found")}this.$primaryBtn.data("request-data",{checked:b(".control-list").listWidget("getChecked"),action:this.activeAction})};c.prototype.onClickMenuItem=function(d){this.setActiveItem(b(d.target));this.$primaryBtn.click()};c.prototype.setActiveItem=function(d){this.$toggleBtn.blur();this.activeAction=d.data("action");this.$primaryBtn.text(d.text());this.$primaryBtn.attr("class",this.baseCss);this.$primaryBtn.addClass(d.attr("class"));this.$primaryBtn.data("request-confirm",d.data("confirm"))};var a=b.fn.bulkActions;b.fn.bulkActions=function(f){var e=Array.prototype.slice.call(arguments,1),d;this.each(function(){var i=b(this);var h=i.data("oc.bulkactions");var g=b.extend({},c.DEFAULTS,i.data(),typeof f=="object"&&f);if(!h){i.data("oc.bulkactions",(h=new c(this,g)))}if(typeof f=="string"){d=h[f].apply(h,e)}if(typeof d!="undefined"){return false}});return d?d:this};b.fn.bulkActions.Constructor=c;b.fn.bulkActions.noConflict=function(){b.fn.bulkActions=a;return this};b(document).render(function(){b('[data-control="bulk-actions"]').bulkActions()})}(window.jQuery);