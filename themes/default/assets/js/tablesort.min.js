!function(a){a.tablesort=function(d,c){var b=this;this.$table=d,this.$thead=this.$table.find("thead"),this.settings=a.extend({},a.tablesort.defaults,c),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){b.sort(a(this))}),this.index=null,this.$th=null,this.direction=null},a.tablesort.prototype={sort:function(p,v){var k=new Date,g=this,f=this.$table,j=f.find("tbody").length>0?f.find("tbody"):f,u=j.find("tr").has("td, th"),b=u.find(":nth-child("+(p.index()+1)+")").filter("td, th"),q=p.data().sortBy,m=[],t=b.map(function(d,c){return q?"function"==typeof q?q(a(p),a(c),g):q:null!=a(this).data().sortValue?a(this).data().sortValue:a(this).text()});0!==t.length&&(this.index!==p.index()?(this.direction="asc",this.index=p.index()):"asc"!==v&&"desc"!==v?this.direction="asc"===this.direction?"desc":"asc":this.direction=v,v="asc"==this.direction?1:-1,g.$table.trigger("tablesort:start",[g]),g.log("Sorting by "+this.index+" "+this.direction),g.$table.css("display"),setTimeout(function(){g.$sortCells.removeClass(g.settings.asc+" "+g.settings.desc);for(var e=0,c=t.length;e<c;e++){m.push({index:e,cell:b[e],row:u[e],value:t[e]})}m.sort(function(d,h){return g.settings.compare(d.value,h.value)*v}),a.each(m,function(d,h){j.append(h.row)}),p.addClass(g.settings[g.direction]),g.log("Sort finished in "+((new Date).getTime()-k.getTime())+"ms"),g.$table.trigger("tablesort:complete",[g]),g.$table.css("display")},t.length>2000?200:10))},log:function(b){(a.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+b)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},a.tablesort.DEBUG=!1,a.tablesort.defaults={debug:a.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(b,c){return b>c?1:b<c?-1:0}},a.fn.tablesort=function(d){var c,b;return this.each(function(){c=a(this),b=c.data("tablesort"),b&&b.destroy(),c.data("tablesort",new a.tablesort(c,d))})}}(window.Zepto||window.jQuery);