title = "Films"
url = "/films/:page?"
layout = "default"
is_hidden = 0

==
<?php

use Grcote7\Movies\Models\Movie;

function onStart(){
    $this['movies'] = Movie::orderBy('year', 'desc')->paginate(3);
    $this['name']= Input::get('name');
    //dd($this['name']);
    $this['movies'] = Movie::where('name','like',$this['name'])->get();
}

?>
==
<div class="container">

    <h2>Films</h2>

    <ul>
        {% for movie in movies %}
        <li>
            <h3>
                <a href="/films/film/{{movie.slug}}">
                    {{ movie.name}} - {{movie.year}}
                </a>
            </h3>
            <p>{{ html_limit(movie.description,90)|raw }}</p>
        </li>
        {% else %}
        <li class="no-data">Pas de films trouv√©s</li>
        {% endfor %}
    </ul>

    <div>
        {{movies.render|raw}}
    </div>

</div>