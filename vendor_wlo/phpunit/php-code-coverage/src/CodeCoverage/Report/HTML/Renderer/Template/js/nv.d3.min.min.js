!function(){var b={};b.dev=!1,b.tooltip=b.tooltip||{},b.utils=b.utils||{},b.models=b.models||{},b.charts={},b.logs={},b.dom={},b.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(g){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var f=Array.prototype.slice.call(arguments,1),j=this,i=function(){},h=function(){return j.apply(this instanceof i&&g?this:g,f.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,h.prototype=new i,h}),b.dev&&(b.dispatch.on("render_start",function(){b.logs.startTime=+new Date}),b.dispatch.on("render_end",function(){b.logs.endTime=+new Date,b.logs.totalTime=b.logs.endTime-b.logs.startTime,b.log("total",b.logs.totalTime)})),b.log=function(){if(b.dev&&window.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{if(b.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var a=Function.prototype.bind.call(console.log,console);a.apply(console,arguments)}}return arguments[arguments.length-1]},b.deprecated=function(d,c){console&&console.warn&&console.warn("nvd3 warning: `"+d+"` has been deprecated. ",c||"")},b.render=function(a){a=a||1,b.render.active=!0,b.dispatch.render_start();var d=function(){for(var h,g,c=0;a>c&&(g=b.render.queue[c]);c++){h=g.generate(),typeof g.callback==typeof Function&&g.callback(h)}b.render.queue.splice(0,c),b.render.queue.length?setTimeout(d):(b.dispatch.render_end(),b.render.active=!1)};setTimeout(d)},b.render.active=!1,b.render.queue=[],b.addGraph=function(a){typeof arguments[0]==typeof Function&&(a={generate:arguments[0],callback:arguments[1]}),b.render.queue.push(a),b.render.active||b.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=b),"undefined"!=typeof window&&(window.nv=b),b.dom.write=function(c){return void 0!==window.fastdom?fastdom.write(c):c()},b.dom.read=function(c){return void 0!==window.fastdom?fastdom.read(c):c()},b.interactiveGuideline=function(){function t(c){c.each(function(e){function d(){var u=d3.mouse(this),y=u[0],x=u[1],w=!0,v=!1;if(a&&(y=d3.event.offsetX,x=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(w=!1),d3.event.target.className.baseVal.match("nv-legend")&&(v=!0)),w&&(y-=p.left,x-=p.top),0>y||0>x||y>i||x>h||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||v){if(a&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(s.nvPointerEventsClass))){return}return n.elementMouseout({mouseX:y,mouseY:x}),t.renderGuideLine(null),void s.hidden(!0)}s.hidden(!1);var k=o.invert(y);n.elementMousemove({mouseX:y,mouseY:x,pointXValue:k}),"dblclick"===d3.event.type&&n.elementDblclick({mouseX:y,mouseY:x,pointXValue:k}),"click"===d3.event.type&&n.elementClick({mouseX:y,mouseY:x,pointXValue:k})}var j=d3.select(this),i=r||960,h=q||400,g=j.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([e]),f=g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");f.append("g").attr("class","nv-interactiveGuideLine"),l&&(l.on("touchmove",d).on("mousemove",d,!0).on("mouseout",d,!0).on("dblclick",d).on("click",d),t.guideLine=null,t.renderGuideLine=function(k){m&&(t.guideLine&&t.guideLine.attr("x1")===k||b.dom.write(function(){var u=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=k?[b.utils.NaNtoZero(k)]:[],String);u.enter().append("line").attr("class","nv-guideline").attr("x1",function(v){return v}).attr("x2",function(v){return v}).attr("y1",h).attr("y2",0),u.exit().remove()}))})})}var s=b.models.tooltip();s.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var r=null,q=null,p={left:0,top:0},o=d3.scale.linear(),n=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),m=!0,l=null,a="ActiveXObject" in window;return t.dispatch=n,t.tooltip=s,t.margin=function(c){return arguments.length?(p.top="undefined"!=typeof c.top?c.top:p.top,p.left="undefined"!=typeof c.left?c.left:p.left,t):p},t.width=function(c){return arguments.length?(r=c,t):r},t.height=function(c){return arguments.length?(q=c,t):q},t.xScale=function(c){return arguments.length?(o=c,t):o},t.showGuideLine=function(c){return arguments.length?(m=c,t):m},t.svgContainer=function(c){return arguments.length?(l=c,t):l},t},b.interactiveBisect=function(t,s,r){if(!(t instanceof Array)){return null}var q;q="function"!=typeof r?function(c){return c.x}:r;var p=function(d,c){return q(d)-c},o=d3.bisector(p).left,n=d3.max([0,o(t,s)-1]),m=q(t[n]);if("undefined"==typeof m&&(m=n),m===s){return n}var l=d3.min([n+1,t.length-1]),k=q(t[l]);return"undefined"==typeof k&&(k=l),Math.abs(k-s)>=Math.abs(m-s)?n:l},b.nearestValueIndex=function(g,f,j){var i=1/0,h=null;return g.forEach(function(c,e){var d=Math.abs(f-c);null!=c&&i>=d&&j>d&&(i=d,h=e)}),h},function(){b.models.tooltip=function(){function ad(){if(U){var e=d3.select(U);"svg"!==e.node().tagName&&(e=e.select("svg"));var d=e.node()?e.attr("viewBox"):null;if(d){d=d.split(" ");var f=parseInt(e.style("width"),10)/d[2];P.left=P.left*f,P.top=P.top*f}}}function ac(){if(!R){var c;c=U?U:document.body,R=d3.select(c).append("div").attr("class","nvtooltip "+(V?V:"xy-tooltip")).attr("id",G),R.style("top",0).style("left",0),R.style("opacity",0),R.selectAll("div, table, td, tr").classed(F,!0),R.classed(F,!0),Q=R.node()}}function ab(){if(L&&M(aa)){ad();var d=P.left,c=null!==W?W:P.top;return b.dom.write(function(){ac();var e=O(aa);e&&(Q.innerHTML=e),U&&H?b.dom.read(function(){var g=U.getElementsByTagName("svg")[0],f={left:0,top:0};if(g){var l=g.getBoundingClientRect(),k=U.getBoundingClientRect(),j=l.top;if(0>j){var h=U.getBoundingClientRect();j=Math.abs(j)>h.height?0:j}f.top=Math.abs(j-k.top),f.left=Math.abs(l.left-k.left)}d+=U.offsetLeft+f.left-2*U.scrollLeft,c+=U.offsetTop+f.top-2*U.scrollTop,X&&X>0&&(c=Math.floor(c/X)*X),K([d,c])}):K([d,c])}),ab}}var aa=null,Z="w",Y=25,X=0,W=null,V=null,U=null,T=!0,S=400,R=null,Q=null,P={left:null,top:null},N={left:0,top:0},L=!0,J=100,I=!0,H=!1,G="nvtooltip-"+Math.floor(100000*Math.random()),F="nv-pointer-events-none",E=function(c){return c},D=function(c){return c},a=function(c){return c},O=function(h){if(null===h){return""}var g=d3.select(document.createElement("table"));if(I){var l=g.selectAll("thead").data([h]).enter().append("thead");l.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(D(h.value))}var k=g.selectAll("tbody").data([h]).enter().append("tbody"),j=k.selectAll("tr").data(function(c){return c.series}).enter().append("tr").classed("highlight",function(c){return c.highlight});j.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(c){return c.color}),j.append("td").classed("key",!0).html(function(d,c){return a(d.key,c)}),j.append("td").classed("value",!0).html(function(d,c){return E(d.value,c)}),j.selectAll("td").each(function(e){if(e.highlight){var d=d3.scale.linear().domain([0,1]).range(["#fff",e.color]),f=0.6;d3.select(this).style("border-bottom-color",d(f)).style("border-top-color",d(f))}});var i=g.node().outerHTML;return void 0!==h.footer&&(i+="<div class='footer'>"+h.footer+"</div>"),i},M=function(c){if(c&&c.series){if(c.series instanceof Array){return !!c.series.length}if(c.series instanceof Object){return c.series=[c.series],!0}}return !1},K=function(c){Q&&b.dom.read(function(){var ae,B,s=parseInt(Q.offsetHeight,10),q=parseInt(Q.offsetWidth,10),o=b.utils.windowSize().width,n=b.utils.windowSize().height,m=window.pageYOffset,g=window.pageXOffset;n=window.innerWidth>=document.body.scrollWidth?n:n-16,o=window.innerHeight>=document.body.scrollHeight?o:o-16;var f,ak,aj=function(e){var d=B;do{isNaN(e.offsetTop)||(d+=e.offsetTop),e=e.offsetParent}while(e);return d},ai=function(e){var d=ae;do{isNaN(e.offsetLeft)||(d+=e.offsetLeft),e=e.offsetParent}while(e);return d};switch(Z){case"e":ae=c[0]-q-Y,B=c[1]-s/2,f=ai(Q),ak=aj(Q),g>f&&(ae=c[0]+Y>g?c[0]+Y:g-f+ae),m>ak&&(B=m-ak+B),ak+s>m+n&&(B=m+n-ak+B-s);break;case"w":ae=c[0]+Y,B=c[1]-s/2,f=ai(Q),ak=aj(Q),f+q>o&&(ae=c[0]-q-Y),m>ak&&(B=m+5),ak+s>m+n&&(B=m+n-ak+B-s);break;case"n":ae=c[0]-q/2-5,B=c[1]+Y,f=ai(Q),ak=aj(Q),g>f&&(ae=g+5),f+q>o&&(ae=ae-q/2+5),ak+s>m+n&&(B=m+n-ak+B-s);break;case"s":ae=c[0]-q/2,B=c[1]-s-Y,f=ai(Q),ak=aj(Q),g>f&&(ae=g+5),f+q>o&&(ae=ae-q/2+5),m>ak&&(B=m);break;case"none":ae=c[0],B=c[1]-Y,f=ai(Q),ak=aj(Q)}ae-=N.left,B-=N.top;var ah=Q.getBoundingClientRect(),m=window.pageYOffset||document.documentElement.scrollTop,g=window.pageXOffset||document.documentElement.scrollLeft,ag="translate("+(ah.left+g)+"px, "+(ah.top+m)+"px)",af="translate("+ae+"px, "+B+"px)",C=d3.interpolateString(ag,af),l=R.style("opacity")<0.1;T?R.transition().delay(S).duration(0).style("opacity",0):R.interrupt().transition().duration(l?0:J).styleTween("transform",function(){return C},"important").style("-webkit-transform",af).style("opacity",1)})};return ab.nvPointerEventsClass=F,ab.options=b.utils.optionsFunc.bind(ab),ab._options=Object.create({},{duration:{get:function(){return J},set:function(c){J=c}},gravity:{get:function(){return Z},set:function(c){Z=c}},distance:{get:function(){return Y},set:function(c){Y=c}},snapDistance:{get:function(){return X},set:function(c){X=c}},classes:{get:function(){return V},set:function(c){V=c}},chartContainer:{get:function(){return U},set:function(c){U=c}},fixedTop:{get:function(){return W},set:function(c){W=c}},enabled:{get:function(){return L},set:function(c){L=c}},hideDelay:{get:function(){return S},set:function(c){S=c}},contentGenerator:{get:function(){return O},set:function(c){O=c}},valueFormatter:{get:function(){return E},set:function(c){E=c}},headerFormatter:{get:function(){return D},set:function(c){D=c}},keyFormatter:{get:function(){return a},set:function(c){a=c}},headerEnabled:{get:function(){return I},set:function(c){I=c}},_isInteractiveLayer:{get:function(){return H},set:function(c){H=!!c}},position:{get:function(){return P},set:function(c){P.left=void 0!==c.left?c.left:P.left,P.top=void 0!==c.top?c.top:P.top}},offset:{get:function(){return N},set:function(c){N.left=void 0!==c.left?c.left:N.left,N.top=void 0!==c.top?c.top:N.top}},hidden:{get:function(){return T},set:function(c){T!=c&&(T=!!c,ab())}},data:{get:function(){return aa},set:function(c){c.point&&(c.value=c.point.x,c.series=c.series||{},c.series.value=c.point.y,c.series.color=c.point.color||c.series.color),aa=c}},tooltipElem:{get:function(){return Q},set:function(){}},id:{get:function(){return G},set:function(){}}}),b.utils.initOptions(ab),ab}}(),b.utils.windowSize=function(){var c={width:640,height:480};return window.innerWidth&&window.innerHeight?(c.width=window.innerWidth,c.height=window.innerHeight,c):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(c.width=document.documentElement.offsetWidth,c.height=document.documentElement.offsetHeight,c):document.body&&document.body.offsetWidth?(c.width=document.body.offsetWidth,c.height=document.body.offsetHeight,c):c},b.utils.windowResize=function(a){return window.addEventListener?window.addEventListener("resize",a):b.log("ERROR: Failed to bind to window.resize with: ",a),{callback:a,clear:function(){window.removeEventListener("resize",a)}}},b.utils.getColor=function(a){if(void 0===a){return b.utils.defaultColor()}if(Array.isArray(a)){var d=d3.scale.ordinal().range(a);return function(e,c){var f=void 0===c?e:c;return e.color||d(f)}}return a},b.utils.defaultColor=function(){return b.utils.getColor(d3.scale.category20().range())},b.utils.customTheme=function(f,e,h){e=e||function(c){return c.key},h=h||d3.scale.category20().range();var g=h.length;return function(c){var a=e(c);return"function"==typeof f[a]?f[a]():void 0!==f[a]?f[a]:(g||(g=h.length),g-=1,h[g])}},b.utils.pjax=function(a,f){var e=function(c){d3.html(c,function(h){var g=d3.select(f).node();g.parentNode.replaceChild(d3.select(h).select(f).node(),g),b.utils.pjax(a,f)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),e(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&e(d3.event.state)})},b.utils.calcApproxTextWidth=function(e){if("function"==typeof e.style&&"function"==typeof e.text){var d=parseInt(e.style("font-size").replace("px",""),10),f=e.text().length;return f*d*0.5}return 0},b.utils.NaNtoZero=function(c){return"number"!=typeof c||isNaN(c)||null===c||1/0===c||c===-1/0?0:c},d3.selection.prototype.watchTransition=function(d){var c=[this].concat([].slice.call(arguments,1));return d.transition.apply(d,c)},b.utils.renderWatch=function(a,j){if(!(this instanceof b.utils.renderWatch)){return new b.utils.renderWatch(a,j)}var i=void 0!==j?j:250,h=[],g=this;this.models=function(c){return c=[].slice.call(arguments,0),c.forEach(function(d){d.__rendered=!1,function(e){e.dispatch.on("renderEnd",function(){e.__rendered=!0,g.renderEnd("model")})}(d),h.indexOf(d)<0&&h.push(d)}),this},this.reset=function(c){void 0!==c&&(i=c),h=[]},this.transition=function(e,d,k){if(d=arguments.length>1?[].slice.call(arguments,1):[],k=d.length>1?d.pop():void 0!==i?i:250,e.__rendered=!1,h.indexOf(e)<0&&h.push(e),0===k){return e.__rendered=!0,e.delay=function(){return this},e.duration=function(){return this},e}e.__rendered=0===e.length?!0:e.every(function(c){return !c.length})?!0:!1;var f=0;return e.transition().duration(k).each(function(){++f}).each("end",function(){0===--f&&(e.__rendered=!0,g.renderEnd.apply(this,d))})},this.renderEnd=function(){h.every(function(c){return c.__rendered})&&(h.forEach(function(c){c.__rendered=!1}),a.renderEnd.apply(this,arguments))}},b.utils.deepExtend=function(a){var d=arguments.length>1?[].slice.call(arguments,1):[];d.forEach(function(l){for(var k in l){var j=a[k] instanceof Array,i="object"==typeof a[k],h="object"==typeof l[k];i&&!j&&h?b.utils.deepExtend(a[k],l[k]):a[k]=l[k]}})},b.utils.state=function(){if(!(this instanceof b.utils.state)){return new b.utils.state}var a={},l=function(){},k=function(){return{}},j=null,i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(c){l(c,!0)}),this.getter=function(c){return k=c,this},this.setter=function(d,c){return c||(c=function(){}),l=function(f,e){d(f),e&&c()},this},this.init=function(c){j=j||{},b.utils.deepExtend(j,c)};var h=function(){var d=k();if(JSON.stringify(d)===JSON.stringify(a)){return !1}for(var e in d){void 0===a[e]&&(a[e]={}),a[e]=d[e],i=!0}return !0};this.update=function(){j&&(l(j,!1),j=null),h.call(this)&&this.dispatch.change(a)}},b.utils.optionsFunc=function(c){return c&&d3.map(c).forEach(function(e,d){"function"==typeof this[e]&&this[e](d)}.bind(this)),this},b.utils.calcTicksX=function(a,j){var i=1,h=0;for(h;h<j.length;h+=1){var g=j[h]&&j[h].values?j[h].values.length:0;i=g>i?g:i}return b.log("Requested number of ticks: ",a),b.log("Calculated max values to be: ",i),a=a>i?a=i-1:a,a=1>a?1:a,a=Math.floor(a),b.log("Calculating tick count as: ",a),a},b.utils.calcTicksY=function(a,d){return b.utils.calcTicksX(a,d)},b.utils.initOption=function(d,c){d._calls&&d._calls[c]?d[c]=d._calls[c]:(d[c]=function(a){return arguments.length?(d._overrides[c]=!0,d._options[c]=a,d):d._options[c]},d["_"+c]=function(a){return arguments.length?(d._overrides[c]||(d._options[c]=a),d):d._options[c]})},b.utils.initOptions=function(a){a._overrides=a._overrides||{};var h=Object.getOwnPropertyNames(a._options||{}),g=Object.getOwnPropertyNames(a._calls||{});h=h.concat(g);for(var f in h){b.utils.initOption(a,h[f])}},b.utils.inheritOptionsD3=function(e,d,f){e._d3options=f.concat(e._d3options||[]),f.unshift(d),f.unshift(e),d3.rebind.apply(this,f)},b.utils.arrayUnique=function(c){return c.sort().filter(function(a,d){return !d||a!=c[d-1]})},b.utils.symbolMap=d3.map(),b.utils.symbol=function(){function a(c,i){var h=f.call(this,c,i),d=e.call(this,c,i);return -1!==d3.svg.symbolTypes.indexOf(h)?d3.svg.symbol().type(h).size(d)():b.utils.symbolMap.get(h)(d)}var f,e=64;return a.type=function(c){return arguments.length?(f=d3.functor(c),a):f},a.size=function(c){return arguments.length?(e=d3.functor(c),a):e},a},b.utils.inheritOptions=function(a,n){var m=Object.getOwnPropertyNames(n._options||{}),l=Object.getOwnPropertyNames(n._calls||{}),k=n._inherited||[],j=n._d3options||[],i=m.concat(l).concat(k).concat(j);i.unshift(n),i.unshift(a),d3.rebind.apply(this,i),a._inherited=b.utils.arrayUnique(m.concat(l).concat(k).concat(m).concat(a._inherited||[])),a._d3options=b.utils.arrayUnique(j.concat(a._d3options||[]))},b.utils.initSVG=function(c){c.classed({"nvd3-svg":!0})},b.utils.sanitizeHeight=function(d,c){return d||parseInt(c.style("height"),10)||400},b.utils.sanitizeWidth=function(d,c){return d||parseInt(c.style("width"),10)||960},b.utils.availableHeight=function(a,f,e){return b.utils.sanitizeHeight(a,f)-e.top-e.bottom},b.utils.availableWidth=function(a,f,e){return b.utils.sanitizeWidth(a,f)-e.left-e.right},b.utils.noData=function(v,u){var t=v.options(),s=t.margin(),r=t.noData(),q=null==r?["No Data Available."]:[r],p=b.utils.availableHeight(t.height(),u,s),o=b.utils.availableWidth(t.width(),u,s),n=s.left+o/2,m=s.top+p/2;u.selectAll("g").remove();var a=u.selectAll(".nv-noData").data(q);a.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),a.attr("x",n).attr("y",m).text(function(c){return c})},b.models.axis=function(){function J(c){return a.reset(),c.each(function(n){var k=d3.select(this);b.utils.initSVG(k);var i=k.selectAll("g.nv-wrap.nv-axis").data([n]),f=i.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),L=(f.append("g"),i.select("g"));null!==x?I.ticks(x):("top"==I.orient()||"bottom"==I.orient())&&I.ticks(Math.abs(H.range()[1]-H.range()[0])/100),L.watchTransition(a,"axis").call(I),t=t||I.scale();var K=I.tickFormat();null==K&&(K=t.tickFormat());var s=L.selectAll("text.nv-axislabel").data([D||null]);s.exit().remove();var r,o,m;switch(I.orient()){case"top":s.enter().append("text").attr("class","nv-axislabel"),m=H.range().length<2?0:2===H.range().length?H.range()[1]:H.range()[H.range().length-1]+(H.range()[1]-H.range()[0]),s.attr("text-anchor","middle").attr("y",0).attr("x",m/2),C&&(o=i.selectAll("g.nv-axisMaxMin").data(H.domain()),o.enter().append("g").attr("class",function(p,g){return["nv-axisMaxMin","nv-axisMaxMin-x",0==g?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),o.exit().remove(),o.attr("transform",function(g){return"translate("+b.utils.NaNtoZero(H(g))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-I.tickPadding()).attr("text-anchor","middle").text(function(p){var g=K(p);return(""+g).match("NaN")?"":g}),o.watchTransition(a,"min-max top").attr("transform",function(g,p){return"translate("+b.utils.NaNtoZero(H.range()[p])+",0)"}));break;case"bottom":r=w+36;var l=30,j=0,h=L.selectAll("g").select("text"),e="";if(B%360){h.each(function(){var p=this.getBoundingClientRect(),g=p.width;j=p.height,g>l&&(l=g)}),e="rotate("+B+" 0,"+(j/2+I.tickPadding())+")";var d=Math.abs(Math.sin(B*Math.PI/180));r=(d?d*l:l)+30,h.attr("transform",e).style("text-anchor",B%360>0?"start":"end")}s.enter().append("text").attr("class","nv-axislabel"),m=H.range().length<2?0:2===H.range().length?H.range()[1]:H.range()[H.range().length-1]+(H.range()[1]-H.range()[0]),s.attr("text-anchor","middle").attr("y",r).attr("x",m/2),C&&(o=i.selectAll("g.nv-axisMaxMin").data([H.domain()[0],H.domain()[H.domain().length-1]]),o.enter().append("g").attr("class",function(p,g){return["nv-axisMaxMin","nv-axisMaxMin-x",0==g?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),o.exit().remove(),o.attr("transform",function(g){return"translate("+b.utils.NaNtoZero(H(g)+(y?H.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",I.tickPadding()).attr("transform",e).style("text-anchor",B?B%360>0?"start":"end":"middle").text(function(p){var g=K(p);return(""+g).match("NaN")?"":g}),o.watchTransition(a,"min-max bottom").attr("transform",function(g){return"translate("+b.utils.NaNtoZero(H(g)+(y?H.rangeBand()/2:0))+",0)"})),z&&h.attr("transform",function(p,g){return"translate(0,"+(g%2==0?"0":"12")+")"});break;case"right":s.enter().append("text").attr("class","nv-axislabel"),s.style("text-anchor",A?"middle":"begin").attr("transform",A?"rotate(90)":"").attr("y",A?-Math.max(G.right,F)+12:-10).attr("x",A?d3.max(H.range())/2:I.tickPadding()),C&&(o=i.selectAll("g.nv-axisMaxMin").data(H.domain()),o.enter().append("g").attr("class",function(p,g){return["nv-axisMaxMin","nv-axisMaxMin-y",0==g?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),o.exit().remove(),o.attr("transform",function(g){return"translate(0,"+b.utils.NaNtoZero(H(g))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",I.tickPadding()).style("text-anchor","start").text(function(p){var g=K(p);return(""+g).match("NaN")?"":g}),o.watchTransition(a,"min-max right").attr("transform",function(g,p){return"translate(0,"+b.utils.NaNtoZero(H.range()[p])+")"}).select("text").style("opacity",1));break;case"left":s.enter().append("text").attr("class","nv-axislabel"),s.style("text-anchor",A?"middle":"end").attr("transform",A?"rotate(-90)":"").attr("y",A?-Math.max(G.left,F)+25-(w||0):-10).attr("x",A?-d3.max(H.range())/2:-I.tickPadding()),C&&(o=i.selectAll("g.nv-axisMaxMin").data(H.domain()),o.enter().append("g").attr("class",function(p,g){return["nv-axisMaxMin","nv-axisMaxMin-y",0==g?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),o.exit().remove(),o.attr("transform",function(g){return"translate(0,"+b.utils.NaNtoZero(t(g))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-I.tickPadding()).attr("text-anchor","end").text(function(p){var g=K(p);return(""+g).match("NaN")?"":g}),o.watchTransition(a,"min-max right").attr("transform",function(g,p){return"translate(0,"+b.utils.NaNtoZero(H.range()[p])+")"}).select("text").style("opacity",1))}if(s.text(function(g){return g}),!C||"left"!==I.orient()&&"right"!==I.orient()||(L.selectAll("g").each(function(g){d3.select(this).select("text").attr("opacity",1),(H(g)<H.range()[1]+10||H(g)>H.range()[0]-10)&&((g>1e-10||-1e-10>g)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),H.domain()[0]==H.domain()[1]&&0==H.domain()[0]&&i.selectAll("g.nv-axisMaxMin").style("opacity",function(p,g){return g?0:1})),C&&("top"===I.orient()||"bottom"===I.orient())){var M=[];i.selectAll("g.nv-axisMaxMin").each(function(p,g){try{M.push(g?H(p)-this.getBoundingClientRect().width-4:H(p)+this.getBoundingClientRect().width+4)}catch(q){M.push(g?H(p)-4:H(p)+4)}}),L.selectAll("g").each(function(g){(H(g)<M[0]||H(g)>M[1])&&(g>1e-10||-1e-10>g?d3.select(this).remove():d3.select(this).select("text").remove())})}L.selectAll(".tick").filter(function(g){return !parseFloat(Math.round(100000*g)/1000000)&&void 0!==g}).classed("zero",!0),t=H.copy()}),a.renderEnd("axis immediate"),J}var I=d3.svg.axis(),H=d3.scale.linear(),G={top:0,right:0,bottom:0,left:0},F=75,E=60,D=null,C=!0,B=0,A=!0,z=!1,y=!1,x=null,w=0,v=250,u=d3.dispatch("renderEnd");I.scale(H).orient("bottom").tickFormat(function(c){return c});var t,a=b.utils.renderWatch(u,v);return J.axis=I,J.dispatch=u,J.options=b.utils.optionsFunc.bind(J),J._options=Object.create({},{axisLabelDistance:{get:function(){return w},set:function(c){w=c}},staggerLabels:{get:function(){return z},set:function(c){z=c}},rotateLabels:{get:function(){return B},set:function(c){B=c}},rotateYLabel:{get:function(){return A},set:function(c){A=c}},showMaxMin:{get:function(){return C},set:function(c){C=c}},axisLabel:{get:function(){return D},set:function(c){D=c}},height:{get:function(){return E},set:function(c){E=c}},ticks:{get:function(){return x},set:function(c){x=c}},width:{get:function(){return F},set:function(c){F=c}},margin:{get:function(){return G},set:function(c){G.top=void 0!==c.top?c.top:G.top,G.right=void 0!==c.right?c.right:G.right,G.bottom=void 0!==c.bottom?c.bottom:G.bottom,G.left=void 0!==c.left?c.left:G.left}},duration:{get:function(){return v},set:function(c){v=c,a.reset(v)}},scale:{get:function(){return H},set:function(c){H=c,I.scale(H),y="function"==typeof H.rangeBands,b.utils.inheritOptionsD3(J,H,["domain","range","rangeBand","rangeBands"])}}}),b.utils.initOptions(J),b.utils.inheritOptionsD3(J,I,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),b.utils.inheritOptionsD3(J,H,["domain","range","rangeBand","rangeBands"]),J},b.models.boxPlot=function(){function P(c){return a.reset(),c.each(function(m){var i=H-I.left-I.right,g=G-I.top-I.bottom;z=d3.select(this),b.utils.initSVG(z),E.domain(O||m.map(function(p,l){return C(p,l)})).rangeBands(M||[0,i],0.1);var o=[];if(!N){var n=d3.min(m.map(function(p){var l=[];return l.push(p.values.Q1),p.values.hasOwnProperty("whisker_low")&&null!==p.values.whisker_low&&l.push(p.values.whisker_low),p.values.hasOwnProperty("outliers")&&null!==p.values.outliers&&(l=l.concat(p.values.outliers)),d3.min(l)})),k=d3.max(m.map(function(p){var l=[];return l.push(p.values.Q3),p.values.hasOwnProperty("whisker_high")&&null!==p.values.whisker_high&&l.push(p.values.whisker_high),p.values.hasOwnProperty("outliers")&&null!==p.values.outliers&&(l=l.concat(p.values.outliers)),d3.max(l)}));o=[n,k]}D.domain(N||o),D.range(L||[g,0]),K=K||E,J=J||D.copy().range([D(0),D(0)]);var j=z.selectAll("g.nv-wrap").data([m]);j.enter().append("g").attr("class","nvd3 nv-wrap");j.attr("transform","translate("+I.left+","+I.top+")");var h=j.selectAll(".nv-boxplot").data(function(l){return l}),f=h.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);h.attr("class","nv-boxplot").attr("transform",function(p,l){return"translate("+(E(C(p,l))+0.05*E.rangeBand())+", 0)"}).classed("hover",function(l){return l.hover}),h.watchTransition(a,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",0.75).delay(function(l,p){return p*x/m.length}).attr("transform",function(p,l){return"translate("+(E(C(p,l))+0.05*E.rangeBand())+", 0)"}),h.exit().remove(),f.each(function(p,l){var s=d3.select(this);["low","high"].forEach(function(t){p.values.hasOwnProperty("whisker_"+t)&&null!==p.values["whisker_"+t]&&(s.append("line").style("stroke",p.color?p.color:A(p,l)).attr("class","nv-boxplot-whisker nv-boxplot-"+t),s.append("line").style("stroke",p.color?p.color:A(p,l)).attr("class","nv-boxplot-tick nv-boxplot-"+t))})});var e=h.selectAll(".nv-boxplot-outlier").data(function(l){return l.values.hasOwnProperty("outliers")&&null!==l.values.outliers?l.values.outliers:[]});e.enter().append("circle").style("fill",function(p,l,s){return A(p,s)}).style("stroke",function(p,l,s){return A(p,s)}).on("mouseover",function(p,l,s){d3.select(this).classed("hover",!0),y.elementMouseover({series:{key:p,color:A(p,s)},e:d3.event})}).on("mouseout",function(p,l,s){d3.select(this).classed("hover",!1),y.elementMouseout({series:{key:p,color:A(p,s)},e:d3.event})}).on("mousemove",function(){y.elementMousemove({e:d3.event})}),e.attr("class","nv-boxplot-outlier"),e.watchTransition(a,"nv-boxplot: nv-boxplot-outlier").attr("cx",0.45*E.rangeBand()).attr("cy",function(l){return D(l)}).attr("r","3"),e.exit().remove();var d=function(){return null===w?0.9*E.rangeBand():Math.min(75,0.9*E.rangeBand())},r=function(){return 0.45*E.rangeBand()-d()/2},q=function(){return 0.45*E.rangeBand()+d()/2};["low","high"].forEach(function(p){var l="low"===p?"Q1":"Q3";h.select("line.nv-boxplot-whisker.nv-boxplot-"+p).watchTransition(a,"nv-boxplot: boxplots").attr("x1",0.45*E.rangeBand()).attr("y1",function(s){return D(s.values["whisker_"+p])}).attr("x2",0.45*E.rangeBand()).attr("y2",function(s){return D(s.values[l])}),h.select("line.nv-boxplot-tick.nv-boxplot-"+p).watchTransition(a,"nv-boxplot: boxplots").attr("x1",r).attr("y1",function(s){return D(s.values["whisker_"+p])}).attr("x2",q).attr("y2",function(s){return D(s.values["whisker_"+p])})}),["low","high"].forEach(function(l){f.selectAll(".nv-boxplot-"+l).on("mouseover",function(p,t,s){d3.select(this).classed("hover",!0),y.elementMouseover({series:{key:p.values["whisker_"+l],color:A(p,s)},e:d3.event})}).on("mouseout",function(p,t,s){d3.select(this).classed("hover",!1),y.elementMouseout({series:{key:p.values["whisker_"+l],color:A(p,s)},e:d3.event})}).on("mousemove",function(){y.elementMousemove({e:d3.event})})}),f.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(p,l){d3.select(this).classed("hover",!0),y.elementMouseover({key:p.label,value:p.label,series:[{key:"Q3",value:p.values.Q3,color:p.color||A(p,l)},{key:"Q2",value:p.values.Q2,color:p.color||A(p,l)},{key:"Q1",value:p.values.Q1,color:p.color||A(p,l)}],data:p,index:l,e:d3.event})}).on("mouseout",function(p,l){d3.select(this).classed("hover",!1),y.elementMouseout({key:p.label,value:p.label,series:[{key:"Q3",value:p.values.Q3,color:p.color||A(p,l)},{key:"Q2",value:p.values.Q2,color:p.color||A(p,l)},{key:"Q1",value:p.values.Q1,color:p.color||A(p,l)}],data:p,index:l,e:d3.event})}).on("mousemove",function(){y.elementMousemove({e:d3.event})}),h.select("rect.nv-boxplot-box").watchTransition(a,"nv-boxplot: boxes").attr("y",function(l){return D(l.values.Q3)}).attr("width",d).attr("x",r).attr("height",function(l){return Math.abs(D(l.values.Q3)-D(l.values.Q1))||1}).style("fill",function(p,l){return p.color||A(p,l)}).style("stroke",function(p,l){return p.color||A(p,l)}),f.append("line").attr("class","nv-boxplot-median"),h.select("line.nv-boxplot-median").watchTransition(a,"nv-boxplot: boxplots line").attr("x1",r).attr("y1",function(l){return D(l.values.Q2)}).attr("x2",q).attr("y2",function(l){return D(l.values.Q2)}),K=E.copy(),J=D.copy()}),a.renderEnd("nv-boxplot immediate"),P}var O,N,M,L,K,J,I={top:0,right:0,bottom:0,left:0},H=960,G=500,F=Math.floor(10000*Math.random()),E=d3.scale.ordinal(),D=d3.scale.linear(),C=function(c){return c.x},B=function(c){return c.y},A=b.utils.defaultColor(),z=null,y=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=250,w=null,a=b.utils.renderWatch(y,x);return P.dispatch=y,P.options=b.utils.optionsFunc.bind(P),P._options=Object.create({},{width:{get:function(){return H},set:function(c){H=c}},height:{get:function(){return G},set:function(c){G=c}},maxBoxWidth:{get:function(){return w},set:function(c){w=c}},x:{get:function(){return C},set:function(c){C=c}},y:{get:function(){return B},set:function(c){B=c}},xScale:{get:function(){return E},set:function(c){E=c}},yScale:{get:function(){return D},set:function(c){D=c}},xDomain:{get:function(){return O},set:function(c){O=c}},yDomain:{get:function(){return N},set:function(c){N=c}},xRange:{get:function(){return M},set:function(c){M=c}},yRange:{get:function(){return L},set:function(c){L=c}},id:{get:function(){return F},set:function(c){F=c}},margin:{get:function(){return I},set:function(c){I.top=void 0!==c.top?c.top:I.top,I.right=void 0!==c.right?c.right:I.right,I.bottom=void 0!==c.bottom?c.bottom:I.bottom,I.left=void 0!==c.left?c.left:I.left}},color:{get:function(){return A},set:function(c){A=b.utils.getColor(c)}},duration:{get:function(){return x},set:function(c){x=c,a.reset(x)}}}),b.utils.initOptions(P),P},b.models.boxPlotChart=function(){function L(c){return a.reset(),a.models(I),B&&a.models(H),A&&a.models(G),c.each(function(g){var e=d3.select(this);b.utils.initSVG(e);var o=(E||parseInt(e.style("width"))||960)-F.left-F.right,n=(D||parseInt(e.style("height"))||400)-F.top-F.bottom;if(L.update=function(){v.beforeUpdate(),e.transition().duration(u).call(L)},L.container=this,!(g&&g.length&&g.filter(function(k){return k.values.hasOwnProperty("Q1")&&k.values.hasOwnProperty("Q2")&&k.values.hasOwnProperty("Q3")}).length)){var m=e.selectAll(".nv-noData").data([w]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",F.left+o/2).attr("y",F.top+n/2).text(function(k){return k}),L}e.selectAll(".nv-noData").remove(),K=I.xScale(),J=I.yScale().clamp(!0);var l=e.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([g]),j=l.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),i=j.append("defs"),h=l.select("g");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),j.append("g").attr("class","nv-barsWrap"),h.attr("transform","translate("+F.left+","+F.top+")"),z&&h.select(".nv-y.nv-axis").attr("transform","translate("+o+",0)"),I.width(o).height(n);var f=h.select(".nv-barsWrap").datum(g.filter(function(k){return !k.disabled}));if(f.transition().call(I),i.append("clipPath").attr("id","nv-x-label-clip-"+I.id()).append("rect"),h.select("#nv-x-label-clip-"+I.id()+" rect").attr("width",K.rangeBand()*(y?2:1)).attr("height",16).attr("x",-K.rangeBand()/(y?1:2)),B){H.scale(K).ticks(b.utils.calcTicksX(o/100,g)).tickSize(-n,0),h.select(".nv-x.nv-axis").attr("transform","translate(0,"+J.range()[0]+")"),h.select(".nv-x.nv-axis").call(H);var d=h.select(".nv-x.nv-axis").selectAll("g");y&&d.selectAll("text").attr("transform",function(p,k,q){return"translate(0,"+(q%2==0?"5":"17")+")"})}A&&(G.scale(J).ticks(Math.floor(n/36)).tickSize(-o,0),h.select(".nv-y.nv-axis").call(G)),h.select(".nv-zeroLine line").attr("x1",0).attr("x2",o).attr("y1",J(0)).attr("y2",J(0))}),a.renderEnd("nv-boxplot chart immediate"),L}var K,J,I=b.models.boxPlot(),H=b.models.axis(),G=b.models.axis(),F={top:15,right:10,bottom:50,left:60},E=null,D=null,C=b.utils.getColor(),B=!0,A=!0,z=!1,y=!1,x=b.models.tooltip(),w="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),u=250;H.orient("bottom").showMaxMin(!1).tickFormat(function(c){return c}),G.orient(z?"right":"left").tickFormat(d3.format(",.1f")),x.duration(0);var a=b.utils.renderWatch(v,u);return I.dispatch.on("elementMouseover.tooltip",function(c){x.data(c).hidden(!1)}),I.dispatch.on("elementMouseout.tooltip",function(c){x.data(c).hidden(!0)}),I.dispatch.on("elementMousemove.tooltip",function(){x.position({top:d3.event.pageY,left:d3.event.pageX})()}),L.dispatch=v,L.boxplot=I,L.xAxis=H,L.yAxis=G,L.tooltip=x,L.options=b.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return E},set:function(c){E=c}},height:{get:function(){return D},set:function(c){D=c}},staggerLabels:{get:function(){return y},set:function(c){y=c}},showXAxis:{get:function(){return B},set:function(c){B=c}},showYAxis:{get:function(){return A},set:function(c){A=c}},tooltips:{get:function(){return tooltips},set:function(c){tooltips=c}},tooltipContent:{get:function(){return x},set:function(c){x=c}},noData:{get:function(){return w},set:function(c){w=c}},margin:{get:function(){return F},set:function(c){F.top=void 0!==c.top?c.top:F.top,F.right=void 0!==c.right?c.right:F.right,F.bottom=void 0!==c.bottom?c.bottom:F.bottom,F.left=void 0!==c.left?c.left:F.left}},duration:{get:function(){return u},set:function(c){u=c,a.reset(u),I.duration(u),H.duration(u),G.duration(u)}},color:{get:function(){return C},set:function(c){C=b.utils.getColor(c),I.color(C)}},rightAlignYAxis:{get:function(){return z},set:function(c){z=c,G.orient(c?"right":"left")}}}),b.utils.inheritOptions(L,I),b.utils.initOptions(L),L},b.models.bullet=function(){function H(c){return c.each(function(T,S){var R=w-G.left-G.right,M=v-G.top-G.bottom;u=d3.select(this),b.utils.initSVG(u);var L=D.call(this,T,S).slice().sort(d3.descending),q=C.call(this,T,S).slice().sort(d3.descending),n=B.call(this,T,S).slice().sort(d3.descending),l=A.call(this,T,S).slice(),j=z.call(this,T,S).slice(),h=y.call(this,T,S).slice(),f=d3.scale.linear().domain(d3.extent(d3.merge([x,L]))).range(E?[R,0]:[0,R]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(f.range());this.__chart__=f;var Q=d3.min(L),P=d3.max(L),O=L[1],N=u.selectAll("g.nv-wrap.nv-bullet").data([T]),r=N.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),o=r.append("g"),m=N.select("g");o.append("rect").attr("class","nv-range nv-rangeMax"),o.append("rect").attr("class","nv-range nv-rangeAvg"),o.append("rect").attr("class","nv-range nv-rangeMin"),o.append("rect").attr("class","nv-measure"),N.attr("transform","translate("+G.left+","+G.top+")");var k=function(d){return Math.abs(f(d)-f(0))},i=function(d){return f(0>d?d:0)};m.select("rect.nv-rangeMax").attr("height",M).attr("width",k(P>0?P:Q)).attr("x",i(P>0?P:Q)).datum(P>0?P:Q),m.select("rect.nv-rangeAvg").attr("height",M).attr("width",k(O)).attr("x",i(O)).datum(O),m.select("rect.nv-rangeMin").attr("height",M).attr("width",k(P)).attr("x",i(P)).attr("width",k(P>0?Q:P)).attr("x",i(P>0?Q:P)).datum(P>0?Q:P),m.select("rect.nv-measure").style("fill",s).attr("height",M/3).attr("y",M/3).attr("width",0>n?f(0)-f(n[0]):f(n[0])-f(0)).attr("x",i(n)).on("mouseover",function(){a.elementMouseover({value:n[0],label:h[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){a.elementMousemove({value:n[0],label:h[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){a.elementMouseout({value:n[0],label:h[0]||"Current",color:d3.select(this).style("fill")})});var g=M/6,e=q.map(function(p,d){return{value:p,label:j[d]}});o.selectAll("path.nv-markerTriangle").data(e).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(d){return"translate("+f(d.value)+","+M/2+")"}).attr("d","M0,"+g+"L"+g+","+-g+" "+-g+","+-g+"Z").on("mouseover",function(d){a.elementMouseover({value:d.value,label:d.label||"Previous",color:d3.select(this).style("fill"),pos:[f(d.value),M/2]})}).on("mousemove",function(d){a.elementMousemove({value:d.value,label:d.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(d){a.elementMouseout({value:d.value,label:d.label||"Previous",color:d3.select(this).style("fill")})}),N.selectAll(".nv-range").on("mouseover",function(p,d){var I=l[d]||(d?1==d?"Mean":"Minimum":"Maximum");a.elementMouseover({value:p,label:I,color:d3.select(this).style("fill")})}).on("mousemove",function(){a.elementMousemove({value:n[0],label:h[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(p,d){var I=l[d]||(d?1==d?"Mean":"Minimum":"Maximum");a.elementMouseout({value:p,label:I,color:d3.select(this).style("fill")})})}),H}var G={top:0,right:0,bottom:0,left:0},F="left",E=!1,D=function(c){return c.ranges},C=function(c){return c.markers?c.markers:[0]},B=function(c){return c.measures},A=function(c){return c.rangeLabels?c.rangeLabels:[]},z=function(c){return c.markerLabels?c.markerLabels:[]},y=function(c){return c.measureLabels?c.measureLabels:[]},x=[0],w=380,v=30,u=null,t=null,s=b.utils.getColor(["#1f77b4"]),a=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");return H.dispatch=a,H.options=b.utils.optionsFunc.bind(H),H._options=Object.create({},{ranges:{get:function(){return D},set:function(c){D=c}},markers:{get:function(){return C},set:function(c){C=c}},measures:{get:function(){return B},set:function(c){B=c}},forceX:{get:function(){return x},set:function(c){x=c}},width:{get:function(){return w},set:function(c){w=c}},height:{get:function(){return v},set:function(c){v=c}},tickFormat:{get:function(){return t},set:function(c){t=c}},margin:{get:function(){return G},set:function(c){G.top=void 0!==c.top?c.top:G.top,G.right=void 0!==c.right?c.right:G.right,G.bottom=void 0!==c.bottom?c.bottom:G.bottom,G.left=void 0!==c.left?c.left:G.left}},orient:{get:function(){return F},set:function(c){F=c,E="right"==F||"bottom"==F}},color:{get:function(){return s},set:function(c){s=b.utils.getColor(c)}}}),b.utils.initOptions(H),H},b.models.bulletChart=function(){function D(c){return c.each(function(Q,P){var O=d3.select(this);b.utils.initSVG(O);var M=b.utils.availableWidth(u,O,y),K=t-y.top-y.bottom;if(D.update=function(){D(c)},D.container=this,!Q||!x.call(this,Q,P)){return b.utils.noData(D,O),D}O.selectAll(".nv-noData").remove();var H=x.call(this,Q,P).slice().sort(d3.descending),n=w.call(this,Q,P).slice().sort(d3.descending),l=v.call(this,Q,P).slice().sort(d3.descending),j=O.selectAll("g.nv-wrap.nv-bulletChart").data([Q]),h=j.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),g=h.append("g"),f=j.select("g");g.append("g").attr("class","nv-bulletWrap"),g.append("g").attr("class","nv-titles"),j.attr("transform","translate("+y.left+","+y.top+")");var d=d3.scale.linear().domain([0,Math.max(H[0],n[0],l[0])]).range(z?[M,0]:[0,M]),N=this.__chart__||d3.scale.linear().domain([0,1/0]).range(d.range());this.__chart__=d;var L=g.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(t-y.top-y.bottom)/2+")");L.append("text").attr("class","nv-title").text(function(e){return e.title}),L.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(e){return e.subtitle}),C.width(M).height(K);var J=f.select(".nv-bulletWrap");d3.transition(J).call(C);var I=s||d.tickFormat(M/100),m=f.selectAll("g.nv-tick").data(d.ticks(r?r:M/50),function(e){return this.textContent||I(e)}),k=m.enter().append("g").attr("class","nv-tick").attr("transform",function(e){return"translate("+N(e)+",0)"}).style("opacity",0.000001);k.append("line").attr("y1",K).attr("y2",7*K/6),k.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*K/6).text(I);var i=d3.transition(m).attr("transform",function(e){return"translate("+d(e)+",0)"}).style("opacity",1);i.select("line").attr("y1",K).attr("y2",7*K/6),i.select("text").attr("y",7*K/6),d3.transition(m.exit()).attr("transform",function(e){return"translate("+d(e)+",0)"}).style("opacity",0.000001).remove()}),d3.timer.flush(),D}var C=b.models.bullet(),B=b.models.tooltip(),A="left",z=!1,y={top:5,right:40,bottom:20,left:120},x=function(c){return c.ranges},w=function(c){return c.markers?c.markers:[0]},v=function(c){return c.measures},u=null,t=55,s=null,r=null,q=null,a=d3.dispatch("tooltipShow","tooltipHide");return B.duration(0).headerEnabled(!1),C.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:c.label,value:c.value,color:c.color},B.data(c).hidden(!1)}),C.dispatch.on("elementMouseout.tooltip",function(){B.hidden(!0)}),C.dispatch.on("elementMousemove.tooltip",function(){B.position({top:d3.event.pageY,left:d3.event.pageX})()}),D.bullet=C,D.dispatch=a,D.tooltip=B,D.options=b.utils.optionsFunc.bind(D),D._options=Object.create({},{ranges:{get:function(){return x},set:function(c){x=c}},markers:{get:function(){return w},set:function(c){w=c}},measures:{get:function(){return v},set:function(c){v=c}},width:{get:function(){return u},set:function(c){u=c}},height:{get:function(){return t},set:function(c){t=c}},tickFormat:{get:function(){return s},set:function(c){s=c}},ticks:{get:function(){return r},set:function(c){r=c}},noData:{get:function(){return q},set:function(c){q=c}},tooltips:{get:function(){return B.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),B.enabled(!!c)}},tooltipContent:{get:function(){return B.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),B.contentGenerator(c)}},margin:{get:function(){return y},set:function(c){y.top=void 0!==c.top?c.top:y.top,y.right=void 0!==c.right?c.right:y.right,y.bottom=void 0!==c.bottom?c.bottom:y.bottom,y.left=void 0!==c.left?c.left:y.left}},orient:{get:function(){return A},set:function(c){A=c,z="right"==A||"bottom"==A}}}),b.utils.inheritOptions(D,C),b.utils.initOptions(D),D},b.models.candlestickBar=function(){function X(c){return c.each(function(i){W=d3.select(this);var j=b.utils.availableWidth(Q,W,R),h=b.utils.availableHeight(P,W,R);b.utils.initSVG(W);var g=j/i[0].values.length*0.45;N.domain(V||d3.extent(i[0].values.map(L).concat(F))),N.range(D?T||[0.5*j/i[0].values.length,j*(i[0].values.length-0.5)/i[0].values.length]:T||[5+g/2,j-g/2-5]),M.domain(U||[d3.min(i[0].values.map(G).concat(E)),d3.max(i[0].values.map(H).concat(E))]).range(S||[h,0]),N.domain()[0]===N.domain()[1]&&N.domain(N.domain()[0]?[N.domain()[0]-0.01*N.domain()[0],N.domain()[1]+0.01*N.domain()[1]]:[-1,1]),M.domain()[0]===M.domain()[1]&&M.domain(M.domain()[0]?[M.domain()[0]+0.01*M.domain()[0],M.domain()[1]-0.01*M.domain()[1]]:[-1,1]);var f=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([i[0].values]),e=f.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),d=e.append("defs"),n=e.append("g"),m=f.select("g");n.append("g").attr("class","nv-ticks"),f.attr("transform","translate("+R.left+","+R.top+")"),W.on("click",function(p,o){a.chartClick({data:p,index:o,pos:d3.event,id:O})}),d.append("clipPath").attr("id","nv-chart-clip-path-"+O).append("rect"),f.select("#nv-chart-clip-path-"+O+" rect").attr("width",j).attr("height",h),m.attr("clip-path",C?"url(#nv-chart-clip-path-"+O+")":"");var l=f.select(".nv-ticks").selectAll(".nv-tick").data(function(o){return o});l.exit().remove();var k=l.enter().append("g").attr("class",function(p,o,q){return(J(p,o)>I(p,o)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+q+"-"+o});k.append("line").attr("class","nv-candlestick-lines").attr("transform",function(p,o){return"translate("+N(L(p,o))+",0)"}).attr("x1",0).attr("y1",function(p,o){return M(H(p,o))}).attr("x2",0).attr("y2",function(p,o){return M(G(p,o))}),k.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(p,o){return"translate("+(N(L(p,o))-g/2)+","+(M(K(p,o))-(J(p,o)>I(p,o)?M(I(p,o))-M(J(p,o)):0))+")"}).attr("x",0).attr("y",0).attr("width",g).attr("height",function(p,o){var r=J(p,o),q=I(p,o);return r>q?M(q)-M(r):M(r)-M(q)});W.selectAll(".nv-candlestick-lines").transition().attr("transform",function(p,o){return"translate("+N(L(p,o))+",0)"}).attr("x1",0).attr("y1",function(p,o){return M(H(p,o))}).attr("x2",0).attr("y2",function(p,o){return M(G(p,o))}),W.selectAll(".nv-candlestick-rects").transition().attr("transform",function(p,o){return"translate("+(N(L(p,o))-g/2)+","+(M(K(p,o))-(J(p,o)>I(p,o)?M(I(p,o))-M(J(p,o)):0))+")"}).attr("x",0).attr("y",0).attr("width",g).attr("height",function(p,o){var r=J(p,o),q=I(p,o);return r>q?M(q)-M(r):M(r)-M(q)})}),X}var W,V,U,T,S,R={top:0,right:0,bottom:0,left:0},Q=null,P=null,O=Math.floor(10000*Math.random()),N=d3.scale.linear(),M=d3.scale.linear(),L=function(c){return c.x},K=function(c){return c.y},J=function(c){return c.open},I=function(c){return c.close},H=function(c){return c.high},G=function(c){return c.low},F=[],E=[],D=!1,C=!0,B=b.utils.defaultColor(),A=!1,a=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return X.highlightPoint=function(c,e){X.clearHighlights(),W.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)},X.clearHighlights=function(){W.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},X.dispatch=a,X.options=b.utils.optionsFunc.bind(X),X._options=Object.create({},{width:{get:function(){return Q},set:function(c){Q=c}},height:{get:function(){return P},set:function(c){P=c}},xScale:{get:function(){return N},set:function(c){N=c}},yScale:{get:function(){return M},set:function(c){M=c}},xDomain:{get:function(){return V},set:function(c){V=c}},yDomain:{get:function(){return U},set:function(c){U=c}},xRange:{get:function(){return T},set:function(c){T=c}},yRange:{get:function(){return S},set:function(c){S=c}},forceX:{get:function(){return F},set:function(c){F=c}},forceY:{get:function(){return E},set:function(c){E=c}},padData:{get:function(){return D},set:function(c){D=c}},clipEdge:{get:function(){return C},set:function(c){C=c}},id:{get:function(){return O},set:function(c){O=c}},interactive:{get:function(){return A},set:function(c){A=c}},x:{get:function(){return L},set:function(c){L=c}},y:{get:function(){return K},set:function(c){K=c}},open:{get:function(){return J()},set:function(c){J=c}},close:{get:function(){return I()},set:function(c){I=c}},high:{get:function(){return H},set:function(c){H=c}},low:{get:function(){return G},set:function(c){G=c}},margin:{get:function(){return R},set:function(c){R.top=void 0!=c.top?c.top:R.top,R.right=void 0!=c.right?c.right:R.right,R.bottom=void 0!=c.bottom?c.bottom:R.bottom,R.left=void 0!=c.left?c.left:R.left}},color:{get:function(){return B},set:function(c){B=b.utils.getColor(c)}}}),b.utils.initOptions(X),X},b.models.cumulativeLineChart=function(){function au(c){return N.reset(),N.models(ap),ad&&N.models(ao),ac&&N.models(an),c.each(function(z){function y(){d3.select(au.container).style("cursor","ew-resize")}function x(){O.x=d3.event.x,O.i=Math.round(P.invert(O.x)),v()}function w(){d3.select(au.container).style("cursor","auto"),W.index=O.i,S.stateChange(W)}function v(){o.data([O]);var l=au.duration();au.duration(0),au.update(),au.duration(l)}var u=d3.select(this);b.utils.initSVG(u),u.classed("nv-chart-"+X,!0);var t=this,s=b.utils.availableWidth(ag,u,ai),r=b.utils.availableHeight(af,u,ai);if(au.update=function(){0===R?u.call(au):u.transition().duration(R).call(au)},au.container=this,W.setter(L(z),au.update).getter(M(z)).update(),W.disabled=z.map(function(l){return !!l.disabled}),!V){var q;V={};for(q in W){V[q]=W[q] instanceof Array?W[q].slice(0):W[q]}}var p=d3.behavior.drag().on("dragstart",y).on("drag",x).on("dragend",w);if(!(z&&z.length&&z.filter(function(l){return l.values.length}).length)){return b.utils.noData(au,u),au}if(u.selectAll(".nv-noData").remove(),ar=ap.xScale(),aq=ap.yScale(),Y){ap.yDomain(null)}else{var n=z.filter(function(l){return !l.disabled}).map(function(A){var l=d3.extent(A.values,ap.y());return l[0]<-0.95&&(l[0]=-0.95),[(l[0]-l[1])/(1+l[1]),(l[1]-l[0])/(1+l[0])]}),m=[d3.min(n,function(l){return l[0]}),d3.max(n,function(l){return l[1]})];ap.yDomain(m)}P.domain([0,z[0].values.length-1]).range([0,s]).clamp(!0);var z=at(O.i,z),j=Z?"none":"all",i=u.selectAll("g.nv-wrap.nv-cumulativeLine").data([z]),h=i.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),g=i.select("g");if(h.append("g").attr("class","nv-interactive"),h.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),h.append("g").attr("class","nv-y nv-axis"),h.append("g").attr("class","nv-background"),h.append("g").attr("class","nv-linesWrap").style("pointer-events",j),h.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),h.append("g").attr("class","nv-legendWrap"),h.append("g").attr("class","nv-controlsWrap"),ae&&(am.width(s),g.select(".nv-legendWrap").datum(z).call(am),ai.top!=am.height()&&(ai.top=am.height(),r=b.utils.availableHeight(af,u,ai)),g.select(".nv-legendWrap").attr("transform","translate(0,"+-ai.top+")")),aa){var f=[{key:"Re-scale y-axis",disabled:!Y}];al.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),g.select(".nv-controlsWrap").datum(f).attr("transform","translate(0,"+-ai.top+")").call(al)}i.attr("transform","translate("+ai.left+","+ai.top+")"),ab&&g.select(".nv-y.nv-axis").attr("transform","translate("+s+",0)");var e=z.filter(function(l){return l.tempDisabled});i.select(".tempDisabled").remove(),e.length&&i.append("text").attr("class","tempDisabled").attr("x",s/2).attr("y","-.71em").style("text-anchor","end").text(e.map(function(l){return l.key}).join(", ")+" values cannot be calculated for this time period."),Z&&(ak.width(s).height(r).margin({left:ai.left,top:ai.top}).svgContainer(u).xScale(ar),i.select(".nv-interactive").call(ak)),h.select(".nv-background").append("rect"),g.select(".nv-background rect").attr("width",s).attr("height",r),ap.y(function(l){return l.display.y}).width(s).height(r).color(z.map(function(A,l){return A.color||ah(A,l)}).filter(function(A,l){return !z[l].disabled&&!z[l].tempDisabled}));var d=g.select(".nv-linesWrap").datum(z.filter(function(l){return !l.disabled&&!l.tempDisabled}));d.call(ap),z.forEach(function(A,l){A.seriesIndex=l});var k=z.filter(function(l){return !l.disabled&&!!T(l)}),C=g.select(".nv-avgLinesWrap").selectAll("line").data(k,function(l){return l.key}),B=function(A){var l=aq(T(A));return 0>l?0:l>r?r:l};C.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(l){return ap.color()(l,l.seriesIndex)}).attr("x1",0).attr("x2",s).attr("y1",B).attr("y2",B),C.style("stroke-opacity",function(A){var l=aq(T(A));return 0>l||l>r?0:1}).attr("x1",0).attr("x2",s).attr("y1",B).attr("y2",B),C.exit().remove();var o=d.selectAll(".nv-indexLine").data([O]);o.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(p),o.attr("transform",function(l){return"translate("+P(l.i)+",0)"}).attr("height",r),ad&&(ao.scale(ar)._ticks(b.utils.calcTicksX(s/70,z)).tickSize(-r,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+aq.range()[0]+")"),g.select(".nv-x.nv-axis").call(ao)),ac&&(an.scale(aq)._ticks(b.utils.calcTicksY(r/36,z)).tickSize(-s,0),g.select(".nv-y.nv-axis").call(an)),g.select(".nv-background rect").on("click",function(){O.x=d3.mouse(this)[0],O.i=Math.round(P.invert(O.x)),W.index=O.i,S.stateChange(W),v()}),ap.dispatch.on("elementClick",function(l){O.i=l.pointIndex,O.x=P(O.i),W.index=O.i,S.stateChange(W),v()}),al.dispatch.on("legendClick",function(l){l.disabled=!l.disabled,Y=!l.disabled,W.rescaleY=Y,S.stateChange(W),au.update()}),am.dispatch.on("stateChange",function(l){for(var A in l){W[A]=l[A]}S.stateChange(W),au.update()}),ak.dispatch.on("elementMousemove",function(J){ap.clearHighlights();var I,H,G,F=[];if(z.filter(function(aw,av){return aw.seriesIndex=av,!aw.disabled}).forEach(function(ax,aw){H=b.interactiveBisect(ax.values,J.pointXValue,au.x()),ap.highlightPoint(aw,H,!0);var av=ax.values[H];"undefined"!=typeof av&&("undefined"==typeof I&&(I=av),"undefined"==typeof G&&(G=au.xScale()(au.x()(av,H))),F.push({key:ax.key,value:au.y()(av,H),color:ah(ax,ax.seriesIndex)}))}),F.length>2){var E=au.yScale().invert(J.mouseY),D=Math.abs(au.yScale().domain()[0]-au.yScale().domain()[1]),A=0.03*D,l=b.nearestValueIndex(F.map(function(av){return av.value}),E,A);null!==l&&(F[l].highlight=!0)}var K=ao.tickFormat()(au.x()(I,H),H);ak.tooltip.position({left:G+ai.left,top:J.mouseY+ai.top}).chartContainer(t.parentNode).valueFormatter(function(av){return an.tickFormat()(av)}).data({value:K,series:F})(),ak.renderGuideLine(G)}),ak.dispatch.on("elementMouseout",function(){ap.clearHighlights()}),S.on("changeState",function(l){"undefined"!=typeof l.disabled&&(z.forEach(function(A,D){A.disabled=l.disabled[D]}),W.disabled=l.disabled),"undefined"!=typeof l.index&&(O.i=l.index,O.x=P(O.i),W.index=l.index,o.data([O])),"undefined"!=typeof l.rescaleY&&(Y=l.rescaleY),au.update()})}),N.renderEnd("cumulativeLineChart immediate"),au}function at(d,c){return a||(a=ap.y()),c.map(function(e){if(!e.values){return e}var g=e.values[d];if(null==g){return e}var f=a(g,d);return -0.95>f&&!Q?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(i,h){return i.display={y:(a(i,h)-f)/(1+f)},i}),e)})}var ar,aq,ap=b.models.line(),ao=b.models.axis(),an=b.models.axis(),am=b.models.legend(),al=b.models.legend(),ak=b.interactiveGuideline(),aj=b.models.tooltip(),ai={top:30,right:30,bottom:50,left:60},ah=b.utils.defaultColor(),ag=null,af=null,ae=!0,ad=!0,ac=!0,ab=!1,aa=!0,Z=!1,Y=!0,X=ap.id(),W=b.utils.state(),V=null,U=null,T=function(c){return c.average},S=d3.dispatch("stateChange","changeState","renderEnd"),R=250,Q=!1;W.index=0,W.rescaleY=Y,ao.orient("bottom").tickPadding(7),an.orient(ab?"right":"left"),aj.valueFormatter(function(d,c){return an.tickFormat()(d,c)}).headerFormatter(function(d,c){return ao.tickFormat()(d,c)}),al.updateState(!1);var P=d3.scale.linear(),O={i:0,x:0},N=b.utils.renderWatch(S,R),M=function(c){return function(){return{active:c.map(function(d){return !d.disabled}),index:O.i,rescaleY:Y}}},L=function(c){return function(d){void 0!==d.index&&(O.i=d.index),void 0!==d.rescaleY&&(Y=d.rescaleY),void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};ap.dispatch.on("elementMouseover.tooltip",function(d){var e={x:au.x()(d.point),y:au.y()(d.point),color:d.point.color};d.point=e,aj.data(d).position(d.pos).hidden(!1)}),ap.dispatch.on("elementMouseout.tooltip",function(){aj.hidden(!0)});var a=null;return au.dispatch=S,au.lines=ap,au.legend=am,au.controls=al,au.xAxis=ao,au.yAxis=an,au.interactiveLayer=ak,au.state=W,au.tooltip=aj,au.options=b.utils.optionsFunc.bind(au),au._options=Object.create({},{width:{get:function(){return ag},set:function(c){ag=c}},height:{get:function(){return af},set:function(c){af=c}},rescaleY:{get:function(){return Y},set:function(c){Y=c}},showControls:{get:function(){return aa},set:function(c){aa=c}},showLegend:{get:function(){return ae},set:function(c){ae=c}},average:{get:function(){return T},set:function(c){T=c}},defaultState:{get:function(){return V},set:function(c){V=c}},noData:{get:function(){return U},set:function(c){U=c}},showXAxis:{get:function(){return ad},set:function(c){ad=c}},showYAxis:{get:function(){return ac},set:function(c){ac=c}},noErrorCheck:{get:function(){return Q},set:function(c){Q=c}},tooltips:{get:function(){return aj.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),aj.enabled(!!c)}},tooltipContent:{get:function(){return aj.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),aj.contentGenerator(c)}},margin:{get:function(){return ai},set:function(c){ai.top=void 0!==c.top?c.top:ai.top,ai.right=void 0!==c.right?c.right:ai.right,ai.bottom=void 0!==c.bottom?c.bottom:ai.bottom,ai.left=void 0!==c.left?c.left:ai.left}},color:{get:function(){return ah},set:function(c){ah=b.utils.getColor(c),am.color(ah)}},useInteractiveGuideline:{get:function(){return Z},set:function(c){Z=c,c===!0&&(au.interactive(!1),au.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return ab},set:function(c){ab=c,an.orient(c?"right":"left")}},duration:{get:function(){return R},set:function(c){R=c,ap.duration(R),ao.duration(R),an.duration(R),N.reset(R)}}}),b.utils.inheritOptions(au,ap),b.utils.initOptions(au),au},b.models.discreteBar=function(){function V(c){return a.reset(),c.each(function(j){var h=M-N.left-N.right,k=L-N.top-N.bottom;U=d3.select(this),b.utils.initSVG(U),j.forEach(function(o,m){o.values.forEach(function(p){p.series=m})});var i=T&&S?[]:j.map(function(m){return m.values.map(function(p,o){return{x:H(p,o),y:G(p,o),y0:p.y0}})});J.domain(T||d3.merge(i).map(function(m){return m.x})).rangeBands(R||[0,h],0.1),I.domain(S||d3.extent(d3.merge(i).map(function(m){return m.y}).concat(F))),I.range(D?Q||[k-(I.domain()[0]<0?12:0),I.domain()[1]>0?12:0]:Q||[k,0]),P=P||J,O=O||I.copy().range([I(0),I(0)]);var g=U.selectAll("g.nv-wrap.nv-discretebar").data([j]),f=g.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),e=f.append("g");g.select("g");e.append("g").attr("class","nv-groups"),g.attr("transform","translate("+N.left+","+N.top+")");var d=g.select(".nv-groups").selectAll(".nv-group").data(function(m){return m},function(m){return m.key});d.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),d.exit().watchTransition(a,"discreteBar: exit groups").style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove(),d.attr("class",function(o,m){return"nv-group nv-series-"+m}).classed("hover",function(m){return m.hover}),d.watchTransition(a,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var n=d.selectAll("g.nv-bar").data(function(m){return m.values});n.exit().remove();var l=n.enter().append("g").attr("transform",function(o,m){return"translate("+(J(H(o,m))+0.05*J.rangeBand())+", "+I(0)+")"}).on("mouseover",function(o,m){d3.select(this).classed("hover",!0),B.elementMouseover({data:o,index:m,color:d3.select(this).style("fill")})}).on("mouseout",function(o,m){d3.select(this).classed("hover",!1),B.elementMouseout({data:o,index:m,color:d3.select(this).style("fill")})}).on("mousemove",function(o,m){B.elementMousemove({data:o,index:m,color:d3.select(this).style("fill")})}).on("click",function(o,m){B.elementClick({data:o,index:m,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(o,m){B.elementDblClick({data:o,index:m,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});l.append("rect").attr("height",0).attr("width",0.9*J.rangeBand()/j.length),D?(l.append("text").attr("text-anchor","middle"),n.select("text").text(function(o,m){return C(G(o,m))}).watchTransition(a,"discreteBar: bars text").attr("x",0.9*J.rangeBand()/2).attr("y",function(o,m){return G(o,m)<0?I(G(o,m))-I(0)+12:-4})):n.selectAll("text").remove(),n.attr("class",function(o,m){return G(o,m)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(o,m){return o.color||E(o,m)}).style("stroke",function(o,m){return o.color||E(o,m)}).select("rect").attr("class",A).watchTransition(a,"discreteBar: bars rect").attr("width",0.9*J.rangeBand()/j.length),n.watchTransition(a,"discreteBar: bars").attr("transform",function(o,m){var q=J(H(o,m))+0.05*J.rangeBand(),p=G(o,m)<0?I(0):I(0)-I(G(o,m))<1?I(0)-1:I(G(o,m));return"translate("+q+", "+p+")"}).select("rect").attr("height",function(o,m){return Math.max(Math.abs(I(G(o,m))-I(S&&S[0]||0))||1)}),P=J.copy(),O=I.copy()}),a.renderEnd("discreteBar immediate"),V}var U,T,S,R,Q,P,O,N={top:0,right:0,bottom:0,left:0},M=960,L=500,K=Math.floor(10000*Math.random()),J=d3.scale.ordinal(),I=d3.scale.linear(),H=function(c){return c.x},G=function(c){return c.y},F=[0],E=b.utils.defaultColor(),D=!1,C=d3.format(",.2f"),B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),A="discreteBar",z=250,a=b.utils.renderWatch(B,z);return V.dispatch=B,V.options=b.utils.optionsFunc.bind(V),V._options=Object.create({},{width:{get:function(){return M},set:function(c){M=c}},height:{get:function(){return L},set:function(c){L=c}},forceY:{get:function(){return F},set:function(c){F=c}},showValues:{get:function(){return D},set:function(c){D=c}},x:{get:function(){return H},set:function(c){H=c}},y:{get:function(){return G},set:function(c){G=c}},xScale:{get:function(){return J},set:function(c){J=c}},yScale:{get:function(){return I},set:function(c){I=c}},xDomain:{get:function(){return T},set:function(c){T=c}},yDomain:{get:function(){return S},set:function(c){S=c}},xRange:{get:function(){return R},set:function(c){R=c}},yRange:{get:function(){return Q},set:function(c){Q=c}},valueFormat:{get:function(){return C},set:function(c){C=c}},id:{get:function(){return K},set:function(c){K=c}},rectClass:{get:function(){return A},set:function(c){A=c}},margin:{get:function(){return N},set:function(c){N.top=void 0!==c.top?c.top:N.top,N.right=void 0!==c.right?c.right:N.right,N.bottom=void 0!==c.bottom?c.bottom:N.bottom,N.left=void 0!==c.left?c.left:N.left}},color:{get:function(){return E},set:function(c){E=b.utils.getColor(c)}},duration:{get:function(){return z},set:function(c){z=c,a.reset(z)}}}),b.utils.initOptions(V),V},b.models.discreteBarChart=function(){function L(c){return a.reset(),a.models(I),A&&a.models(H),z&&a.models(G),c.each(function(f){var e=d3.select(this);b.utils.initSVG(e);var d=b.utils.availableWidth(D,e,E),o=b.utils.availableHeight(C,e,E);if(L.update=function(){v.beforeUpdate(),e.transition().duration(u).call(L)},L.container=this,!(f&&f.length&&f.filter(function(h){return h.values.length}).length)){return b.utils.noData(L,e),L}e.selectAll(".nv-noData").remove(),K=I.xScale(),J=I.yScale().clamp(!0);var n=e.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([f]),m=n.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),k=m.append("defs"),j=n.select("g");m.append("g").attr("class","nv-x nv-axis"),m.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),m.append("g").attr("class","nv-barsWrap"),j.attr("transform","translate("+E.left+","+E.top+")"),y&&j.select(".nv-y.nv-axis").attr("transform","translate("+d+",0)"),I.width(d).height(o);var i=j.select(".nv-barsWrap").datum(f.filter(function(h){return !h.disabled}));if(i.transition().call(I),k.append("clipPath").attr("id","nv-x-label-clip-"+I.id()).append("rect"),j.select("#nv-x-label-clip-"+I.id()+" rect").attr("width",K.rangeBand()*(x?2:1)).attr("height",16).attr("x",-K.rangeBand()/(x?1:2)),A){H.scale(K)._ticks(b.utils.calcTicksX(d/100,f)).tickSize(-o,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+(J.range()[0]+(I.showValues()&&J.domain()[0]<0?16:0))+")"),j.select(".nv-x.nv-axis").call(H);var g=j.select(".nv-x.nv-axis").selectAll("g");x&&g.selectAll("text").attr("transform",function(l,h,p){return"translate(0,"+(p%2==0?"5":"17")+")"})}z&&(G.scale(J)._ticks(b.utils.calcTicksY(o/36,f)).tickSize(-d,0),j.select(".nv-y.nv-axis").call(G)),j.select(".nv-zeroLine line").attr("x1",0).attr("x2",d).attr("y1",J(0)).attr("y2",J(0))}),a.renderEnd("discreteBar chart immediate"),L}var K,J,I=b.models.discreteBar(),H=b.models.axis(),G=b.models.axis(),F=b.models.tooltip(),E={top:15,right:10,bottom:50,left:60},D=null,C=null,B=b.utils.getColor(),A=!0,z=!0,y=!1,x=!1,w=null,v=d3.dispatch("beforeUpdate","renderEnd"),u=250;H.orient("bottom").showMaxMin(!1).tickFormat(function(c){return c}),G.orient(y?"right":"left").tickFormat(d3.format(",.1f")),F.duration(0).headerEnabled(!1).valueFormatter(function(d,c){return G.tickFormat()(d,c)}).keyFormatter(function(d,c){return H.tickFormat()(d,c)});var a=b.utils.renderWatch(v,u);return I.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:L.x()(c.data),value:L.y()(c.data),color:c.color},F.data(c).hidden(!1)}),I.dispatch.on("elementMouseout.tooltip",function(){F.hidden(!0)}),I.dispatch.on("elementMousemove.tooltip",function(){F.position({top:d3.event.pageY,left:d3.event.pageX})()}),L.dispatch=v,L.discretebar=I,L.xAxis=H,L.yAxis=G,L.tooltip=F,L.options=b.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return D},set:function(c){D=c}},height:{get:function(){return C},set:function(c){C=c}},staggerLabels:{get:function(){return x},set:function(c){x=c}},showXAxis:{get:function(){return A},set:function(c){A=c}},showYAxis:{get:function(){return z},set:function(c){z=c}},noData:{get:function(){return w},set:function(c){w=c}},tooltips:{get:function(){return F.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),F.enabled(!!c)}},tooltipContent:{get:function(){return F.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),F.contentGenerator(c)}},margin:{get:function(){return E},set:function(c){E.top=void 0!==c.top?c.top:E.top,E.right=void 0!==c.right?c.right:E.right,E.bottom=void 0!==c.bottom?c.bottom:E.bottom,E.left=void 0!==c.left?c.left:E.left}},duration:{get:function(){return u},set:function(c){u=c,a.reset(u),I.duration(u),H.duration(u),G.duration(u)}},color:{get:function(){return B},set:function(c){B=b.utils.getColor(c),I.color(B)}},rightAlignYAxis:{get:function(){return y},set:function(c){y=c,G.orient(c?"right":"left")}}}),b.utils.inheritOptions(L,I),b.utils.initOptions(L),L},b.models.distribution=function(){function x(c){return a.reset(),c.each(function(d){var f=(u-("x"===s?v.left+v.right:v.top+v.bottom),"x"==s?"y":"x"),e=d3.select(this);b.utils.initSVG(e),w=w||p;var m=e.selectAll("g.nv-distribution").data([d]),j=m.enter().append("g").attr("class","nvd3 nv-distribution"),i=(j.append("g"),m.select("g"));m.attr("transform","translate("+v.left+","+v.top+")");var h=i.selectAll("g.nv-dist").data(function(k){return k},function(k){return k.key});h.enter().append("g"),h.attr("class",function(l,k){return"nv-dist nv-series-"+k}).style("stroke",function(l,k){return q(l,k)});var g=h.selectAll("line.nv-dist"+s).data(function(k){return k.values});g.enter().append("line").attr(s+"1",function(l,k){return w(r(l,k))}).attr(s+"2",function(l,k){return w(r(l,k))}),a.transition(h.exit().selectAll("line.nv-dist"+s),"dist exit").attr(s+"1",function(l,k){return p(r(l,k))}).attr(s+"2",function(l,k){return p(r(l,k))}).style("stroke-opacity",0).remove(),g.attr("class",function(l,k){return"nv-dist"+s+" nv-dist"+s+"-"+k}).attr(f+"1",0).attr(f+"2",t),a.transition(g,"dist").attr(s+"1",function(l,k){return p(r(l,k))}).attr(s+"2",function(l,k){return p(r(l,k))}),w=p.copy()}),a.renderEnd("distribution immediate"),x}var w,v={top:0,right:0,bottom:0,left:0},u=400,t=8,s="x",r=function(c){return c[s]},q=b.utils.defaultColor(),p=d3.scale.linear(),o=250,n=d3.dispatch("renderEnd"),a=b.utils.renderWatch(n,o);return x.options=b.utils.optionsFunc.bind(x),x.dispatch=n,x.margin=function(c){return arguments.length?(v.top="undefined"!=typeof c.top?c.top:v.top,v.right="undefined"!=typeof c.right?c.right:v.right,v.bottom="undefined"!=typeof c.bottom?c.bottom:v.bottom,v.left="undefined"!=typeof c.left?c.left:v.left,x):v},x.width=function(c){return arguments.length?(u=c,x):u},x.axis=function(c){return arguments.length?(s=c,x):s},x.size=function(c){return arguments.length?(t=c,x):t},x.getData=function(c){return arguments.length?(r=d3.functor(c),x):r},x.scale=function(c){return arguments.length?(p=c,x):p},x.color=function(d){return arguments.length?(q=b.utils.getColor(d),x):q},x.duration=function(c){return arguments.length?(o=c,a.reset(o),x):o},x},b.models.furiousLegend=function(){function B(e){function d(g,f){return"furious"!=a?"#000":q?g.disengaged?w(g,f):"#fff":q?void 0:g.disabled?w(g,f):"#fff"}function c(g,f){return q&&"furious"==a?g.disengaged?"#fff":w(g,f):g.disabled?"#fff":w(g,f)}return e.each(function(Z){var Y=z-A.left-A.right,T=d3.select(this);b.utils.initSVG(T);var S=T.selectAll("g.nv-legend").data([Z]),Q=(S.enter().append("g").attr("class","nvd3 nv-legend").append("g"),S.select("g"));S.attr("transform","translate("+A.left+","+A.top+")");var O,o=Q.selectAll(".nv-series").data(function(C){return"furious"!=a?C:C.filter(function(D){return q?!0:!D.disengaged})}),m=o.enter().append("g").attr("class","nv-series");if("classic"==a){m.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),O=o.select("circle")}else{if("furious"==a){m.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),O=o.select("rect"),m.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var k=o.select(".nv-check-box");k.each(function(D,C){d3.select(this).selectAll("path").attr("stroke",d(D,C))})}}m.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var i=o.select("text.nv-legend-text");o.on("mouseover",function(D,C){p.legendMouseover(D,C)}).on("mouseout",function(D,C){p.legendMouseout(D,C)}).on("click",function(D,C){p.legendClick(D,C);var F=o.data();if(s){if("classic"==a){r?(F.forEach(function(G){G.disabled=!0}),D.disabled=!1):(D.disabled=!D.disabled,F.every(function(G){return G.disabled})&&F.forEach(function(G){G.disabled=!1}))}else{if("furious"==a){if(q){D.disengaged=!D.disengaged,D.userDisabled=void 0==D.userDisabled?!!D.disabled:D.userDisabled,D.disabled=D.disengaged||D.userDisabled}else{if(!q){D.disabled=!D.disabled,D.userDisabled=D.disabled;var E=F.filter(function(G){return !G.disengaged});E.every(function(G){return G.userDisabled})&&F.forEach(function(G){G.disabled=G.userDisabled=!1})}}}}p.stateChange({disabled:F.map(function(G){return !!G.disabled}),disengaged:F.map(function(G){return !!G.disengaged})})}}).on("dblclick",function(D,C){if(("furious"!=a||!q)&&(p.legendDblclick(D,C),s)){var E=o.data();E.forEach(function(F){F.disabled=!0,"furious"==a&&(F.userDisabled=F.disabled)}),D.disabled=!1,"furious"==a&&(D.userDisabled=D.disabled),p.stateChange({disabled:E.map(function(F){return !!F.disabled})})}}),o.classed("nv-disabled",function(C){return C.userDisabled}),o.exit().remove(),i.attr("fill",d).text(x);var X;switch(a){case"furious":X=23;break;case"classic":X=20}if(v){var W=[];o.each(function(){var C,E=d3.select(this).select("text");try{if(C=E.node().getComputedTextLength(),0>=C){throw Error()}}catch(D){C=b.utils.calcApproxTextWidth(E)}W.push(C+u)});for(var V=0,U=0,R=[];Y>U&&V<W.length;){R[V]=W[V],U+=W[V++]}for(0===V&&(V=1);U>Y&&V>1;){R=[],V--;for(var P=0;P<W.length;P++){W[P]>(R[P%V]||0)&&(R[P%V]=W[P])}U=R.reduce(function(D,C){return D+C})}for(var N=[],n=0,l=0;V>n;n++){N[n]=l,l+=R[n]}o.attr("transform",function(D,C){return"translate("+N[C%V]+","+(5+Math.floor(C/V)*X)+")"}),t?Q.attr("transform","translate("+(z-A.right-U)+","+A.top+")"):Q.attr("transform","translate(0,"+A.top+")"),y=A.top+A.bottom+Math.ceil(W.length/V)*X}else{var j,h=5,g=5,f=0;o.attr("transform",function(){var C=d3.select(this).select("text").node().getComputedTextLength()+u;return j=g,z<A.left+A.right+j+C&&(g=j=5,h+=X),g+=C,g>f&&(f=g),"translate("+j+","+h+")"}),Q.attr("transform","translate("+(z-A.right-f)+","+A.top+")"),y=A.top+A.bottom+h+15}"furious"==a&&O.attr("width",function(D,C){return i[0][C].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),O.style("fill",c).style("stroke",function(D,C){return D.color||w(D,C)})}),B}var A={top:5,right:0,bottom:5,left:0},z=400,y=20,x=function(c){return c.key},w=b.utils.getColor(),v=!0,u=28,t=!0,s=!0,r=!1,q=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),a="classic";return B.dispatch=p,B.options=b.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return z},set:function(c){z=c}},height:{get:function(){return y},set:function(c){y=c}},key:{get:function(){return x},set:function(c){x=c}},align:{get:function(){return v},set:function(c){v=c}},rightAlign:{get:function(){return t},set:function(c){t=c}},padding:{get:function(){return u},set:function(c){u=c}},updateState:{get:function(){return s},set:function(c){s=c}},radioButtonMode:{get:function(){return r},set:function(c){r=c}},expanded:{get:function(){return q},set:function(c){q=c}},vers:{get:function(){return a},set:function(c){a=c}},margin:{get:function(){return A},set:function(c){A.top=void 0!==c.top?c.top:A.top,A.right=void 0!==c.right?c.right:A.right,A.bottom=void 0!==c.bottom?c.bottom:A.bottom,A.left=void 0!==c.left?c.left:A.left}},color:{get:function(){return w},set:function(c){w=b.utils.getColor(c)}}}),b.utils.initOptions(B),B},b.models.historicalBar=function(){function R(c){return c.each(function(j){a.reset(),I=d3.select(this);var k=b.utils.availableWidth(L,I,M),i=b.utils.availableHeight(K,I,M);b.utils.initSVG(I),H.domain(Q||d3.extent(j[0].values.map(F).concat(D))),H.range(B?O||[0.5*k/j[0].values.length,k*(j[0].values.length-0.5)/j[0].values.length]:O||[0,k]),G.domain(P||d3.extent(j[0].values.map(E).concat(C))).range(N||[i,0]),H.domain()[0]===H.domain()[1]&&H.domain(H.domain()[0]?[H.domain()[0]-0.01*H.domain()[0],H.domain()[1]+0.01*H.domain()[1]]:[-1,1]),G.domain()[0]===G.domain()[1]&&G.domain(G.domain()[0]?[G.domain()[0]+0.01*G.domain()[0],G.domain()[1]-0.01*G.domain()[1]]:[-1,1]);var h=I.selectAll("g.nv-wrap.nv-historicalBar-"+J).data([j[0].values]),g=h.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+J),f=g.append("defs"),e=g.append("g"),d=h.select("g");e.append("g").attr("class","nv-bars"),h.attr("transform","translate("+M.left+","+M.top+")"),I.on("click",function(n,m){y.chartClick({data:n,index:m,pos:d3.event,id:J})}),f.append("clipPath").attr("id","nv-chart-clip-path-"+J).append("rect"),h.select("#nv-chart-clip-path-"+J+" rect").attr("width",k).attr("height",i),d.attr("clip-path",A?"url(#nv-chart-clip-path-"+J+")":"");var l=h.select(".nv-bars").selectAll(".nv-bar").data(function(m){return m},function(n,m){return F(n,m)});l.exit().remove(),l.enter().append("rect").attr("x",0).attr("y",function(m,n){return b.utils.NaNtoZero(G(Math.max(0,E(m,n))))}).attr("height",function(m,n){return b.utils.NaNtoZero(Math.abs(G(E(m,n))-G(0)))}).attr("transform",function(m,n){return"translate("+(H(F(m,n))-k/j[0].values.length*0.45)+",0)"}).on("mouseover",function(n,m){x&&(d3.select(this).classed("hover",!0),y.elementMouseover({data:n,index:m,color:d3.select(this).style("fill")}))}).on("mouseout",function(n,m){x&&(d3.select(this).classed("hover",!1),y.elementMouseout({data:n,index:m,color:d3.select(this).style("fill")}))}).on("mousemove",function(n,m){x&&y.elementMousemove({data:n,index:m,color:d3.select(this).style("fill")})}).on("click",function(n,m){x&&(y.elementClick({data:n,index:m,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(n,m){x&&(y.elementDblClick({data:n,index:m,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),l.attr("fill",function(n,m){return z(n,m)}).attr("class",function(n,m,o){return(E(n,m)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+o+"-"+m}).watchTransition(a,"bars").attr("transform",function(m,n){return"translate("+(H(F(m,n))-k/j[0].values.length*0.45)+",0)"}).attr("width",k/j[0].values.length*0.9),l.watchTransition(a,"bars").attr("y",function(m,o){var n=E(m,o)<0?G(0):G(0)-G(E(m,o))<1?G(0)-1:G(E(m,o));return b.utils.NaNtoZero(n)}).attr("height",function(m,n){return b.utils.NaNtoZero(Math.max(Math.abs(G(E(m,n))-G(0)),1))})}),a.renderEnd("historicalBar immediate"),R}var Q,P,O,N,M={top:0,right:0,bottom:0,left:0},L=null,K=null,J=Math.floor(10000*Math.random()),I=null,H=d3.scale.linear(),G=d3.scale.linear(),F=function(c){return c.x},E=function(c){return c.y},D=[],C=[0],B=!1,A=!0,z=b.utils.defaultColor(),y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=!0,a=b.utils.renderWatch(y,0);return R.highlightPoint=function(d,c){I.select(".nv-bars .nv-bar-0-"+d).classed("hover",c)},R.clearHighlights=function(){I.select(".nv-bars .nv-bar.hover").classed("hover",!1)},R.dispatch=y,R.options=b.utils.optionsFunc.bind(R),R._options=Object.create({},{width:{get:function(){return L},set:function(c){L=c}},height:{get:function(){return K},set:function(c){K=c}},forceX:{get:function(){return D},set:function(c){D=c}},forceY:{get:function(){return C},set:function(c){C=c}},padData:{get:function(){return B},set:function(c){B=c}},x:{get:function(){return F},set:function(c){F=c}},y:{get:function(){return E},set:function(c){E=c}},xScale:{get:function(){return H},set:function(c){H=c}},yScale:{get:function(){return G},set:function(c){G=c}},xDomain:{get:function(){return Q},set:function(c){Q=c}},yDomain:{get:function(){return P},set:function(c){P=c}},xRange:{get:function(){return O},set:function(c){O=c}},yRange:{get:function(){return N},set:function(c){N=c}},clipEdge:{get:function(){return A},set:function(c){A=c}},id:{get:function(){return J},set:function(c){J=c}},interactive:{get:function(){return x},set:function(c){x=c}},margin:{get:function(){return M},set:function(c){M.top=void 0!==c.top?c.top:M.top,M.right=void 0!==c.right?c.right:M.right,M.bottom=void 0!==c.bottom?c.bottom:M.bottom,M.left=void 0!==c.left?c.left:M.left}},color:{get:function(){return z},set:function(c){z=b.utils.getColor(c)}}}),b.utils.initOptions(R),R},b.models.historicalBarChart=function(X){function W(c){return c.each(function(h){a.reset(),a.models(T),I&&a.models(S),H&&a.models(R);var i=d3.select(this),g=this;b.utils.initSVG(i);var f=b.utils.availableWidth(L,i,N),e=b.utils.availableHeight(K,i,N);if(W.update=function(){i.transition().duration(A).call(W)},W.container=this,E.disabled=h.map(function(k){return !!k.disabled}),!D){var d;D={};for(d in E){D[d]=E[d] instanceof Array?E[d].slice(0):E[d]}}if(!(h&&h.length&&h.filter(function(k){return k.values.length}).length)){return b.utils.noData(W,i),W}i.selectAll(".nv-noData").remove(),V=T.xScale(),U=T.yScale();var n=i.selectAll("g.nv-wrap.nv-historicalBarChart").data([h]),m=n.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),l=n.select("g");m.append("g").attr("class","nv-x nv-axis"),m.append("g").attr("class","nv-y nv-axis"),m.append("g").attr("class","nv-barsWrap"),m.append("g").attr("class","nv-legendWrap"),m.append("g").attr("class","nv-interactive"),J&&(Q.width(f),l.select(".nv-legendWrap").datum(h).call(Q),N.top!=Q.height()&&(N.top=Q.height(),e=b.utils.availableHeight(K,i,N)),n.select(".nv-legendWrap").attr("transform","translate(0,"+-N.top+")")),n.attr("transform","translate("+N.left+","+N.top+")"),G&&l.select(".nv-y.nv-axis").attr("transform","translate("+f+",0)"),F&&(P.width(f).height(e).margin({left:N.left,top:N.top}).svgContainer(i).xScale(V),n.select(".nv-interactive").call(P)),T.width(f).height(e).color(h.map(function(o,k){return o.color||M(o,k)}).filter(function(o,k){return !h[k].disabled}));var j=l.select(".nv-barsWrap").datum(h.filter(function(k){return !k.disabled}));j.transition().call(T),I&&(S.scale(V)._ticks(b.utils.calcTicksX(f/100,h)).tickSize(-e,0),l.select(".nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")"),l.select(".nv-x.nv-axis").transition().call(S)),H&&(R.scale(U)._ticks(b.utils.calcTicksY(e/36,h)).tickSize(-f,0),l.select(".nv-y.nv-axis").transition().call(R)),P.dispatch.on("elementMousemove",function(k){T.clearHighlights();var s,q,p,t=[];h.filter(function(u,o){return u.seriesIndex=o,!u.disabled}).forEach(function(u){q=b.interactiveBisect(u.values,k.pointXValue,W.x()),T.highlightPoint(q,!0);var o=u.values[q];void 0!==o&&(void 0===s&&(s=o),void 0===p&&(p=W.xScale()(W.x()(o,q))),t.push({key:u.key,value:W.y()(o,q),color:M(u,u.seriesIndex),data:u.values[q]}))});var r=S.tickFormat()(W.x()(s,q));P.tooltip.position({left:p+N.left,top:k.mouseY+N.top}).chartContainer(g.parentNode).valueFormatter(function(o){return R.tickFormat()(o)}).data({value:r,index:q,series:t})(),P.renderGuideLine(p)}),P.dispatch.on("elementMouseout",function(){B.tooltipHide(),T.clearHighlights()}),Q.dispatch.on("legendClick",function(k){k.disabled=!k.disabled,h.filter(function(o){return !o.disabled}).length||h.map(function(o){return o.disabled=!1,n.selectAll(".nv-series").classed("disabled",!1),o}),E.disabled=h.map(function(o){return !!o.disabled}),B.stateChange(E),c.transition().call(W)}),Q.dispatch.on("legendDblclick",function(k){h.forEach(function(o){o.disabled=!0}),k.disabled=!1,E.disabled=h.map(function(o){return !!o.disabled}),B.stateChange(E),W.update()}),B.on("changeState",function(k){"undefined"!=typeof k.disabled&&(h.forEach(function(o,p){o.disabled=k.disabled[p]}),E.disabled=k.disabled),W.update()})}),a.renderEnd("historicalBarChart immediate"),W}var V,U,T=X||b.models.historicalBar(),S=b.models.axis(),R=b.models.axis(),Q=b.models.legend(),P=b.interactiveGuideline(),O=b.models.tooltip(),N={top:30,right:90,bottom:50,left:90},M=b.utils.defaultColor(),L=null,K=null,J=!1,I=!0,H=!0,G=!1,F=!1,E={},D=null,C=null,B=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),A=250;S.orient("bottom").tickPadding(7),R.orient(G?"right":"left"),O.duration(0).headerEnabled(!1).valueFormatter(function(d,c){return R.tickFormat()(d,c)}).headerFormatter(function(d,c){return S.tickFormat()(d,c)});var a=b.utils.renderWatch(B,0);return T.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:W.x()(c.data),value:W.y()(c.data),color:c.color},O.data(c).hidden(!1)}),T.dispatch.on("elementMouseout.tooltip",function(){O.hidden(!0)}),T.dispatch.on("elementMousemove.tooltip",function(){O.position({top:d3.event.pageY,left:d3.event.pageX})()}),W.dispatch=B,W.bars=T,W.legend=Q,W.xAxis=S,W.yAxis=R,W.interactiveLayer=P,W.tooltip=O,W.options=b.utils.optionsFunc.bind(W),W._options=Object.create({},{width:{get:function(){return L},set:function(c){L=c}},height:{get:function(){return K},set:function(c){K=c}},showLegend:{get:function(){return J},set:function(c){J=c}},showXAxis:{get:function(){return I},set:function(c){I=c}},showYAxis:{get:function(){return H},set:function(c){H=c}},defaultState:{get:function(){return D},set:function(c){D=c}},noData:{get:function(){return C},set:function(c){C=c}},tooltips:{get:function(){return O.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),O.enabled(!!c)}},tooltipContent:{get:function(){return O.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),O.contentGenerator(c)}},margin:{get:function(){return N},set:function(c){N.top=void 0!==c.top?c.top:N.top,N.right=void 0!==c.right?c.right:N.right,N.bottom=void 0!==c.bottom?c.bottom:N.bottom,N.left=void 0!==c.left?c.left:N.left}},color:{get:function(){return M},set:function(c){M=b.utils.getColor(c),Q.color(M),T.color(M)}},duration:{get:function(){return A},set:function(c){A=c,a.reset(A),R.duration(A),S.duration(A)}},rightAlignYAxis:{get:function(){return G},set:function(c){G=c,R.orient(c?"right":"left")}},useInteractiveGuideline:{get:function(){return F},set:function(c){F=c,c===!0&&W.interactive(!1)}}}),b.utils.inheritOptions(W,T),b.utils.initOptions(W),W},b.models.ohlcBarChart=function(){var a=b.models.historicalBarChart(b.models.ohlcBar());return a.useInteractiveGuideline(!0),a.interactiveLayer.tooltip.contentGenerator(function(e){var g=e.series[0].data,f=g.open<g.close?"2ca02c":"d62728";return'<h3 style="color: #'+f+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(g.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(g.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(g.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(g.low)+"</td></tr></table>"}),a},b.models.candlestickBarChart=function(){var a=b.models.historicalBarChart(b.models.candlestickBar());return a.useInteractiveGuideline(!0),a.interactiveLayer.tooltip.contentGenerator(function(e){var g=e.series[0].data,f=g.open<g.close?"2ca02c":"d62728";return'<h3 style="color: #'+f+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(g.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(g.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(g.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(g.low)+"</td></tr></table>"}),a},b.models.legend=function(){function B(f){function e(h,g){return"furious"!=a?"#000":q?h.disengaged?"#000":"#fff":q?void 0:(h.color||(h.color=w(h,g)),h.disabled?h.color:"#fff")}function d(h,g){return q&&"furious"==a&&h.disengaged?"#eee":h.color||w(h,g)}function c(g){return q&&"furious"==a?1:g.disabled?0:1}return f.each(function(af){var ae=z-A.left-A.right,ad=d3.select(this);b.utils.initSVG(ad);var Y=ad.selectAll("g.nv-legend").data([af]),W=Y.enter().append("g").attr("class","nvd3 nv-legend").append("g"),U=Y.select("g");Y.attr("transform","translate("+A.left+","+A.top+")");var S,Q,o=U.selectAll(".nv-series").data(function(g){return"furious"!=a?g:g.filter(function(C){return q?!0:!C.disengaged})}),m=o.enter().append("g").attr("class","nv-series");switch(a){case"furious":Q=23;break;case"classic":Q=20}if("classic"==a){m.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),S=o.select("circle")}else{if("furious"==a){m.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),S=o.select(".nv-legend-symbol"),m.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var ac=o.select(".nv-check-box");ac.each(function(C,g){d3.select(this).selectAll("path").attr("stroke",e(C,g))})}}m.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var ab=o.select("text.nv-legend-text");o.on("mouseover",function(C,g){p.legendMouseover(C,g)}).on("mouseout",function(C,g){p.legendMouseout(C,g)}).on("click",function(C,g){p.legendClick(C,g);var E=o.data();if(s){if("classic"==a){r?(E.forEach(function(F){F.disabled=!0}),C.disabled=!1):(C.disabled=!C.disabled,E.every(function(F){return F.disabled})&&E.forEach(function(F){F.disabled=!1}))}else{if("furious"==a){if(q){C.disengaged=!C.disengaged,C.userDisabled=void 0==C.userDisabled?!!C.disabled:C.userDisabled,C.disabled=C.disengaged||C.userDisabled}else{if(!q){C.disabled=!C.disabled,C.userDisabled=C.disabled;var D=E.filter(function(F){return !F.disengaged});D.every(function(F){return F.userDisabled})&&E.forEach(function(F){F.disabled=F.userDisabled=!1})}}}}p.stateChange({disabled:E.map(function(F){return !!F.disabled}),disengaged:E.map(function(F){return !!F.disengaged})})}}).on("dblclick",function(C,g){if(("furious"!=a||!q)&&(p.legendDblclick(C,g),s)){var D=o.data();D.forEach(function(E){E.disabled=!0,"furious"==a&&(E.userDisabled=E.disabled)}),C.disabled=!1,"furious"==a&&(C.userDisabled=C.disabled),p.stateChange({disabled:D.map(function(E){return !!E.disabled})})}}),o.classed("nv-disabled",function(g){return g.userDisabled}),o.exit().remove(),ab.attr("fill",e).text(x);var aa=0;if(v){var Z=[];o.each(function(){var g,D=d3.select(this).select("text");try{if(g=D.node().getComputedTextLength(),0>=g){throw Error()}}catch(C){g=b.utils.calcApproxTextWidth(D)}Z.push(g+u)});var X=0,V=[];for(aa=0;ae>aa&&X<Z.length;){V[X]=Z[X],aa+=Z[X++]}for(0===X&&(X=1);aa>ae&&X>1;){V=[],X--;for(var T=0;T<Z.length;T++){Z[T]>(V[T%X]||0)&&(V[T%X]=Z[T])}aa=V.reduce(function(C,g){return C+g})}for(var R=[],P=0,n=0;X>P;P++){R[P]=n,n+=V[P]}o.attr("transform",function(C,g){return"translate("+R[g%X]+","+(5+Math.floor(g/X)*Q)+")"}),t?U.attr("transform","translate("+(z-A.right-aa)+","+A.top+")"):U.attr("transform","translate(0,"+A.top+")"),y=A.top+A.bottom+Math.ceil(Z.length/X)*Q}else{var l,k=5,j=5,i=0;o.attr("transform",function(){var g=d3.select(this).select("text").node().getComputedTextLength()+u;return l=j,z<A.left+A.right+l+g&&(j=l=5,k+=Q),j+=g,j>i&&(i=j),l+i>aa&&(aa=l+i),"translate("+l+","+k+")"}),U.attr("transform","translate("+(z-A.right-i)+","+A.top+")"),y=A.top+A.bottom+k+15}if("furious"==a){S.attr("width",function(C,g){return ab[0][g].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),W.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);var h=U.select(".nv-legend-bg");h.transition().duration(300).attr("x",-Q).attr("width",aa+Q-12).attr("height",y+10).attr("y",-A.top-10).attr("opacity",q?1:0)}S.style("fill",d).style("fill-opacity",c).style("stroke",d)}),B}var A={top:5,right:0,bottom:5,left:0},z=400,y=20,x=function(c){return c.key},w=b.utils.getColor(),v=!0,u=32,t=!0,s=!0,r=!1,q=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),a="classic";return B.dispatch=p,B.options=b.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return z},set:function(c){z=c}},height:{get:function(){return y},set:function(c){y=c}},key:{get:function(){return x},set:function(c){x=c}},align:{get:function(){return v},set:function(c){v=c}},rightAlign:{get:function(){return t},set:function(c){t=c}},padding:{get:function(){return u},set:function(c){u=c}},updateState:{get:function(){return s},set:function(c){s=c}},radioButtonMode:{get:function(){return r},set:function(c){r=c}},expanded:{get:function(){return q},set:function(c){q=c}},vers:{get:function(){return a},set:function(c){a=c}},margin:{get:function(){return A},set:function(c){A.top=void 0!==c.top?c.top:A.top,A.right=void 0!==c.right?c.right:A.right,A.bottom=void 0!==c.bottom?c.bottom:A.bottom,A.left=void 0!==c.left?c.left:A.left}},color:{get:function(){return w},set:function(c){w=b.utils.getColor(c)}}}),b.utils.initOptions(B),B},b.models.line=function(){function P(c){return a.reset(),a.models(M),c.each(function(k){I=d3.select(this);var e=b.utils.availableWidth(K,I,L),o=b.utils.availableHeight(J,I,L);b.utils.initSVG(I),O=M.xScale(),N=M.yScale(),x=x||O,w=w||N;var m=I.selectAll("g.nv-wrap.nv-line").data([k]),l=m.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),j=l.append("defs"),i=l.append("g"),h=m.select("g");i.append("g").attr("class","nv-groups"),i.append("g").attr("class","nv-scatterWrap"),m.attr("transform","translate("+L.left+","+L.top+")"),M.width(e).height(o);var g=m.select(".nv-scatterWrap");g.call(M),j.append("clipPath").attr("id","nv-edge-clip-"+M.id()).append("rect"),m.select("#nv-edge-clip-"+M.id()+" rect").attr("width",e).attr("height",o>0?o:0),h.attr("clip-path",B?"url(#nv-edge-clip-"+M.id()+")":""),g.attr("clip-path",B?"url(#nv-edge-clip-"+M.id()+")":"");var f=m.select(".nv-groups").selectAll(".nv-group").data(function(p){return p},function(p){return p.key});f.enter().append("g").style("stroke-opacity",0.000001).style("stroke-width",function(p){return p.strokeWidth||H}).style("fill-opacity",0.000001),f.exit().remove(),f.attr("class",function(q,p){return(q.classed||"")+" nv-group nv-series-"+p}).classed("hover",function(p){return p.hover}).style("fill",function(q,p){return G(q,p)}).style("stroke",function(q,p){return G(q,p)}),f.watchTransition(a,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(p){return p.fillOpacity||0.5});var d=f.selectAll("path.nv-area").data(function(p){return C(p)?[p]:[]});d.enter().append("path").attr("class","nv-area").attr("d",function(p){return d3.svg.area().interpolate(A).defined(D).x(function(q,r){return b.utils.NaNtoZero(x(F(q,r)))}).y0(function(q,r){return b.utils.NaNtoZero(w(E(q,r)))}).y1(function(){return w(N.domain()[0]<=0?N.domain()[1]>=0?0:N.domain()[1]:N.domain()[0])}).apply(this,[p.values])}),f.exit().selectAll("path.nv-area").remove(),d.watchTransition(a,"line: areaPaths").attr("d",function(p){return d3.svg.area().interpolate(A).defined(D).x(function(q,r){return b.utils.NaNtoZero(O(F(q,r)))}).y0(function(q,r){return b.utils.NaNtoZero(N(E(q,r)))}).y1(function(){return N(N.domain()[0]<=0?N.domain()[1]>=0?0:N.domain()[1]:N.domain()[0])}).apply(this,[p.values])});var n=f.selectAll("path.nv-line").data(function(p){return[p.values]});n.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(A).defined(D).x(function(p,q){return b.utils.NaNtoZero(x(F(p,q)))}).y(function(p,q){return b.utils.NaNtoZero(w(E(p,q)))})),n.watchTransition(a,"line: linePaths").attr("d",d3.svg.line().interpolate(A).defined(D).x(function(p,q){return b.utils.NaNtoZero(O(F(p,q)))}).y(function(p,q){return b.utils.NaNtoZero(N(E(p,q)))})),x=O.copy(),w=N.copy()}),a.renderEnd("line immediate"),P}var O,N,M=b.models.scatter(),L={top:0,right:0,bottom:0,left:0},K=960,J=500,I=null,H=1.5,G=b.utils.defaultColor(),F=function(c){return c.x},E=function(c){return c.y},D=function(d,c){return !isNaN(E(d,c))&&null!==E(d,c)},C=function(c){return c.area},B=!1,A="linear",z=250,y=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");M.pointSize(16).pointDomain([16,256]);var x,w,a=b.utils.renderWatch(y,z);return P.dispatch=y,P.scatter=M,M.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),M.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),M.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),P.options=b.utils.optionsFunc.bind(P),P._options=Object.create({},{width:{get:function(){return K},set:function(c){K=c}},height:{get:function(){return J},set:function(c){J=c}},defined:{get:function(){return D},set:function(c){D=c}},interpolate:{get:function(){return A},set:function(c){A=c}},clipEdge:{get:function(){return B},set:function(c){B=c}},margin:{get:function(){return L},set:function(c){L.top=void 0!==c.top?c.top:L.top,L.right=void 0!==c.right?c.right:L.right,L.bottom=void 0!==c.bottom?c.bottom:L.bottom,L.left=void 0!==c.left?c.left:L.left}},duration:{get:function(){return z},set:function(c){z=c,a.reset(z),M.duration(z)}},isArea:{get:function(){return C},set:function(c){C=d3.functor(c)}},x:{get:function(){return F},set:function(c){F=c,M.x(c)}},y:{get:function(){return E},set:function(c){E=c,M.y(c)}},color:{get:function(){return G},set:function(c){G=b.utils.getColor(c),M.color(G)}}}),b.utils.inheritOptions(P,M),b.utils.initOptions(P),P},b.models.lineChart=function(){function Z(c){return B.reset(),B.models(W),L&&B.models(V),J&&B.models(U),c.each(function(g){var k=d3.select(this),h=this;b.utils.initSVG(k);var f=b.utils.availableWidth(O,k,Q),e=b.utils.availableHeight(N,k,Q);if(Z.update=function(){0===C?k.call(Z):k.transition().duration(C).call(Z)},Z.container=this,G.setter(K(g),Z.update).getter(a(g)).update(),G.disabled=g.map(function(j){return !!j.disabled}),!F){var d;F={};for(d in G){F[d]=G[d] instanceof Array?G[d].slice(0):G[d]}}if(!(g&&g.length&&g.filter(function(j){return j.values.length}).length)){return b.utils.noData(Z,k),Z}k.selectAll(".nv-noData").remove(),Y=W.xScale(),X=W.yScale();var n=k.selectAll("g.nv-wrap.nv-lineChart").data([g]),m=n.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),l=n.select("g");m.append("rect").style("opacity",0),m.append("g").attr("class","nv-x nv-axis"),m.append("g").attr("class","nv-y nv-axis"),m.append("g").attr("class","nv-linesWrap"),m.append("g").attr("class","nv-legendWrap"),m.append("g").attr("class","nv-interactive"),l.select("rect").attr("width",f).attr("height",e>0?e:0),M&&(T.width(f),l.select(".nv-legendWrap").datum(g).call(T),Q.top!=T.height()&&(Q.top=T.height(),e=b.utils.availableHeight(N,k,Q)),n.select(".nv-legendWrap").attr("transform","translate(0,"+-Q.top+")")),n.attr("transform","translate("+Q.left+","+Q.top+")"),I&&l.select(".nv-y.nv-axis").attr("transform","translate("+f+",0)"),H&&(S.width(f).height(e).margin({left:Q.left,top:Q.top}).svgContainer(k).xScale(Y),n.select(".nv-interactive").call(S)),W.width(f).height(e).color(g.map(function(o,j){return o.color||P(o,j)}).filter(function(o,j){return !g[j].disabled}));var i=l.select(".nv-linesWrap").datum(g.filter(function(j){return !j.disabled}));i.call(W),L&&(V.scale(Y)._ticks(b.utils.calcTicksX(f/100,g)).tickSize(-e,0),l.select(".nv-x.nv-axis").attr("transform","translate(0,"+X.range()[0]+")"),l.select(".nv-x.nv-axis").call(V)),J&&(U.scale(X)._ticks(b.utils.calcTicksY(e/36,g)).tickSize(-f,0),l.select(".nv-y.nv-axis").call(U)),T.dispatch.on("stateChange",function(j){for(var o in j){G[o]=j[o]}D.stateChange(G),Z.update()}),S.dispatch.on("elementMousemove",function(A){W.clearHighlights();var z,y,x,w=[];if(g.filter(function(p,o){return p.seriesIndex=o,!p.disabled}).forEach(function(r,q){y=b.interactiveBisect(r.values,A.pointXValue,Z.x());var p=r.values[y],o=Z.y()(p,y);null!=o&&W.highlightPoint(q,y,!0),void 0!==p&&(void 0===z&&(z=p),void 0===x&&(x=Z.xScale()(Z.x()(p,y))),w.push({key:r.key,value:o,color:P(r,r.seriesIndex)}))}),w.length>2){var v=Z.yScale().invert(A.mouseY),u=Math.abs(Z.yScale().domain()[0]-Z.yScale().domain()[1]),t=0.03*u,j=b.nearestValueIndex(w.map(function(o){return o.value}),v,t);null!==j&&(w[j].highlight=!0)}var aa=V.tickFormat()(Z.x()(z,y));S.tooltip.position({left:A.mouseX+Q.left,top:A.mouseY+Q.top}).chartContainer(h.parentNode).valueFormatter(function(o){return null==o?"N/A":U.tickFormat()(o)}).data({value:aa,index:y,series:w})(),S.renderGuideLine(x)}),S.dispatch.on("elementClick",function(p){var o,j=[];g.filter(function(r,q){return r.seriesIndex=q,!r.disabled}).forEach(function(t){var s=b.interactiveBisect(t.values,p.pointXValue,Z.x()),r=t.values[s];if("undefined"!=typeof r){"undefined"==typeof o&&(o=Z.xScale()(Z.x()(r,s)));var q=Z.yScale()(Z.y()(r,s));j.push({point:r,pointIndex:s,pos:[o,q],seriesIndex:t.seriesIndex,series:t})}}),W.dispatch.elementClick(j)}),S.dispatch.on("elementMouseout",function(){W.clearHighlights()}),D.on("changeState",function(j){"undefined"!=typeof j.disabled&&g.length===j.disabled.length&&(g.forEach(function(o,p){o.disabled=j.disabled[p]}),G.disabled=j.disabled),Z.update()})}),B.renderEnd("lineChart immediate"),Z}var Y,X,W=b.models.line(),V=b.models.axis(),U=b.models.axis(),T=b.models.legend(),S=b.interactiveGuideline(),R=b.models.tooltip(),Q={top:30,right:20,bottom:50,left:60},P=b.utils.defaultColor(),O=null,N=null,M=!0,L=!0,J=!0,I=!1,H=!1,G=b.utils.state(),F=null,E=null,D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),C=250;V.orient("bottom").tickPadding(7),U.orient(I?"right":"left"),R.valueFormatter(function(d,c){return U.tickFormat()(d,c)}).headerFormatter(function(d,c){return V.tickFormat()(d,c)});var B=b.utils.renderWatch(D,C),a=function(c){return function(){return{active:c.map(function(d){return !d.disabled})}}},K=function(c){return function(d){void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};return W.dispatch.on("elementMouseover.tooltip",function(c){R.data(c).position(c.pos).hidden(!1)}),W.dispatch.on("elementMouseout.tooltip",function(){R.hidden(!0)}),Z.dispatch=D,Z.lines=W,Z.legend=T,Z.xAxis=V,Z.yAxis=U,Z.interactiveLayer=S,Z.tooltip=R,Z.dispatch=D,Z.options=b.utils.optionsFunc.bind(Z),Z._options=Object.create({},{width:{get:function(){return O},set:function(c){O=c}},height:{get:function(){return N},set:function(c){N=c}},showLegend:{get:function(){return M},set:function(c){M=c}},showXAxis:{get:function(){return L},set:function(c){L=c}},showYAxis:{get:function(){return J},set:function(c){J=c}},defaultState:{get:function(){return F},set:function(c){F=c}},noData:{get:function(){return E},set:function(c){E=c}},tooltips:{get:function(){return R.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),R.enabled(!!c)}},tooltipContent:{get:function(){return R.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),R.contentGenerator(c)}},margin:{get:function(){return Q},set:function(c){Q.top=void 0!==c.top?c.top:Q.top,Q.right=void 0!==c.right?c.right:Q.right,Q.bottom=void 0!==c.bottom?c.bottom:Q.bottom,Q.left=void 0!==c.left?c.left:Q.left}},duration:{get:function(){return C},set:function(c){C=c,B.reset(C),W.duration(C),V.duration(C),U.duration(C)}},color:{get:function(){return P},set:function(c){P=b.utils.getColor(c),T.color(P),W.color(P)}},rightAlignYAxis:{get:function(){return I},set:function(c){I=c,U.orient(I?"right":"left")}},useInteractiveGuideline:{get:function(){return H},set:function(c){H=c,H&&(W.interactive(!1),W.useVoronoi(!1))}}}),b.utils.inheritOptions(Z,W),b.utils.initOptions(Z),Z},b.models.linePlusBarChart=function(){function aI(c){return c.each(function(s){function r(D){var v=+("e"==D),F=v?1:-1,E=g/3;return"M"+0.5*F+","+E+"A6,6 0 0 "+v+" "+6.5*F+","+(E+6)+"V"+(2*E-6)+"A6,6 0 0 "+v+" "+0.5*F+","+2*E+"ZM"+2.5*F+","+(E+8)+"V"+(2*E-8)+"M"+4.5*F+","+(E+8)+"V"+(2*E-8)}function m(){ao.empty()||ao.extent(aa),q.data([ao.empty()?aF.domain():aa]).each(function(D){var v=aF(D[0])-aF.range()[0],E=aF.range()[1]-aF(D[1]);d3.select(this).select(".left").attr("width",0>v?0:v),d3.select(this).select(".right").attr("x",aF(D[1])).attr("width",0>E?0:E)})}function k(){aa=ao.empty()?null:ao.extent(),aH=ao.empty()?aF.domain():ao.extent(),Y.brush({extent:aH,brush:ao}),m(),ay.width(i).height(h).color(s.map(function(F,E){return F.color||ag(F,E)}).filter(function(F,E){return !s[E].disabled&&s[E].bar})),aA.width(i).height(h).color(s.map(function(F,E){return F.color||ag(F,E)}).filter(function(F,E){return !s[E].disabled&&!s[E].bar}));var v=z.select(".nv-focus .nv-barsWrap").datum(e.length?e.map(function(E){return{key:E.key,values:E.values.filter(function(G,F){return ay.x()(G,F)>=aH[0]&&ay.x()(G,F)<=aH[1]})}}):[{values:[]}]),D=z.select(".nv-focus .nv-linesWrap").datum(l[0].disabled?[{values:[]}]:l.map(function(E){return{area:E.area,fillOpacity:E.fillOpacity,key:E.key,values:E.values.filter(function(G,F){return aA.x()(G,F)>=aH[0]&&aA.x()(G,F)<=aH[1]})}}));aG=e.length?ay.xScale():aA.xScale(),aw.scale(aG)._ticks(b.utils.calcTicksX(i/100,s)).tickSize(-h,0),aw.domain([Math.ceil(aH[0]),Math.floor(aH[1])]),z.select(".nv-x.nv-axis").transition().duration(X).call(aw),v.transition().duration(X).call(ay),D.transition().duration(X).call(aA),z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+aE.range()[0]+")"),au.scale(aE)._ticks(b.utils.calcTicksY(h/36,s)).tickSize(-i,0),at.scale(aD)._ticks(b.utils.calcTicksY(h/36,s)).tickSize(e.length?0:-i,0),z.select(".nv-focus .nv-y1.nv-axis").style("opacity",e.length?1:0),z.select(".nv-focus .nv-y2.nv-axis").style("opacity",l.length&&!l[0].disabled?1:0).attr("transform","translate("+aG.range()[1]+",0)"),z.select(".nv-focus .nv-y1.nv-axis").transition().duration(X).call(au),z.select(".nv-focus .nv-y2.nv-axis").transition().duration(X).call(at)}var j=d3.select(this);b.utils.initSVG(j);var i=b.utils.availableWidth(ak,j,am),h=b.utils.availableHeight(aj,j,am)-(ae?ab:0),g=ab-al.top-al.bottom;if(aI.update=function(){j.transition().duration(X).call(aI)},aI.container=this,W.setter(a(s),aI.update).getter(S(s)).update(),W.disabled=s.map(function(v){return !!v.disabled}),!V){var f;V={};for(f in W){V[f]=W[f] instanceof Array?W[f].slice(0):W[f]}}if(!(s&&s.length&&s.filter(function(v){return v.values.length}).length)){return b.utils.noData(aI,j),aI}j.selectAll(".nv-noData").remove();var e=s.filter(function(v){return !v.disabled&&v.bar}),l=s.filter(function(v){return !v.bar});aG=ay.xScale(),aF=av.scale(),aE=ay.yScale(),aD=aA.yScale(),aC=ax.yScale(),aB=az.yScale();var B=s.filter(function(v){return !v.disabled&&v.bar}).map(function(v){return v.values.map(function(E,D){return{x:ai(E,D),y:ah(E,D)}})}),y=s.filter(function(v){return !v.disabled&&!v.bar}).map(function(v){return v.values.map(function(E,D){return{x:ai(E,D),y:ah(E,D)}})});aG.range([0,i]),aF.domain(d3.extent(d3.merge(B.concat(y)),function(v){return v.x})).range([0,i]);var n=j.selectAll("g.nv-wrap.nv-linePlusBar").data([s]),t=n.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),z=n.select("g");t.append("g").attr("class","nv-legendWrap");var o=t.append("g").attr("class","nv-focus");o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y1 nv-axis"),o.append("g").attr("class","nv-y2 nv-axis"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-linesWrap");var u=t.append("g").attr("class","nv-context");if(u.append("g").attr("class","nv-x nv-axis"),u.append("g").attr("class","nv-y1 nv-axis"),u.append("g").attr("class","nv-y2 nv-axis"),u.append("g").attr("class","nv-barsWrap"),u.append("g").attr("class","nv-linesWrap"),u.append("g").attr("class","nv-brushBackground"),u.append("g").attr("class","nv-x nv-brush"),af){var A=ap.align()?i/2:i,p=ap.align()?A:0;ap.width(A),z.select(".nv-legendWrap").datum(s.map(function(v){return v.originalKey=void 0===v.originalKey?v.key:v.originalKey,v.key=v.originalKey+(v.bar?U:T),v})).call(ap),am.top!=ap.height()&&(am.top=ap.height(),h=b.utils.availableHeight(aj,j,am)-ab),z.select(".nv-legendWrap").attr("transform","translate("+p+","+-am.top+")")}n.attr("transform","translate("+am.left+","+am.top+")"),z.select(".nv-context").style("display",ae?"initial":"none"),ax.width(i).height(g).color(s.map(function(D,v){return D.color||ag(D,v)}).filter(function(D,v){return !s[v].disabled&&s[v].bar})),az.width(i).height(g).color(s.map(function(D,v){return D.color||ag(D,v)}).filter(function(D,v){return !s[v].disabled&&!s[v].bar}));var w=z.select(".nv-context .nv-barsWrap").datum(e.length?e:[{values:[]}]),C=z.select(".nv-context .nv-linesWrap").datum(l[0].disabled?[{values:[]}]:l);z.select(".nv-context").attr("transform","translate(0,"+(h+am.bottom+al.top)+")"),w.transition().call(ax),C.transition().call(az),ac&&(av._ticks(b.utils.calcTicksX(i/100,s)).tickSize(-g,0),z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+aC.range()[0]+")"),z.select(".nv-context .nv-x.nv-axis").transition().call(av)),ad&&(ar.scale(aC)._ticks(g/36).tickSize(-i,0),aq.scale(aB)._ticks(g/36).tickSize(e.length?0:-i,0),z.select(".nv-context .nv-y3.nv-axis").style("opacity",e.length?1:0).attr("transform","translate(0,"+aF.range()[0]+")"),z.select(".nv-context .nv-y2.nv-axis").style("opacity",l.length?1:0).attr("transform","translate("+aF.range()[1]+",0)"),z.select(".nv-context .nv-y1.nv-axis").transition().call(ar),z.select(".nv-context .nv-y2.nv-axis").transition().call(aq)),ao.x(aF).on("brush",k),aa&&ao.extent(aa);var q=z.select(".nv-brushBackground").selectAll("g").data([aa||ao.extent()]),x=q.enter().append("g");x.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",g),x.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",g);var d=z.select(".nv-x.nv-brush").call(ao);d.selectAll("rect").attr("height",g),d.selectAll(".resize").append("path").attr("d",r),ap.dispatch.on("stateChange",function(v){for(var D in v){W[D]=v[D]}Y.stateChange(W),aI.update()}),Y.on("changeState",function(v){"undefined"!=typeof v.disabled&&(s.forEach(function(D,E){D.disabled=v.disabled[E]}),W.disabled=v.disabled),aI.update()}),k()}),aI}var aH,aG,aF,aE,aD,aC,aB,aA=b.models.line(),az=b.models.line(),ay=b.models.historicalBar(),ax=b.models.historicalBar(),aw=b.models.axis(),av=b.models.axis(),au=b.models.axis(),at=b.models.axis(),ar=b.models.axis(),aq=b.models.axis(),ap=b.models.legend(),ao=d3.svg.brush(),an=b.models.tooltip(),am={top:30,right:30,bottom:30,left:60},al={top:0,right:30,bottom:20,left:60},ak=null,aj=null,ai=function(c){return c.x},ah=function(c){return c.y},ag=b.utils.defaultColor(),af=!0,ae=!0,ad=!1,ac=!0,ab=50,aa=null,Z=null,Y=d3.dispatch("brush","stateChange","changeState"),X=0,W=b.utils.state(),V=null,U=" (left axis)",T=" (right axis)";aA.clipEdge(!0),az.interactive(!1),az.pointActive(function(){return !1}),aw.orient("bottom").tickPadding(5),au.orient("left"),at.orient("right"),av.orient("bottom").tickPadding(5),ar.orient("left"),aq.orient("right"),an.headerEnabled(!0).headerFormatter(function(d,c){return aw.tickFormat()(d,c)});var S=function(c){return function(){return{active:c.map(function(d){return !d.disabled})}}},a=function(c){return function(d){void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};return aA.dispatch.on("elementMouseover.tooltip",function(c){an.duration(100).valueFormatter(function(e,d){return at.tickFormat()(e,d)}).data(c).position(c.pos).hidden(!1)}),aA.dispatch.on("elementMouseout.tooltip",function(){an.hidden(!0)}),ay.dispatch.on("elementMouseover.tooltip",function(c){c.value=aI.x()(c.data),c.series={value:aI.y()(c.data),color:c.color},an.duration(0).valueFormatter(function(e,d){return au.tickFormat()(e,d)}).data(c).hidden(!1)}),ay.dispatch.on("elementMouseout.tooltip",function(){an.hidden(!0)}),ay.dispatch.on("elementMousemove.tooltip",function(){an.position({top:d3.event.pageY,left:d3.event.pageX})()}),aI.dispatch=Y,aI.legend=ap,aI.lines=aA,aI.lines2=az,aI.bars=ay,aI.bars2=ax,aI.xAxis=aw,aI.x2Axis=av,aI.y1Axis=au,aI.y2Axis=at,aI.y3Axis=ar,aI.y4Axis=aq,aI.tooltip=an,aI.options=b.utils.optionsFunc.bind(aI),aI._options=Object.create({},{width:{get:function(){return ak},set:function(c){ak=c}},height:{get:function(){return aj},set:function(c){aj=c}},showLegend:{get:function(){return af},set:function(c){af=c}},brushExtent:{get:function(){return aa},set:function(c){aa=c}},noData:{get:function(){return Z},set:function(c){Z=c}},focusEnable:{get:function(){return ae},set:function(c){ae=c}},focusHeight:{get:function(){return ab},set:function(c){ab=c}},focusShowAxisX:{get:function(){return ac},set:function(c){ac=c}},focusShowAxisY:{get:function(){return ad},set:function(c){ad=c}},legendLeftAxisHint:{get:function(){return U},set:function(c){U=c}},legendRightAxisHint:{get:function(){return T},set:function(c){T=c}},tooltips:{get:function(){return an.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),an.enabled(!!c)}},tooltipContent:{get:function(){return an.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),an.contentGenerator(c)}},margin:{get:function(){return am},set:function(c){am.top=void 0!==c.top?c.top:am.top,am.right=void 0!==c.right?c.right:am.right,am.bottom=void 0!==c.bottom?c.bottom:am.bottom,am.left=void 0!==c.left?c.left:am.left}},focusMargin:{get:function(){return al},set:function(c){al.top=void 0!==c.top?c.top:al.top,al.right=void 0!==c.right?c.right:al.right,al.bottom=void 0!==c.bottom?c.bottom:al.bottom,al.left=void 0!==c.left?c.left:al.left}},duration:{get:function(){return X},set:function(c){X=c}},color:{get:function(){return ag},set:function(c){ag=b.utils.getColor(c),ap.color(ag)}},x:{get:function(){return ai},set:function(c){ai=c,aA.x(c),az.x(c),ay.x(c),ax.x(c)}},y:{get:function(){return ah},set:function(c){ah=c,aA.y(c),az.y(c),ay.y(c),ax.y(c)}}}),b.utils.inheritOptions(aI,aA),b.utils.initOptions(aI),aI},b.models.lineWithFocusChart=function(){function aj(c){return c.each(function(w){function r(x){var o=+("e"==x),z=o?1:-1,y=n/3;return"M"+0.5*z+","+y+"A6,6 0 0 "+o+" "+6.5*z+","+(y+6)+"V"+(2*y-6)+"A6,6 0 0 "+o+" "+0.5*z+","+2*y+"ZM"+2.5*z+","+(y+8)+"V"+(2*y-8)+"M"+4.5*z+","+(y+8)+"V"+(2*y-8)}function v(){X.empty()||X.extent(G),f.data([X.empty()?ag.domain():G]).each(function(x){var o=ag(x[0])-ai.range()[0],y=q-ag(x[1]);d3.select(this).select(".left").attr("width",0>o?0:o),d3.select(this).select(".right").attr("x",ag(x[1])).attr("width",0>y?0:y)})}function u(){G=X.empty()?null:X.extent();var x=X.empty()?ag.domain():X.extent();if(!(Math.abs(x[0]-x[1])<=1)){U.brush({extent:x,brush:X}),v();var o=j.select(".nv-focus .nv-linesWrap").datum(w.filter(function(y){return !y.disabled}).map(function(y){return{key:y.key,area:y.area,values:y.values.filter(function(z,A){return ae.x()(z,A)>=x[0]&&ae.x()(z,A)<=x[1]})}}));o.transition().duration(S).call(ae),j.select(".nv-focus .nv-x.nv-axis").transition().duration(S).call(ac),j.select(".nv-focus .nv-y.nv-axis").transition().duration(S).call(ab)}}var t=d3.select(this),s=this;b.utils.initSVG(t);var q=b.utils.availableWidth(N,t,T),p=b.utils.availableHeight(L,t,T)-J,n=J-R.top-R.bottom;if(aj.update=function(){t.transition().duration(S).call(aj)},aj.container=this,Q.setter(K(w),aj.update).getter(M(w)).update(),Q.disabled=w.map(function(o){return !!o.disabled}),!O){var m;O={};for(m in Q){O[m]=Q[m] instanceof Array?Q[m].slice(0):Q[m]}}if(!(w&&w.length&&w.filter(function(o){return o.values.length}).length)){return b.utils.noData(aj,t),aj}t.selectAll(".nv-noData").remove(),ai=ae.xScale(),ah=ae.yScale(),ag=ad.xScale(),af=ad.yScale();var l=t.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([w]),k=l.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),j=l.select("g");k.append("g").attr("class","nv-legendWrap");var i=k.append("g").attr("class","nv-focus");i.append("g").attr("class","nv-x nv-axis"),i.append("g").attr("class","nv-y nv-axis"),i.append("g").attr("class","nv-linesWrap"),i.append("g").attr("class","nv-interactive");var h=k.append("g").attr("class","nv-context");h.append("g").attr("class","nv-x nv-axis"),h.append("g").attr("class","nv-y nv-axis"),h.append("g").attr("class","nv-linesWrap"),h.append("g").attr("class","nv-brushBackground"),h.append("g").attr("class","nv-x nv-brush"),H&&(Y.width(q),j.select(".nv-legendWrap").datum(w).call(Y),T.top!=Y.height()&&(T.top=Y.height(),p=b.utils.availableHeight(L,t,T)-J),j.select(".nv-legendWrap").attr("transform","translate(0,"+-T.top+")")),l.attr("transform","translate("+T.left+","+T.top+")"),I&&(V.width(q).height(p).margin({left:T.left,top:T.top}).svgContainer(t).xScale(ai),l.select(".nv-interactive").call(V)),ae.width(q).height(p).color(w.map(function(x,o){return x.color||P(x,o)}).filter(function(x,o){return !w[o].disabled})),ad.defined(ae.defined()).width(q).height(n).color(w.map(function(x,o){return x.color||P(x,o)}).filter(function(x,o){return !w[o].disabled})),j.select(".nv-context").attr("transform","translate(0,"+(p+T.bottom+R.top)+")");var g=j.select(".nv-context .nv-linesWrap").datum(w.filter(function(o){return !o.disabled}));d3.transition(g).call(ad),ac.scale(ai)._ticks(b.utils.calcTicksX(q/100,w)).tickSize(-p,0),ab.scale(ah)._ticks(b.utils.calcTicksY(p/36,w)).tickSize(-q,0),j.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+p+")"),X.x(ag).on("brush",function(){u()}),G&&X.extent(G);var f=j.select(".nv-brushBackground").selectAll("g").data([G||X.extent()]),e=f.enter().append("g");e.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",n),e.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",n);var d=j.select(".nv-x.nv-brush").call(X);d.selectAll("rect").attr("height",n),d.selectAll(".resize").append("path").attr("d",r),u(),aa.scale(ag)._ticks(b.utils.calcTicksX(q/100,w)).tickSize(-n,0),j.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+af.range()[0]+")"),d3.transition(j.select(".nv-context .nv-x.nv-axis")).call(aa),Z.scale(af)._ticks(b.utils.calcTicksY(n/36,w)).tickSize(-q,0),d3.transition(j.select(".nv-context .nv-y.nv-axis")).call(Z),j.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+af.range()[0]+")"),Y.dispatch.on("stateChange",function(o){for(var x in o){Q[x]=o[x]}U.stateChange(Q),aj.update()}),V.dispatch.on("elementMousemove",function(D){ae.clearHighlights();var C,B,A,z=[];if(w.filter(function(al,ak){return al.seriesIndex=ak,!al.disabled}).forEach(function(an,am){var al=X.empty()?ag.domain():X.extent(),ak=an.values.filter(function(ar,aq){return ae.x()(ar,aq)>=al[0]&&ae.x()(ar,aq)<=al[1]});B=b.interactiveBisect(ak,D.pointXValue,ae.x());var ap=ak[B],ao=aj.y()(ap,B);null!=ao&&ae.highlightPoint(am,B,!0),void 0!==ap&&(void 0===C&&(C=ap),void 0===A&&(A=aj.xScale()(aj.x()(ap,B))),z.push({key:an.key,value:aj.y()(ap,B),color:P(an,an.seriesIndex)}))}),z.length>2){var y=aj.yScale().invert(D.mouseY),x=Math.abs(aj.yScale().domain()[0]-aj.yScale().domain()[1]),o=0.03*x,F=b.nearestValueIndex(z.map(function(ak){return ak.value}),y,o);null!==F&&(z[F].highlight=!0)}var E=ac.tickFormat()(aj.x()(C,B));V.tooltip.position({left:D.mouseX+T.left,top:D.mouseY+T.top}).chartContainer(s.parentNode).valueFormatter(function(ak){return null==ak?"N/A":ab.tickFormat()(ak)}).data({value:E,index:B,series:z})(),V.renderGuideLine(A)}),V.dispatch.on("elementMouseout",function(){ae.clearHighlights()}),U.on("changeState",function(o){"undefined"!=typeof o.disabled&&w.forEach(function(x,y){x.disabled=o.disabled[y]}),aj.update()})}),aj}var ai,ah,ag,af,ae=b.models.line(),ad=b.models.line(),ac=b.models.axis(),ab=b.models.axis(),aa=b.models.axis(),Z=b.models.axis(),Y=b.models.legend(),X=d3.svg.brush(),W=b.models.tooltip(),V=b.interactiveGuideline(),T={top:30,right:30,bottom:30,left:60},R={top:0,right:30,bottom:20,left:60},P=b.utils.defaultColor(),N=null,L=null,J=50,I=!1,H=!0,G=null,a=null,U=d3.dispatch("brush","stateChange","changeState"),S=250,Q=b.utils.state(),O=null;ae.clipEdge(!0).duration(0),ad.interactive(!1),ad.pointActive(function(){return !1}),ac.orient("bottom").tickPadding(5),ab.orient("left"),aa.orient("bottom").tickPadding(5),Z.orient("left"),W.valueFormatter(function(d,c){return ab.tickFormat()(d,c)}).headerFormatter(function(d,c){return ac.tickFormat()(d,c)});var M=function(c){return function(){return{active:c.map(function(d){return !d.disabled})}}},K=function(c){return function(d){void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};return ae.dispatch.on("elementMouseover.tooltip",function(c){W.data(c).position(c.pos).hidden(!1)}),ae.dispatch.on("elementMouseout.tooltip",function(){W.hidden(!0)}),aj.dispatch=U,aj.legend=Y,aj.lines=ae,aj.lines2=ad,aj.xAxis=ac,aj.yAxis=ab,aj.x2Axis=aa,aj.y2Axis=Z,aj.interactiveLayer=V,aj.tooltip=W,aj.options=b.utils.optionsFunc.bind(aj),aj._options=Object.create({},{width:{get:function(){return N},set:function(c){N=c}},height:{get:function(){return L},set:function(c){L=c}},focusHeight:{get:function(){return J},set:function(c){J=c}},showLegend:{get:function(){return H},set:function(c){H=c}},brushExtent:{get:function(){return G},set:function(c){G=c}},defaultState:{get:function(){return O},set:function(c){O=c}},noData:{get:function(){return a},set:function(c){a=c}},tooltips:{get:function(){return W.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),W.enabled(!!c)}},tooltipContent:{get:function(){return W.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),W.contentGenerator(c)}},margin:{get:function(){return T},set:function(c){T.top=void 0!==c.top?c.top:T.top,T.right=void 0!==c.right?c.right:T.right,T.bottom=void 0!==c.bottom?c.bottom:T.bottom,T.left=void 0!==c.left?c.left:T.left}},focusMargin:{get:function(){return R},set:function(c){R.top=void 0!==c.top?c.top:R.top,R.right=void 0!==c.right?c.right:R.right,R.bottom=void 0!==c.bottom?c.bottom:R.bottom,R.left=void 0!==c.left?c.left:R.left}},color:{get:function(){return P},set:function(c){P=b.utils.getColor(c),Y.color(P)}},interpolate:{get:function(){return ae.interpolate()},set:function(c){ae.interpolate(c),ad.interpolate(c)}},xTickFormat:{get:function(){return ac.tickFormat()},set:function(c){ac.tickFormat(c),aa.tickFormat(c)}},yTickFormat:{get:function(){return ab.tickFormat()},set:function(c){ab.tickFormat(c),Z.tickFormat(c)}},duration:{get:function(){return S},set:function(c){S=c,ab.duration(S),Z.duration(S),ac.duration(S),aa.duration(S)}},x:{get:function(){return ae.x()},set:function(c){ae.x(c),ad.x(c)}},y:{get:function(){return ae.y()},set:function(c){ae.y(c),ad.y(c)}},useInteractiveGuideline:{get:function(){return I},set:function(c){I=c,I&&(ae.interactive(!1),ae.useVoronoi(!1))}}}),b.utils.inheritOptions(aj,ae),b.utils.initOptions(aj),aj},b.models.multiBar=function(){function aj(c){return M.reset(),c.each(function(o){var s=aa-ab.left-ab.right,r=Z-ab.top-ab.bottom;V=d3.select(this),b.utils.initSVG(V);var q=0;if(a&&o.length&&(a=[{values:o[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:0.01}})}]),J){var p=d3.layout.stack().offset(I).values(function(t){return t.values}).y(R)(!o.length&&a?a:o);p.forEach(function(t,u){t.nonStackable?(o[u].nonStackableSeries=q++,p[u]=o[u]):u>0&&p[u-1].nonStackable&&p[u].values.map(function(w,v){w.y0-=p[u-1].values[v].y,w.y1=w.y0+w.y})}),o=p}o.forEach(function(u,t){u.values.forEach(function(v){v.series=t,v.key=u.key})}),J&&o[0].values.map(function(t,w){var v=0,u=0;o.map(function(x,z){if(!o[z].nonStackable){var y=x.values[w];y.size=Math.abs(y.y),y.y<0?(y.y1=u,u-=y.size):(y.y1=y.size+v,v+=y.size)}})});var n=ah&&ag?[]:o.map(function(u,t){return u.values.map(function(v,w){return{x:T(v,w),y:R(v,w),y0:v.y0,y1:v.y1,idx:t,yErr:P(v,w)}})});Y.domain(ah||d3.merge(n).map(function(t){return t.x})).rangeBands(af||[0,s],Q),X.domain(ag||d3.extent(d3.merge(d3.merge(n).map(function(t){var v=t.y;J&&!o[t.idx].nonStackable&&(v=t.y>0?t.y1:t.y1+t.y);var u=t.yErr;return u?u.length?[v+u[0],v+u[1]]:(u=Math.abs(u),[v-u,v+u]):[v]})).concat(N))).range(ae||[r,0]),Y.domain()[0]===Y.domain()[1]&&Y.domain(Y.domain()[0]?[Y.domain()[0]-0.01*Y.domain()[0],Y.domain()[1]+0.01*Y.domain()[1]]:[-1,1]),X.domain()[0]===X.domain()[1]&&X.domain(X.domain()[0]?[X.domain()[0]+0.01*X.domain()[0],X.domain()[1]-0.01*X.domain()[1]]:[-1,1]),ad=ad||Y,ac=ac||X;var m=V.selectAll("g.nv-wrap.nv-multibar").data([o]),l=m.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),k=l.append("defs"),j=l.append("g"),i=m.select("g");j.append("g").attr("class","nv-groups"),m.attr("transform","translate("+ab.left+","+ab.top+")"),k.append("clipPath").attr("id","nv-edge-clip-"+W).append("rect"),m.select("#nv-edge-clip-"+W+" rect").attr("width",s).attr("height",r),i.attr("clip-path",L?"url(#nv-edge-clip-"+W+")":"");var h=m.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(u,t){return t});h.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);var g=M.transition(h.exit().selectAll("g.nv-bar"),"multibarExit",Math.min(100,S)).attr("y",function(t){var u=ac(0)||0;return J&&o[t.series]&&!o[t.series].nonStackable&&(u=ac(t.y0)),u}).attr("height",0).remove();g.delay&&g.delay(function(u,t){var v=t*(S/(K+1))-t;return v}),h.attr("class",function(u,t){return"nv-group nv-series-"+t}).classed("hover",function(t){return t.hover}).style("fill",function(u,t){return H(u,t)}).style("stroke",function(u,t){return H(u,t)}),h.style("stroke-opacity",1).style("fill-opacity",0.75);var f=h.selectAll("g.nv-bar").data(function(t){return a&&!o.length?a.values:t.values});f.exit().remove();var e=f.enter().append("g").attr("class",function(u,t){return R(u,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,x,w){var v=J&&!o[w].nonStackable?0:w*Y.rangeBand()/o.length,u=ac(J&&!o[w].nonStackable?t.y0:0)||0;return"translate("+v+","+u+")"});e.append("rect").attr("height",0).attr("width",function(t,v,u){return Y.rangeBand()/(J&&!o[u].nonStackable?1:o.length)}).style("fill",function(u,t,v){return H(u,v,t)}).style("stroke",function(u,t,v){return H(u,v,t)}),f.on("mouseover",function(u,t){d3.select(this).classed("hover",!0),O.elementMouseover({data:u,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(u,t){d3.select(this).classed("hover",!1),O.elementMouseout({data:u,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(u,t){O.elementMousemove({data:u,index:t,color:d3.select(this).style("fill")})}).on("click",function(u,t){O.elementClick({data:u,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(u,t){O.elementDblClick({data:u,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),P(o[0].values[0],0)&&(e.append("polyline"),f.select("polyline").attr("fill","none").attr("stroke",function(u,t,v){return G(u,v,t)}).attr("points",function(t,x){var w=P(t,x),v=0.8*Y.rangeBand()/(2*(J?1:o.length));w=w.length?w:[-Math.abs(w),Math.abs(w)],w=w.map(function(y){return X(y)-X(0)});var u=[[-v,w[0]],[v,w[0]],[0,w[0]],[0,w[1]],[-v,w[1]],[v,w[1]]];return u.map(function(y){return y.join(",")}).join(" ")}).attr("transform",function(t,w){var v=Y.rangeBand()/(2*(J?1:o.length)),u=R(t,w)<0?X(R(t,w))-X(0):0;return"translate("+v+", "+u+")"})),f.attr("class",function(u,t){return R(u,t)<0?"nv-bar negative":"nv-bar positive"}),U&&(ai||(ai=o.map(function(){return !0})),f.select("rect").style("fill",function(u,t,v){return d3.rgb(U(u,t)).darker(ai.map(function(x,w){return w}).filter(function(x,w){return !ai[w]})[v]).toString()}).style("stroke",function(u,t,v){return d3.rgb(U(u,t)).darker(ai.map(function(x,w){return w}).filter(function(x,w){return !ai[w]})[v]).toString()}));var d=f.watchTransition(M,"multibar",Math.min(250,S)).delay(function(t,u){return u*S/o[0].values.length});J?d.attr("transform",function(t,y,x){var w=0;w=o[x].nonStackable?R(t,y)<0?X(0):X(0)-X(R(t,y))<-1?X(0)-1:X(R(t,y))||0:X(t.y1);var v=0;o[x].nonStackable&&(v=t.series*Y.rangeBand()/o.length,o.length!==q&&(v=o[x].nonStackableSeries*Y.rangeBand()/(2*q)));var u=v+Y(T(t,y));return"translate("+u+","+w+")"}).select("rect").attr("height",function(t,v,u){return o[u].nonStackable?Math.max(Math.abs(X(R(t,v))-X(0)),1)||0:Math.max(Math.abs(X(t.y+t.y0)-X(t.y0)),1)}).attr("width",function(t,w,v){if(o[v].nonStackable){var u=Y.rangeBand()/q;return o.length!==q&&(u=Y.rangeBand()/(2*q)),u}return Y.rangeBand()}):d.attr("transform",function(t,w){var v=t.series*Y.rangeBand()/o.length+Y(T(t,w)),u=R(t,w)<0?X(0):X(0)-X(R(t,w))<1?X(0)-1:X(R(t,w))||0;return"translate("+v+","+u+")"}).select("rect").attr("width",Y.rangeBand()/o.length).attr("height",function(u,t){return Math.max(Math.abs(X(R(u,t))-X(0)),1)||0}),ad=Y.copy(),ac=X.copy(),o[0]&&o[0].values&&(K=o[0].values.length)}),M.renderEnd("multibar immediate"),aj}var ai,ah,ag,af,ae,ad,ac,ab={top:0,right:0,bottom:0,left:0},aa=960,Z=500,Y=d3.scale.ordinal(),X=d3.scale.linear(),W=Math.floor(10000*Math.random()),V=null,T=function(c){return c.x},R=function(c){return c.y},P=function(c){return c.yErr},N=[0],L=!0,J=!1,I="zero",H=b.utils.defaultColor(),G=b.utils.defaultColor(),a=!1,U=null,S=500,Q=0.1,O=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),M=b.utils.renderWatch(O,S),K=0;return aj.dispatch=O,aj.options=b.utils.optionsFunc.bind(aj),aj._options=Object.create({},{width:{get:function(){return aa},set:function(c){aa=c}},height:{get:function(){return Z},set:function(c){Z=c}},x:{get:function(){return T},set:function(c){T=c}},y:{get:function(){return R},set:function(c){R=c}},yErr:{get:function(){return P},set:function(c){P=c}},xScale:{get:function(){return Y},set:function(c){Y=c}},yScale:{get:function(){return X},set:function(c){X=c}},xDomain:{get:function(){return ah},set:function(c){ah=c}},yDomain:{get:function(){return ag},set:function(c){ag=c}},xRange:{get:function(){return af},set:function(c){af=c}},yRange:{get:function(){return ae},set:function(c){ae=c}},forceY:{get:function(){return N},set:function(c){N=c}},stacked:{get:function(){return J},set:function(c){J=c}},stackOffset:{get:function(){return I},set:function(c){I=c}},clipEdge:{get:function(){return L},set:function(c){L=c}},disabled:{get:function(){return ai},set:function(c){ai=c}},id:{get:function(){return W},set:function(c){W=c}},hideable:{get:function(){return a},set:function(c){a=c}},groupSpacing:{get:function(){return Q},set:function(c){Q=c}},margin:{get:function(){return ab},set:function(c){ab.top=void 0!==c.top?c.top:ab.top,ab.right=void 0!==c.right?c.right:ab.right,ab.bottom=void 0!==c.bottom?c.bottom:ab.bottom,ab.left=void 0!==c.left?c.left:ab.left}},duration:{get:function(){return S},set:function(c){S=c,M.reset(S)}},color:{get:function(){return H},set:function(c){H=b.utils.getColor(c)}},barColor:{get:function(){return U},set:function(c){U=c?b.utils.getColor(c):null}},errorBarColor:{get:function(){return G},set:function(c){G=c?b.utils.getColor(c):null}}}),b.utils.initOptions(aj),aj},b.models.multiBarChart=function(){function al(c){return Q.reset(),Q.models(ai),T&&Q.models(ah),R&&Q.models(ag),c.each(function(f){var n=d3.select(this);b.utils.initSVG(n);var d=b.utils.availableWidth(ab,n,ac),s=b.utils.availableHeight(aa,n,ac);if(al.update=function(){0===S?n.call(al):n.transition().duration(S).call(al)},al.container=this,I.setter(K(f),al.update).getter(M(f)).update(),I.disabled=f.map(function(j){return !!j.disabled}),!H){var r;H={};for(r in I){H[r]=I[r] instanceof Array?I[r].slice(0):I[r]}}if(!(f&&f.length&&f.filter(function(j){return j.values.length}).length)){return b.utils.noData(al,n),al}n.selectAll(".nv-noData").remove(),ak=ai.xScale(),aj=ai.yScale();var q=n.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([f]),p=q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),o=q.select("g");if(p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y nv-axis"),p.append("g").attr("class","nv-barsWrap"),p.append("g").attr("class","nv-legendWrap"),p.append("g").attr("class","nv-controlsWrap"),V&&(af.width(d-U()),o.select(".nv-legendWrap").datum(f).call(af),ac.top!=af.height()&&(ac.top=af.height(),s=b.utils.availableHeight(aa,n,ac)),o.select(".nv-legendWrap").attr("transform","translate("+U()+","+-ac.top+")")),Y){var m=[{key:X.grouped||"Grouped",disabled:ai.stacked()},{key:X.stacked||"Stacked",disabled:!ai.stacked()}];ae.width(U()).color(["#444","#444","#444"]),o.select(".nv-controlsWrap").datum(m).attr("transform","translate(0,"+-ac.top+")").call(ae)}q.attr("transform","translate("+ac.left+","+ac.top+")"),P&&o.select(".nv-y.nv-axis").attr("transform","translate("+d+",0)"),ai.disabled(f.map(function(j){return j.disabled})).width(d).height(s).color(f.map(function(t,j){return t.color||Z(t,j)}).filter(function(t,j){return !f[j].disabled}));var l=o.select(".nv-barsWrap").datum(f.filter(function(j){return !j.disabled}));if(l.call(ai),T){ah.scale(ak)._ticks(b.utils.calcTicksX(d/100,f)).tickSize(-s,0),o.select(".nv-x.nv-axis").attr("transform","translate(0,"+aj.range()[0]+")"),o.select(".nv-x.nv-axis").call(ah);var k=o.select(".nv-x.nv-axis > g").selectAll("g");if(k.selectAll("line, text").style("opacity",1),L){var i=function(t,j){return"translate("+t+","+j+")"},h=5,g=17;k.selectAll("text").attr("transform",function(t,j,u){return i(0,u%2==0?h:g)});var e=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;o.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,j){return i(0,0===j||e%2!==0?g:h)})}N&&k.filter(function(t,j){return j%Math.ceil(f[0].values.length/(d/100))!==0}).selectAll("text, line").style("opacity",0),J&&k.selectAll(".tick text").attr("transform","rotate("+J+" 0,0)").style("text-anchor",J>0?"start":"end"),o.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}R&&(ag.scale(aj)._ticks(b.utils.calcTicksY(s/36,f)).tickSize(-d,0),o.select(".nv-y.nv-axis").call(ag)),af.dispatch.on("stateChange",function(j){for(var t in j){I[t]=j[t]}W.stateChange(I),al.update()}),ae.dispatch.on("legendClick",function(j){if(j.disabled){switch(m=m.map(function(t){return t.disabled=!0,t}),j.disabled=!1,j.key){case"Grouped":case X.grouped:ai.stacked(!1);break;case"Stacked":case X.stacked:ai.stacked(!0)}I.stacked=ai.stacked(),W.stateChange(I),al.update()}}),W.on("changeState",function(j){"undefined"!=typeof j.disabled&&(f.forEach(function(t,u){t.disabled=j.disabled[u]}),I.disabled=j.disabled),"undefined"!=typeof j.stacked&&(ai.stacked(j.stacked),I.stacked=j.stacked,O=j.stacked),al.update()})}),Q.renderEnd("multibarchart immediate"),al}var ak,aj,ai=b.models.multiBar(),ah=b.models.axis(),ag=b.models.axis(),af=b.models.legend(),ae=b.models.legend(),ad=b.models.tooltip(),ac={top:30,right:20,bottom:50,left:60},ab=null,aa=null,Z=b.utils.defaultColor(),Y=!0,X={},V=!0,T=!0,R=!0,P=!1,N=!0,L=!1,J=0,I=b.utils.state(),H=null,a=null,W=d3.dispatch("stateChange","changeState","renderEnd"),U=function(){return Y?180:0},S=250;I.stacked=!1,ai.stacked(!1),ah.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(c){return c}),ag.orient(P?"right":"left").tickFormat(d3.format(",.1f")),ad.duration(0).valueFormatter(function(d,c){return ag.tickFormat()(d,c)}).headerFormatter(function(d,c){return ah.tickFormat()(d,c)}),ae.updateState(!1);var Q=b.utils.renderWatch(W),O=!1,M=function(c){return function(){return{active:c.map(function(d){return !d.disabled}),stacked:O}}},K=function(c){return function(d){void 0!==d.stacked&&(O=d.stacked),void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};return ai.dispatch.on("elementMouseover.tooltip",function(c){c.value=al.x()(c.data),c.series={key:c.data.key,value:al.y()(c.data),color:c.color},ad.data(c).hidden(!1)}),ai.dispatch.on("elementMouseout.tooltip",function(){ad.hidden(!0)}),ai.dispatch.on("elementMousemove.tooltip",function(){ad.position({top:d3.event.pageY,left:d3.event.pageX})()}),al.dispatch=W,al.multibar=ai,al.legend=af,al.controls=ae,al.xAxis=ah,al.yAxis=ag,al.state=I,al.tooltip=ad,al.options=b.utils.optionsFunc.bind(al),al._options=Object.create({},{width:{get:function(){return ab},set:function(c){ab=c}},height:{get:function(){return aa},set:function(c){aa=c}},showLegend:{get:function(){return V},set:function(c){V=c}},showControls:{get:function(){return Y},set:function(c){Y=c}},controlLabels:{get:function(){return X},set:function(c){X=c}},showXAxis:{get:function(){return T},set:function(c){T=c}},showYAxis:{get:function(){return R},set:function(c){R=c}},defaultState:{get:function(){return H},set:function(c){H=c}},noData:{get:function(){return a},set:function(c){a=c}},reduceXTicks:{get:function(){return N},set:function(c){N=c}},rotateLabels:{get:function(){return J},set:function(c){J=c}},staggerLabels:{get:function(){return L},set:function(c){L=c}},tooltips:{get:function(){return ad.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),ad.enabled(!!c)}},tooltipContent:{get:function(){return ad.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),ad.contentGenerator(c)}},margin:{get:function(){return ac},set:function(c){ac.top=void 0!==c.top?c.top:ac.top,ac.right=void 0!==c.right?c.right:ac.right,ac.bottom=void 0!==c.bottom?c.bottom:ac.bottom,ac.left=void 0!==c.left?c.left:ac.left}},duration:{get:function(){return S},set:function(c){S=c,ai.duration(S),ah.duration(S),ag.duration(S),Q.reset(S)}},color:{get:function(){return Z},set:function(c){Z=b.utils.getColor(c),af.color(Z)}},rightAlignYAxis:{get:function(){return P},set:function(c){P=c,ag.orient(P?"right":"left")}},barColor:{get:function(){return ai.barColor},set:function(c){ai.barColor(c),af.color(function(e,d){return d3.rgb("#ccc").darker(1.5*d).toString()})}}}),b.utils.inheritOptions(al,ai),b.utils.initOptions(al),al},b.models.multiBarHorizontal=function(){function aj(c){return K.reset(),c.each(function(i){var e=aa-ab.left-ab.right,d=Z-ab.top-ab.bottom;X=d3.select(this),b.utils.initSVG(X),H&&(i=d3.layout.stack().offset("zero").values(function(m){return m.values}).y(R)(i)),i.forEach(function(o,m){o.values.forEach(function(p){p.series=m,p.key=o.key})}),H&&i[0].values.map(function(m,q){var p=0,o=0;i.map(function(s){var r=s.values[q];r.size=Math.abs(r.y),r.y<0?(r.y1=o-r.size,o-=r.size):(r.y1=p,p+=r.size)})});var n=ah&&ag?[]:i.map(function(m){return m.values.map(function(p,o){return{x:T(p,o),y:R(p,o),y0:p.y0,y1:p.y1,yErr:P(p,o)}})});W.domain(ah||d3.merge(n).map(function(m){return m.x})).rangeBands(af||[0,d],S),V.domain(ag||d3.extent(d3.merge(d3.merge(n).map(function(o){var m=o.y;H&&(m=o.y>0?o.y1+o.y:o.y1);var p=o.yErr;return p?p.length?[m+p[0],m+p[1]]:(p=Math.abs(p),[m-p,m+p]):[m]})).concat(N))),V.range(G&&!H?ae||[V.domain()[0]<0?U:0,e-(V.domain()[1]>0?U:0)]:ae||[0,e]),ad=ad||W,ac=ac||d3.scale.linear().domain(V.domain()).range([V(0),V(0)]);var l=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([i]),k=l.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),j=(k.append("defs"),k.append("g"));l.select("g");j.append("g").attr("class","nv-groups"),l.attr("transform","translate("+ab.left+","+ab.top+")");var h=l.select(".nv-groups").selectAll(".nv-group").data(function(m){return m},function(o,m){return m});h.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),h.exit().watchTransition(K,"multibarhorizontal: exit groups").style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove(),h.attr("class",function(o,m){return"nv-group nv-series-"+m}).classed("hover",function(m){return m.hover}).style("fill",function(o,m){return L(o,m)}).style("stroke",function(o,m){return L(o,m)}),h.watchTransition(K,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var g=h.selectAll("g.nv-bar").data(function(m){return m.values});g.exit().remove();var f=g.enter().append("g").attr("transform",function(m,p,o){return"translate("+ac(H?m.y0:0)+","+(H?0:o*W.rangeBand()/i.length+W(T(m,p)))+")"});f.append("rect").attr("width",0).attr("height",W.rangeBand()/(H?1:i.length)),g.on("mouseover",function(o,m){d3.select(this).classed("hover",!0),M.elementMouseover({data:o,index:m,color:d3.select(this).style("fill")})}).on("mouseout",function(o,m){d3.select(this).classed("hover",!1),M.elementMouseout({data:o,index:m,color:d3.select(this).style("fill")})}).on("mouseout",function(o,m){M.elementMouseout({data:o,index:m,color:d3.select(this).style("fill")})}).on("mousemove",function(o,m){M.elementMousemove({data:o,index:m,color:d3.select(this).style("fill")})}).on("click",function(o,m){M.elementClick({data:o,index:m,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(o,m){M.elementDblClick({data:o,index:m,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),P(i[0].values[0],0)&&(f.append("polyline"),g.select("polyline").attr("fill","none").attr("stroke",function(o,m,p){return I(o,p,m)}).attr("points",function(m,r){var q=P(m,r),p=0.8*W.rangeBand()/(2*(H?1:i.length));q=q.length?q:[-Math.abs(q),Math.abs(q)],q=q.map(function(s){return V(s)-V(0)});var o=[[q[0],-p],[q[0],p],[q[0],0],[q[1],0],[q[1],-p],[q[1],p]];return o.map(function(s){return s.join(",")}).join(" ")}).attr("transform",function(m,p){var o=W.rangeBand()/(2*(H?1:i.length));return"translate("+(R(m,p)<0?0:V(R(m,p))-V(0))+", "+o+")"})),f.append("text"),G&&!H?(g.select("text").attr("text-anchor",function(o,m){return R(o,m)<0?"end":"start"}).attr("y",W.rangeBand()/(2*i.length)).attr("dy",".32em").text(function(o,m){var q=Q(R(o,m)),p=P(o,m);return void 0===p?q:p.length?q+"+"+Q(Math.abs(p[1]))+"-"+Q(Math.abs(p[0])):q+""+Q(Math.abs(p))}),g.watchTransition(K,"multibarhorizontal: bars").select("text").attr("x",function(o,m){return R(o,m)<0?-4:V(R(o,m))-V(0)+4})):g.selectAll("text").text(""),a&&!H?(f.append("text").classed("nv-bar-label",!0),g.select("text.nv-bar-label").attr("text-anchor",function(o,m){return R(o,m)<0?"start":"end"}).attr("y",W.rangeBand()/(2*i.length)).attr("dy",".32em").text(function(o,m){return T(o,m)}),g.watchTransition(K,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(o,m){return R(o,m)<0?V(0)-V(R(o,m))+4:-4})):g.selectAll("text.nv-bar-label").text(""),g.attr("class",function(o,m){return R(o,m)<0?"nv-bar negative":"nv-bar positive"}),J&&(ai||(ai=i.map(function(){return !0})),g.style("fill",function(o,m,p){return d3.rgb(J(o,m)).darker(ai.map(function(r,q){return q}).filter(function(r,q){return !ai[q]})[p]).toString()}).style("stroke",function(o,m,p){return d3.rgb(J(o,m)).darker(ai.map(function(r,q){return q}).filter(function(r,q){return !ai[q]})[p]).toString()})),H?g.watchTransition(K,"multibarhorizontal: bars").attr("transform",function(o,m){return"translate("+V(o.y1)+","+W(T(o,m))+")"}).select("rect").attr("width",function(o,m){return Math.abs(V(R(o,m)+o.y0)-V(o.y0))}).attr("height",W.rangeBand()):g.watchTransition(K,"multibarhorizontal: bars").attr("transform",function(m,o){return"translate("+V(R(m,o)<0?R(m,o):0)+","+(m.series*W.rangeBand()/i.length+W(T(m,o)))+")"}).select("rect").attr("height",W.rangeBand()/i.length).attr("width",function(o,m){return Math.max(Math.abs(V(R(o,m))-V(0)),1)}),ad=W.copy(),ac=V.copy()}),K.renderEnd("multibarHorizontal immediate"),aj}var ai,ah,ag,af,ae,ad,ac,ab={top:0,right:0,bottom:0,left:0},aa=960,Z=500,Y=Math.floor(10000*Math.random()),X=null,W=d3.scale.ordinal(),V=d3.scale.linear(),T=function(c){return c.x},R=function(c){return c.y},P=function(c){return c.yErr},N=[0],L=b.utils.defaultColor(),J=null,I=b.utils.defaultColor(),H=!1,G=!1,a=!1,U=60,S=0.1,Q=d3.format(",.2f"),O=250,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K=b.utils.renderWatch(M,O);return aj.dispatch=M,aj.options=b.utils.optionsFunc.bind(aj),aj._options=Object.create({},{width:{get:function(){return aa},set:function(c){aa=c}},height:{get:function(){return Z},set:function(c){Z=c}},x:{get:function(){return T},set:function(c){T=c}},y:{get:function(){return R},set:function(c){R=c}},yErr:{get:function(){return P},set:function(c){P=c}},xScale:{get:function(){return W},set:function(c){W=c}},yScale:{get:function(){return V},set:function(c){V=c}},xDomain:{get:function(){return ah},set:function(c){ah=c}},yDomain:{get:function(){return ag},set:function(c){ag=c}},xRange:{get:function(){return af},set:function(c){af=c}},yRange:{get:function(){return ae},set:function(c){ae=c}},forceY:{get:function(){return N},set:function(c){N=c}},stacked:{get:function(){return H},set:function(c){H=c}},showValues:{get:function(){return G},set:function(c){G=c}},disabled:{get:function(){return ai},set:function(c){ai=c}},id:{get:function(){return Y},set:function(c){Y=c}},valueFormat:{get:function(){return Q},set:function(c){Q=c}},valuePadding:{get:function(){return U},set:function(c){U=c}},groupSpacing:{get:function(){return S},set:function(c){S=c}},margin:{get:function(){return ab},set:function(c){ab.top=void 0!==c.top?c.top:ab.top,ab.right=void 0!==c.right?c.right:ab.right,ab.bottom=void 0!==c.bottom?c.bottom:ab.bottom,ab.left=void 0!==c.left?c.left:ab.left}},duration:{get:function(){return O},set:function(c){O=c,K.reset(O)}},color:{get:function(){return L},set:function(c){L=b.utils.getColor(c)}},barColor:{get:function(){return J},set:function(c){J=c?b.utils.getColor(c):null}},errorBarColor:{get:function(){return I},set:function(c){I=c?b.utils.getColor(c):null}}}),b.utils.initOptions(aj),aj},b.models.multiBarHorizontalChart=function(){function ad(c){return K.reset(),K.models(aa),L&&K.models(Z),J&&K.models(Y),c.each(function(f){var k=d3.select(this);b.utils.initSVG(k);var e=b.utils.availableWidth(T,k,U),d=b.utils.availableHeight(S,k,U);if(ad.update=function(){k.transition().duration(a).call(ad)},ad.container=this,I=aa.stacked(),H.setter(M(f),ad.update).getter(O(f)).update(),H.disabled=f.map(function(j){return !!j.disabled}),!G){var o;G={};for(o in H){G[o]=H[o] instanceof Array?H[o].slice(0):H[o]}}if(!(f&&f.length&&f.filter(function(j){return j.values.length}).length)){return b.utils.noData(ad,k),ad}k.selectAll(".nv-noData").remove(),ac=aa.xScale(),ab=aa.yScale();var n=k.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([f]),m=n.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),l=n.select("g");if(m.append("g").attr("class","nv-x nv-axis"),m.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),m.append("g").attr("class","nv-barsWrap"),m.append("g").attr("class","nv-legendWrap"),m.append("g").attr("class","nv-controlsWrap"),N&&(X.width(e-D()),l.select(".nv-legendWrap").datum(f).call(X),U.top!=X.height()&&(U.top=X.height(),d=b.utils.availableHeight(S,k,U)),l.select(".nv-legendWrap").attr("transform","translate("+D()+","+-U.top+")")),Q){var i=[{key:P.grouped||"Grouped",disabled:aa.stacked()},{key:P.stacked||"Stacked",disabled:!aa.stacked()}];W.width(D()).color(["#444","#444","#444"]),l.select(".nv-controlsWrap").datum(i).attr("transform","translate(0,"+-U.top+")").call(W)}n.attr("transform","translate("+U.left+","+U.top+")"),aa.disabled(f.map(function(j){return j.disabled})).width(e).height(d).color(f.map(function(p,j){return p.color||R(p,j)}).filter(function(p,j){return !f[j].disabled}));var h=l.select(".nv-barsWrap").datum(f.filter(function(j){return !j.disabled}));if(h.transition().call(aa),L){Z.scale(ac)._ticks(b.utils.calcTicksY(d/24,f)).tickSize(-e,0),l.select(".nv-x.nv-axis").call(Z);var g=l.select(".nv-x.nv-axis").selectAll("g");g.selectAll("line, text")}J&&(Y.scale(ab)._ticks(b.utils.calcTicksX(e/100,f)).tickSize(-d,0),l.select(".nv-y.nv-axis").attr("transform","translate(0,"+d+")"),l.select(".nv-y.nv-axis").call(Y)),l.select(".nv-zeroLine line").attr("x1",ab(0)).attr("x2",ab(0)).attr("y1",0).attr("y2",-d),X.dispatch.on("stateChange",function(j){for(var p in j){H[p]=j[p]}E.stateChange(H),ad.update()}),W.dispatch.on("legendClick",function(j){if(j.disabled){switch(i=i.map(function(p){return p.disabled=!0,p}),j.disabled=!1,j.key){case"Grouped":aa.stacked(!1);break;case"Stacked":aa.stacked(!0)}H.stacked=aa.stacked(),E.stateChange(H),I=aa.stacked(),ad.update()}}),E.on("changeState",function(j){"undefined"!=typeof j.disabled&&(f.forEach(function(p,q){p.disabled=j.disabled[q]}),H.disabled=j.disabled),"undefined"!=typeof j.stacked&&(aa.stacked(j.stacked),H.stacked=j.stacked,I=j.stacked),ad.update()})}),K.renderEnd("multibar horizontal chart immediate"),ad}var ac,ab,aa=b.models.multiBarHorizontal(),Z=b.models.axis(),Y=b.models.axis(),X=b.models.legend().height(30),W=b.models.legend().height(30),V=b.models.tooltip(),U={top:30,right:20,bottom:50,left:60},T=null,S=null,R=b.utils.defaultColor(),Q=!0,P={},N=!0,L=!0,J=!0,I=!1,H=b.utils.state(),G=null,F=null,E=d3.dispatch("stateChange","changeState","renderEnd"),D=function(){return Q?180:0},a=250;H.stacked=!1,aa.stacked(I),Z.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(c){return c}),Y.orient("bottom").tickFormat(d3.format(",.1f")),V.duration(0).valueFormatter(function(d,c){return Y.tickFormat()(d,c)}).headerFormatter(function(d,c){return Z.tickFormat()(d,c)}),W.updateState(!1);var O=function(c){return function(){return{active:c.map(function(d){return !d.disabled}),stacked:I}}},M=function(c){return function(d){void 0!==d.stacked&&(I=d.stacked),void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}},K=b.utils.renderWatch(E,a);return aa.dispatch.on("elementMouseover.tooltip",function(c){c.value=ad.x()(c.data),c.series={key:c.data.key,value:ad.y()(c.data),color:c.color},V.data(c).hidden(!1)}),aa.dispatch.on("elementMouseout.tooltip",function(){V.hidden(!0)}),aa.dispatch.on("elementMousemove.tooltip",function(){V.position({top:d3.event.pageY,left:d3.event.pageX})()}),ad.dispatch=E,ad.multibar=aa,ad.legend=X,ad.controls=W,ad.xAxis=Z,ad.yAxis=Y,ad.state=H,ad.tooltip=V,ad.options=b.utils.optionsFunc.bind(ad),ad._options=Object.create({},{width:{get:function(){return T},set:function(c){T=c}},height:{get:function(){return S},set:function(c){S=c}},showLegend:{get:function(){return N},set:function(c){N=c}},showControls:{get:function(){return Q},set:function(c){Q=c}},controlLabels:{get:function(){return P},set:function(c){P=c}},showXAxis:{get:function(){return L},set:function(c){L=c}},showYAxis:{get:function(){return J},set:function(c){J=c}},defaultState:{get:function(){return G},set:function(c){G=c}},noData:{get:function(){return F},set:function(c){F=c}},tooltips:{get:function(){return V.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),V.enabled(!!c)}},tooltipContent:{get:function(){return V.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),V.contentGenerator(c)}},margin:{get:function(){return U},set:function(c){U.top=void 0!==c.top?c.top:U.top,U.right=void 0!==c.right?c.right:U.right,U.bottom=void 0!==c.bottom?c.bottom:U.bottom,U.left=void 0!==c.left?c.left:U.left}},duration:{get:function(){return a},set:function(c){a=c,K.reset(a),aa.duration(a),Z.duration(a),Y.duration(a)}},color:{get:function(){return R},set:function(c){R=b.utils.getColor(c),X.color(R)}},barColor:{get:function(){return aa.barColor},set:function(c){aa.barColor(c),X.color(function(e,d){return d3.rgb("#ccc").darker(1.5*d).toString()})}}}),b.utils.inheritOptions(ad,aa),b.utils.initOptions(ad),ad},b.models.multiChart=function(){function ah(c){return c.each(function(ap){function ao(k){var j=2===ap[k.seriesIndex].yAxis?Q:S;k.value=k.point.x,k.series={value:k.point.y,color:k.point.color},M.duration(100).valueFormatter(function(l,n){return j.tickFormat()(l,n)}).data(k).position(k.pos).hidden(!1)}function an(k){var j=2===ap[k.seriesIndex].yAxis?Q:S;k.value=k.point.x,k.series={value:k.point.y,color:k.point.color},M.duration(100).valueFormatter(function(l,n){return j.tickFormat()(l,n)}).data(k).position(k.pos).hidden(!1)}function am(k){var j=2===ap[k.seriesIndex].yAxis?Q:S;k.point.x=G.x()(k.point),k.point.y=G.y()(k.point),M.duration(100).valueFormatter(function(l,n){return j.tickFormat()(l,n)}).data(k).position(k.pos).hidden(!1)}function aj(k){var j=2===ap[k.data.series].yAxis?Q:S;k.value=I.x()(k.data),k.series={value:I.y()(k.data),color:k.color},M.duration(0).valueFormatter(function(l,n){return j.tickFormat()(l,n)}).data(k).hidden(!1)}var ai=d3.select(this);b.utils.initSVG(ai),ah.update=function(){ai.transition().call(ah)},ah.container=this;var D=b.utils.availableWidth(ac,ai,ae),C=b.utils.availableHeight(ab,ai,ae),B=ap.filter(function(j){return"line"==j.type&&1==j.yAxis}),A=ap.filter(function(j){return"line"==j.type&&2==j.yAxis}),z=ap.filter(function(j){return"scatter"==j.type&&1==j.yAxis}),y=ap.filter(function(j){return"scatter"==j.type&&2==j.yAxis}),x=ap.filter(function(j){return"bar"==j.type&&1==j.yAxis}),w=ap.filter(function(j){return"bar"==j.type&&2==j.yAxis}),v=ap.filter(function(j){return"area"==j.type&&1==j.yAxis}),u=ap.filter(function(j){return"area"==j.type&&2==j.yAxis});if(!(ap&&ap.length&&ap.filter(function(j){return j.values.length}).length)){return b.utils.noData(ah,ai),ah}ai.selectAll(".nv-noData").remove();var s=ap.filter(function(j){return !j.disabled&&1==j.yAxis}).map(function(j){return j.values.map(function(k){return{x:k.x,y:k.y}})}),q=ap.filter(function(j){return !j.disabled&&2==j.yAxis}).map(function(j){return j.values.map(function(k){return{x:k.x,y:k.y}})});U.domain(d3.extent(d3.merge(s.concat(q)),function(j){return j.x})).range([0,D]);var p=ai.selectAll("g.wrap.multiChart").data([ap]),m=p.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");m.append("g").attr("class","nv-x nv-axis"),m.append("g").attr("class","nv-y1 nv-axis"),m.append("g").attr("class","nv-y2 nv-axis"),m.append("g").attr("class","lines1Wrap"),m.append("g").attr("class","lines2Wrap"),m.append("g").attr("class","scatters1Wrap"),m.append("g").attr("class","scatters2Wrap"),m.append("g").attr("class","bars1Wrap"),m.append("g").attr("class","bars2Wrap"),m.append("g").attr("class","stack1Wrap"),m.append("g").attr("class","stack2Wrap"),m.append("g").attr("class","legendWrap");var i=p.select("g"),h=ap.map(function(k,j){return ap[j].color||ad(k,j)});if(aa){var g=O.align()?D/2:D,f=O.align()?g:0;O.width(g),O.color(h),i.select(".legendWrap").datum(ap.map(function(j){return j.originalKey=void 0===j.originalKey?j.key:j.originalKey,j.key=j.originalKey+(1==j.yAxis?"":" (right axis)"),j})).call(O),ae.top!=O.height()&&(ae.top=O.height(),C=b.utils.availableHeight(ab,ai,ae)),i.select(".legendWrap").attr("transform","translate("+f+","+-ae.top+")")}P.width(D).height(C).interpolate(W).color(h.filter(function(k,j){return !ap[j].disabled&&1==ap[j].yAxis&&"line"==ap[j].type})),N.width(D).height(C).interpolate(W).color(h.filter(function(k,j){return !ap[j].disabled&&2==ap[j].yAxis&&"line"==ap[j].type})),L.width(D).height(C).color(h.filter(function(k,j){return !ap[j].disabled&&1==ap[j].yAxis&&"scatter"==ap[j].type})),J.width(D).height(C).color(h.filter(function(k,j){return !ap[j].disabled&&2==ap[j].yAxis&&"scatter"==ap[j].type})),I.width(D).height(C).color(h.filter(function(k,j){return !ap[j].disabled&&1==ap[j].yAxis&&"bar"==ap[j].type})),H.width(D).height(C).color(h.filter(function(k,j){return !ap[j].disabled&&2==ap[j].yAxis&&"bar"==ap[j].type})),G.width(D).height(C).color(h.filter(function(k,j){return !ap[j].disabled&&1==ap[j].yAxis&&"area"==ap[j].type})),F.width(D).height(C).color(h.filter(function(k,j){return !ap[j].disabled&&2==ap[j].yAxis&&"area"==ap[j].type})),i.attr("transform","translate("+ae.left+","+ae.top+")");var e=i.select(".lines1Wrap").datum(B.filter(function(j){return !j.disabled})),d=i.select(".scatters1Wrap").datum(z.filter(function(j){return !j.disabled})),o=i.select(".bars1Wrap").datum(x.filter(function(j){return !j.disabled})),at=i.select(".stack1Wrap").datum(v.filter(function(j){return !j.disabled})),aq=i.select(".lines2Wrap").datum(A.filter(function(j){return !j.disabled})),r=i.select(".scatters2Wrap").datum(y.filter(function(j){return !j.disabled})),ak=i.select(".bars2Wrap").datum(w.filter(function(j){return !j.disabled})),ar=i.select(".stack2Wrap").datum(u.filter(function(j){return !j.disabled})),t=v.length?v.map(function(j){return j.values}).reduce(function(k,j){return k.map(function(l,n){return{x:l.x,y:l.y+j[n].y}})}).concat([{x:0,y:0}]):[],al=u.length?u.map(function(j){return j.values}).reduce(function(k,j){return k.map(function(l,n){return{x:l.x,y:l.y+j[n].y}})}).concat([{x:0,y:0}]):[];T.domain(ag||d3.extent(d3.merge(s).concat(t),function(j){return j.y})).range([0,C]),R.domain(af||d3.extent(d3.merge(q).concat(al),function(j){return j.y})).range([0,C]),P.yDomain(T.domain()),L.yDomain(T.domain()),I.yDomain(T.domain()),G.yDomain(T.domain()),N.yDomain(R.domain()),J.yDomain(R.domain()),H.yDomain(R.domain()),F.yDomain(R.domain()),v.length&&d3.transition(at).call(G),u.length&&d3.transition(ar).call(F),x.length&&d3.transition(o).call(I),w.length&&d3.transition(ak).call(H),B.length&&d3.transition(e).call(P),A.length&&d3.transition(aq).call(N),z.length&&d3.transition(d).call(L),y.length&&d3.transition(r).call(J),a._ticks(b.utils.calcTicksX(D/100,ap)).tickSize(-C,0),i.select(".nv-x.nv-axis").attr("transform","translate(0,"+C+")"),d3.transition(i.select(".nv-x.nv-axis")).call(a),S._ticks(b.utils.calcTicksY(C/36,ap)).tickSize(-D,0),d3.transition(i.select(".nv-y1.nv-axis")).call(S),Q._ticks(b.utils.calcTicksY(C/36,ap)).tickSize(-D,0),d3.transition(i.select(".nv-y2.nv-axis")).call(Q),i.select(".nv-y1.nv-axis").classed("nv-disabled",s.length?!1:!0).attr("transform","translate("+U.range()[0]+",0)"),i.select(".nv-y2.nv-axis").classed("nv-disabled",q.length?!1:!0).attr("transform","translate("+U.range()[1]+",0)"),O.dispatch.on("stateChange",function(){ah.update()}),P.dispatch.on("elementMouseover.tooltip",ao),N.dispatch.on("elementMouseover.tooltip",ao),P.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),N.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),L.dispatch.on("elementMouseover.tooltip",an),J.dispatch.on("elementMouseover.tooltip",an),L.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),J.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),G.dispatch.on("elementMouseover.tooltip",am),F.dispatch.on("elementMouseover.tooltip",am),G.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),F.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),I.dispatch.on("elementMouseover.tooltip",aj),H.dispatch.on("elementMouseover.tooltip",aj),I.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),H.dispatch.on("elementMouseout.tooltip",function(){M.hidden(!0)}),I.dispatch.on("elementMousemove.tooltip",function(){M.position({top:d3.event.pageY,left:d3.event.pageX})()}),H.dispatch.on("elementMousemove.tooltip",function(){M.position({top:d3.event.pageY,left:d3.event.pageX})()})}),ah}var ag,af,ae={top:30,right:20,bottom:50,left:60},ad=b.utils.defaultColor(),ac=null,ab=null,aa=!0,Z=null,Y=function(c){return c.x},X=function(c){return c.y},W="monotone",V=!0,U=d3.scale.linear(),T=d3.scale.linear(),R=d3.scale.linear(),P=b.models.line().yScale(T),N=b.models.line().yScale(R),L=b.models.scatter().yScale(T),J=b.models.scatter().yScale(R),I=b.models.multiBar().stacked(!1).yScale(T),H=b.models.multiBar().stacked(!1).yScale(R),G=b.models.stackedArea().yScale(T),F=b.models.stackedArea().yScale(R),a=b.models.axis().scale(U).orient("bottom").tickPadding(5),S=b.models.axis().scale(T).orient("left"),Q=b.models.axis().scale(R).orient("right"),O=b.models.legend().height(30),M=b.models.tooltip(),K=d3.dispatch();return ah.dispatch=K,ah.lines1=P,ah.lines2=N,ah.scatters1=L,ah.scatters2=J,ah.bars1=I,ah.bars2=H,ah.stack1=G,ah.stack2=F,ah.xAxis=a,ah.yAxis1=S,ah.yAxis2=Q,ah.tooltip=M,ah.options=b.utils.optionsFunc.bind(ah),ah._options=Object.create({},{width:{get:function(){return ac},set:function(c){ac=c}},height:{get:function(){return ab},set:function(c){ab=c}},showLegend:{get:function(){return aa},set:function(c){aa=c}},yDomain1:{get:function(){return ag},set:function(c){ag=c}},yDomain2:{get:function(){return af},set:function(c){af=c}},noData:{get:function(){return Z},set:function(c){Z=c}},interpolate:{get:function(){return W},set:function(c){W=c}},tooltips:{get:function(){return M.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),M.enabled(!!c)}},tooltipContent:{get:function(){return M.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),M.contentGenerator(c)}},margin:{get:function(){return ae},set:function(c){ae.top=void 0!==c.top?c.top:ae.top,ae.right=void 0!==c.right?c.right:ae.right,ae.bottom=void 0!==c.bottom?c.bottom:ae.bottom,ae.left=void 0!==c.left?c.left:ae.left}},color:{get:function(){return ad},set:function(c){ad=b.utils.getColor(c)}},x:{get:function(){return Y},set:function(c){Y=c,P.x(c),N.x(c),L.x(c),J.x(c),I.x(c),H.x(c),G.x(c),F.x(c)}},y:{get:function(){return X},set:function(c){X=c,P.y(c),N.y(c),L.y(c),J.y(c),G.y(c),F.y(c),I.y(c),H.y(c)}},useVoronoi:{get:function(){return V},set:function(c){V=c,P.useVoronoi(c),N.useVoronoi(c),G.useVoronoi(c),F.useVoronoi(c)}}}),b.utils.initOptions(ah),ah},b.models.ohlcBar=function(){function X(c){return c.each(function(i){O=d3.select(this);var h=b.utils.availableWidth(R,O,S),g=b.utils.availableHeight(Q,O,S);b.utils.initSVG(O);var f=h/i[0].values.length*0.9;N.domain(W||d3.extent(i[0].values.map(L).concat(F))),N.range(D?U||[0.5*h/i[0].values.length,h*(i[0].values.length-0.5)/i[0].values.length]:U||[5+f/2,h-f/2-5]),M.domain(V||[d3.min(i[0].values.map(G).concat(E)),d3.max(i[0].values.map(H).concat(E))]).range(T||[g,0]),N.domain()[0]===N.domain()[1]&&N.domain(N.domain()[0]?[N.domain()[0]-0.01*N.domain()[0],N.domain()[1]+0.01*N.domain()[1]]:[-1,1]),M.domain()[0]===M.domain()[1]&&M.domain(M.domain()[0]?[M.domain()[0]+0.01*M.domain()[0],M.domain()[1]-0.01*M.domain()[1]]:[-1,1]);var e=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([i[0].values]),d=e.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),m=d.append("defs"),l=d.append("g"),k=e.select("g");l.append("g").attr("class","nv-ticks"),e.attr("transform","translate("+S.left+","+S.top+")"),O.on("click",function(o,n){a.chartClick({data:o,index:n,pos:d3.event,id:P})}),m.append("clipPath").attr("id","nv-chart-clip-path-"+P).append("rect"),e.select("#nv-chart-clip-path-"+P+" rect").attr("width",h).attr("height",g),k.attr("clip-path",C?"url(#nv-chart-clip-path-"+P+")":"");var j=e.select(".nv-ticks").selectAll(".nv-tick").data(function(n){return n});j.exit().remove(),j.enter().append("path").attr("class",function(o,n,p){return(J(o,n)>I(o,n)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+p+"-"+n}).attr("d",function(o,n){return"m0,0l0,"+(M(J(o,n))-M(H(o,n)))+"l"+-f/2+",0l"+f/2+",0l0,"+(M(G(o,n))-M(J(o,n)))+"l0,"+(M(I(o,n))-M(G(o,n)))+"l"+f/2+",0l"+-f/2+",0z"}).attr("transform",function(o,n){return"translate("+N(L(o,n))+","+M(H(o,n))+")"}).attr("fill",function(){return B[0]}).attr("stroke",function(){return B[0]}).attr("x",0).attr("y",function(o,n){return M(Math.max(0,K(o,n)))}).attr("height",function(o,n){return Math.abs(M(K(o,n))-M(0))}),j.attr("class",function(o,n,p){return(J(o,n)>I(o,n)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+p+"-"+n}),d3.transition(j).attr("transform",function(o,n){return"translate("+N(L(o,n))+","+M(H(o,n))+")"}).attr("d",function(n,p){var o=h/i[0].values.length*0.9;return"m0,0l0,"+(M(J(n,p))-M(H(n,p)))+"l"+-o/2+",0l"+o/2+",0l0,"+(M(G(n,p))-M(J(n,p)))+"l0,"+(M(I(n,p))-M(G(n,p)))+"l"+o/2+",0l"+-o/2+",0z"})}),X}var W,V,U,T,S={top:0,right:0,bottom:0,left:0},R=null,Q=null,P=Math.floor(10000*Math.random()),O=null,N=d3.scale.linear(),M=d3.scale.linear(),L=function(c){return c.x},K=function(c){return c.y},J=function(c){return c.open},I=function(c){return c.close},H=function(c){return c.high},G=function(c){return c.low},F=[],E=[],D=!1,C=!0,B=b.utils.defaultColor(),A=!1,a=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return X.highlightPoint=function(d,e){X.clearHighlights(),O.select(".nv-ohlcBar .nv-tick-0-"+d).classed("hover",e)},X.clearHighlights=function(){O.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},X.dispatch=a,X.options=b.utils.optionsFunc.bind(X),X._options=Object.create({},{width:{get:function(){return R},set:function(c){R=c}},height:{get:function(){return Q},set:function(c){Q=c}},xScale:{get:function(){return N},set:function(c){N=c}},yScale:{get:function(){return M},set:function(c){M=c}},xDomain:{get:function(){return W},set:function(c){W=c}},yDomain:{get:function(){return V},set:function(c){V=c}},xRange:{get:function(){return U},set:function(c){U=c}},yRange:{get:function(){return T},set:function(c){T=c}},forceX:{get:function(){return F},set:function(c){F=c}},forceY:{get:function(){return E},set:function(c){E=c}},padData:{get:function(){return D},set:function(c){D=c}},clipEdge:{get:function(){return C},set:function(c){C=c}},id:{get:function(){return P},set:function(c){P=c}},interactive:{get:function(){return A},set:function(c){A=c}},x:{get:function(){return L},set:function(c){L=c}},y:{get:function(){return K},set:function(c){K=c}},open:{get:function(){return J()},set:function(c){J=c}},close:{get:function(){return I()},set:function(c){I=c}},high:{get:function(){return H},set:function(c){H=c}},low:{get:function(){return G},set:function(c){G=c}},margin:{get:function(){return S},set:function(c){S.top=void 0!=c.top?c.top:S.top,S.right=void 0!=c.right?c.right:S.right,S.bottom=void 0!=c.bottom?c.bottom:S.bottom,S.left=void 0!=c.left?c.left:S.left}},color:{get:function(){return B},set:function(c){B=b.utils.getColor(c)}}}),b.utils.initOptions(X),X},b.models.parallelCoordinates=function(){function B(c){return c.each(function(ad){function ac(C){return R(v.map(function(D){if(isNaN(C[D])||isNaN(parseFloat(C[D]))){var H=w[D].domain(),G=w[D].range(),F=H[0]-(H[1]-H[0])/9;if(j.indexOf(D)<0){var E=d3.scale.linear().domain([F,H[1]]).range([m-12,G[1]]);w[D].brush.y(E),j.push(D)}return[x(D),w[D](F)]}return j.length>0?(W.style("display","inline"),T.style("display","inline")):(W.style("display","none"),T.style("display","none")),[x(D),w[D](C[D])]}))}function aa(){var D=v.filter(function(E){return !w[E].brush.empty()}),C=D.map(function(E){return w[E].brush.extent()});s=[],D.forEach(function(E,F){s[F]={dimension:E,extent:C[F]}}),r=[],f.style("display",function(F){var E=D.every(function(G,H){return isNaN(F[G])&&C[H][0]==w[G].brush.y().domain()[0]?!0:C[H][0]<=F[G]&&F[G]<=C[H][1]});return E&&r.push(F),E?null:"none"}),a.brush({filters:s,active:r})}function Y(C){q[C]=this.parentNode.__origin__=x(C),g.attr("visibility","hidden")}function V(C){q[C]=Math.min(o,Math.max(0,this.parentNode.__origin__+=d3.event.x)),f.attr("d",ac),v.sort(function(E,D){return S(E)-S(D)}),x.domain(v),e.attr("transform",function(D){return"translate("+S(D)+")"})}function U(C){delete this.parentNode.__origin__,delete q[C],d3.select(this.parentNode).attr("transform","translate("+x(C)+")"),f.attr("d",ac),g.attr("d",ac).attr("visibility",null)}function S(D){var C=q[D];return null==C?x(D):C}var Q=d3.select(this),o=b.utils.availableWidth(z,Q,A),m=b.utils.availableHeight(y,Q,A);b.utils.initSVG(Q),r=ad,x.rangePoints([0,o],1).domain(v);var k={};v.forEach(function(C){var D=d3.extent(ad,function(E){return +E[C]});return k[C]=!1,void 0===D[0]&&(k[C]=!0,D[0]=0,D[1]=0),D[0]===D[1]&&(D[0]=D[0]-1,D[1]=D[1]+1),w[C]=d3.scale.linear().domain(D).range([0.9*(m-12),0]),w[C].brush=d3.svg.brush().y(w[C]).on("brush",aa),"name"!=C});var i=Q.selectAll("g.nv-wrap.nv-parallelCoordinates").data([ad]),ab=i.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),Z=ab.append("g"),X=i.select("g");Z.append("g").attr("class","nv-parallelCoordinates background"),Z.append("g").attr("class","nv-parallelCoordinates foreground"),Z.append("g").attr("class","nv-parallelCoordinates missingValuesline"),i.attr("transform","translate("+A.left+","+A.top+")");var W,T,R=d3.svg.line().interpolate("cardinal").tension(p),P=d3.svg.axis().orient("left"),n=d3.behavior.drag().on("dragstart",Y).on("drag",V).on("dragend",U),l=x.range()[1]-x.range()[0],j=[],h=[0+l/2,m-12,o-l/2,m-12];W=i.select(".missingValuesline").selectAll("line").data([h]),W.enter().append("line"),W.exit().remove(),W.attr("x1",function(C){return C[0]}).attr("y1",function(C){return C[1]}).attr("x2",function(C){return C[2]}).attr("y2",function(C){return C[3]}),T=i.select(".missingValuesline").selectAll("text").data(["undefined values"]),T.append("text").data(["undefined values"]),T.enter().append("text"),T.exit().remove(),T.attr("y",m).attr("x",o-92-l/2).text(function(C){return C});var g=i.select(".background").selectAll("path").data(ad);g.enter().append("path"),g.exit().remove(),g.attr("d",ac);var f=i.select(".foreground").selectAll("path").data(ad);f.enter().append("path"),f.exit().remove(),f.attr("d",ac).attr("stroke",t),f.on("mouseover",function(D,C){d3.select(this).classed("hover",!0),a.elementMouseover({label:D.name,data:D.data,index:C,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})}),f.on("mouseout",function(D,C){d3.select(this).classed("hover",!1),a.elementMouseout({label:D.name,data:D.data,index:C})});var e=X.selectAll(".dimension").data(v),d=e.enter().append("g").attr("class","nv-parallelCoordinates dimension");d.append("g").attr("class","nv-parallelCoordinates nv-axis"),d.append("g").attr("class","nv-parallelCoordinates-brush"),d.append("text").attr("class","nv-parallelCoordinates nv-label"),e.attr("transform",function(C){return"translate("+x(C)+",0)"}),e.exit().remove(),e.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(C){a.elementMouseover({dim:C,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(C){a.elementMouseout({dim:C})}).call(n),e.select(".nv-axis").each(function(D,C){d3.select(this).call(P.scale(w[D]).tickFormat(d3.format(u[C])))}),e.select(".nv-parallelCoordinates-brush").each(function(C){d3.select(this).call(w[C].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),B}var A={top:30,right:0,bottom:10,left:0},z=null,y=null,x=d3.scale.ordinal(),w={},v=[],u=[],t=b.utils.defaultColor(),s=[],r=[],q=[],p=1,a=d3.dispatch("brush","elementMouseover","elementMouseout");return B.dispatch=a,B.options=b.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return z},set:function(c){z=c}},height:{get:function(){return y},set:function(c){y=c}},dimensionNames:{get:function(){return v},set:function(c){v=c}},dimensionFormats:{get:function(){return u},set:function(c){u=c}},lineTension:{get:function(){return p},set:function(c){p=c}},dimensions:{get:function(){return v},set:function(c){b.deprecated("dimensions","use dimensionNames instead"),v=c}},margin:{get:function(){return A},set:function(c){A.top=void 0!==c.top?c.top:A.top,A.right=void 0!==c.right?c.right:A.right,A.bottom=void 0!==c.bottom?c.bottom:A.bottom,A.left=void 0!==c.left?c.left:A.left}},color:{get:function(){return t},set:function(c){t=b.utils.getColor(c)}}}),b.utils.initOptions(B),B},b.models.pie=function(){function af(c){return K.reset(),c.each(function(A){function z(ag,D){ag.endAngle=isNaN(ag.endAngle)?0:ag.endAngle,ag.startAngle=isNaN(ag.startAngle)?0:ag.startAngle,R||(ag.innerRadius=0);var ah=d3.interpolate(this._current,ag);return this._current=ah(0),function(ai){return O[D](ah(ai))}}var y=ad-ae.left-ae.right,x=ac-ae.top-ae.bottom,w=Math.min(y,x)/2,v=[],u=[];if(Y=d3.select(this),0===a.length){for(var t=w-w/5,s=E*w,r=0;r<A[0].length;r++){v.push(t),u.push(s)}}else{v=a.map(function(D){return(D.outer-D.outer/5)*w}),u=a.map(function(D){return(D.inner-D.inner/5)*w}),E=d3.min(a.map(function(D){return D.inner-D.inner/5}))}b.utils.initSVG(Y);var q=Y.selectAll(".nv-wrap.nv-pie").data(A),p=q.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+Z),o=p.append("g"),n=q.select("g"),m=o.append("g").attr("class","nv-pie");o.append("g").attr("class","nv-pieLabels"),q.attr("transform","translate("+ae.left+","+ae.top+")"),n.select(".nv-pie").attr("transform","translate("+y/2+","+x/2+")"),n.select(".nv-pieLabels").attr("transform","translate("+y/2+","+x/2+")"),Y.on("click",function(ag,D){Q.chartClick({data:ag,index:D,pos:d3.event,id:Z})}),O=[],M=[];for(var r=0;r<A[0].length;r++){var l=d3.svg.arc().outerRadius(v[r]),j=d3.svg.arc().outerRadius(v[r]+5);I!==!1&&(l.startAngle(I),j.startAngle(I)),G!==!1&&(l.endAngle(G),j.endAngle(G)),R&&(l.innerRadius(u[r]),j.innerRadius(u[r])),l.cornerRadius&&F&&(l.cornerRadius(F),j.cornerRadius(F)),O.push(l),M.push(j)}var i=d3.layout.pie().sort(null).value(function(D){return D.disabled?0:aa(D)});i.padAngle&&H&&i.padAngle(H),R&&P&&(m.append("text").attr("class","nv-pie-title"),q.select(".nv-pie-title").style("text-anchor","middle").text(function(){return P}).style("font-size",Math.min(y,x)*E*2/(P.length+2)+"px").attr("dy","0.35em").attr("transform",function(){return"translate(0, "+L+")"}));var h=q.select(".nv-pie").selectAll(".nv-slice").data(i),g=q.select(".nv-pieLabels").selectAll(".nv-label").data(i);h.exit().remove(),g.exit().remove();var f=h.enter().append("g");f.attr("class","nv-slice"),f.on("mouseover",function(ag,D){d3.select(this).classed("hover",!0),N&&d3.select(this).select("path").transition().duration(70).attr("d",M[D]),Q.elementMouseover({data:ag.data,index:D,color:d3.select(this).style("fill")})}),f.on("mouseout",function(ag,D){d3.select(this).classed("hover",!1),N&&d3.select(this).select("path").transition().duration(50).attr("d",O[D]),Q.elementMouseout({data:ag.data,index:D})}),f.on("mousemove",function(ag,D){Q.elementMousemove({data:ag.data,index:D})}),f.on("click",function(ag,D){Q.elementClick({data:ag.data,index:D,color:d3.select(this).style("fill")})}),f.on("dblclick",function(ag,D){Q.elementDblClick({data:ag.data,index:D,color:d3.select(this).style("fill")})}),h.attr("fill",function(ag,D){return X(ag.data,D)}),h.attr("stroke",function(ag,D){return X(ag.data,D)});f.append("path").each(function(D){this._current=D});if(h.select("path").transition().attr("d",function(ag,D){return O[D](ag)}).attrTween("d",z),V){for(var e=[],r=0;r<A[0].length;r++){e.push(O[r]),U?R&&(e[r]=d3.svg.arc().outerRadius(O[r].outerRadius()),I!==!1&&e[r].startAngle(I),G!==!1&&e[r].endAngle(G)):R||e[r].innerRadius(0)}g.enter().append("g").classed("nv-label",!0).each(function(ag){var D=d3.select(this);D.attr("transform",function(ai,ah){if(J){ai.outerRadius=v[ah]+10,ai.innerRadius=v[ah]+15;var aj=(ai.startAngle+ai.endAngle)/2*(180/Math.PI);return(ai.startAngle+ai.endAngle)/2<Math.PI?aj-=90:aj+=90,"translate("+e[ah].centroid(ai)+") rotate("+aj+")"}return ai.outerRadius=w+10,ai.innerRadius=w+15,"translate("+e[ah].centroid(ai)+")"}),D.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),D.append("text").style("text-anchor",J?(ag.startAngle+ag.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var d={},k=14,C=140,B=function(D){return Math.floor(D[0]/C)*C+","+Math.floor(D[1]/k)*k};g.watchTransition(K,"pie labels").attr("transform",function(ag,D){if(J){ag.outerRadius=v[D]+10,ag.innerRadius=v[D]+15;var aj=(ag.startAngle+ag.endAngle)/2*(180/Math.PI);return(ag.startAngle+ag.endAngle)/2<Math.PI?aj-=90:aj+=90,"translate("+e[D].centroid(ag)+") rotate("+aj+")"}ag.outerRadius=w+10,ag.innerRadius=w+15;var ai=e[D].centroid(ag);if(ag.value){var ah=B(ai);d[ah]&&(ai[1]-=k),d[B(ai)]=!0}return"translate("+ai+")"}),g.select(".nv-label text").style("text-anchor",function(D){return J?(D.startAngle+D.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(ag,D){var ai=(ag.endAngle-ag.startAngle)/(2*Math.PI),ah="";if(!ag.value||S>ai){return""}if("function"==typeof T){ah=T(ag,D,{key:ab(ag.data),value:aa(ag.data),percent:W(ai)})}else{switch(T){case"key":ah=ab(ag.data);break;case"value":ah=W(aa(ag.data));break;case"percent":ah=d3.format("%")(ai)}}return ah})}}),K.renderEnd("pie immediate"),af}var ae={top:0,right:0,bottom:0,left:0},ad=500,ac=500,ab=function(c){return c.x},aa=function(c){return c.y},Z=Math.floor(10000*Math.random()),Y=null,X=b.utils.defaultColor(),W=d3.format(",.2f"),V=!0,U=!1,T="key",S=0.02,R=!1,P=!1,N=!0,L=0,J=!1,I=!1,H=!1,G=!1,F=0,E=0.5,a=[],Q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),O=[],M=[],K=b.utils.renderWatch(Q);return af.dispatch=Q,af.options=b.utils.optionsFunc.bind(af),af._options=Object.create({},{arcsRadius:{get:function(){return a},set:function(c){a=c}},width:{get:function(){return ad},set:function(c){ad=c}},height:{get:function(){return ac},set:function(c){ac=c}},showLabels:{get:function(){return V},set:function(c){V=c}},title:{get:function(){return P},set:function(c){P=c}},titleOffset:{get:function(){return L},set:function(c){L=c}},labelThreshold:{get:function(){return S},set:function(c){S=c}},valueFormat:{get:function(){return W},set:function(c){W=c}},x:{get:function(){return ab},set:function(c){ab=c}},id:{get:function(){return Z},set:function(c){Z=c}},endAngle:{get:function(){return G},set:function(c){G=c}},startAngle:{get:function(){return I},set:function(c){I=c}},padAngle:{get:function(){return H},set:function(c){H=c}},cornerRadius:{get:function(){return F},set:function(c){F=c}},donutRatio:{get:function(){return E},set:function(c){E=c}},labelsOutside:{get:function(){return U},set:function(c){U=c}},labelSunbeamLayout:{get:function(){return J},set:function(c){J=c}},donut:{get:function(){return R},set:function(c){R=c}},growOnHover:{get:function(){return N},set:function(c){N=c}},pieLabelsOutside:{get:function(){return U},set:function(c){U=c,b.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return U},set:function(c){U=c,b.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return W},set:function(c){W=c,b.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return ae},set:function(c){ae.top="undefined"!=typeof c.top?c.top:ae.top,ae.right="undefined"!=typeof c.right?c.right:ae.right,ae.bottom="undefined"!=typeof c.bottom?c.bottom:ae.bottom,ae.left="undefined"!=typeof c.left?c.left:ae.left}},y:{get:function(){return aa},set:function(c){aa=d3.functor(c)}},color:{get:function(){return X},set:function(c){X=b.utils.getColor(c)}},labelType:{get:function(){return T},set:function(c){T=c||"key"}}}),b.utils.initOptions(af),af},b.models.pieChart=function(){function J(c){return u.reset(),u.models(I),c.each(function(i){var h=d3.select(this);b.utils.initSVG(h);var g=b.utils.availableWidth(E,h,F),f=b.utils.availableHeight(D,h,F);if(J.update=function(){h.transition().call(J)},J.container=this,z.setter(a(i),J.update).getter(t(i)).update(),z.disabled=i.map(function(e){return !!e.disabled}),!y){var d;y={};for(d in z){y[d]=z[d] instanceof Array?z[d].slice(0):z[d]}}if(!i||!i.length){return b.utils.noData(J,h),J}h.selectAll(".nv-noData").remove();var r=h.selectAll("g.nv-wrap.nv-pieChart").data([i]),p=r.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),m=r.select("g");if(p.append("g").attr("class","nv-pieWrap"),p.append("g").attr("class","nv-legendWrap"),C){if("top"===B){H.width(g).key(I.x()),r.select(".nv-legendWrap").datum(i).call(H),F.top!=H.height()&&(F.top=H.height(),f=b.utils.availableHeight(D,h,F)),r.select(".nv-legendWrap").attr("transform","translate(0,"+-F.top+")")}else{if("right"===B){var l=b.models.legend().width();l>g/2&&(l=g/2),H.height(f).key(I.x()),H.width(l),g-=H.width(),r.select(".nv-legendWrap").datum(i).call(H).attr("transform","translate("+g+",0)")}}}r.attr("transform","translate("+F.left+","+F.top+")"),I.width(g).height(f);var j=m.select(".nv-pieWrap").datum([i]);d3.transition(j).call(I),H.dispatch.on("stateChange",function(e){for(var k in e){z[k]=e[k]}v.stateChange(z),J.update()}),v.on("changeState",function(e){"undefined"!=typeof e.disabled&&(i.forEach(function(k,n){k.disabled=e.disabled[n]}),z.disabled=e.disabled),J.update()})}),u.renderEnd("pieChart immediate"),J}var I=b.models.pie(),H=b.models.legend(),G=b.models.tooltip(),F={top:30,right:20,bottom:20,left:20},E=null,D=null,C=!0,B="top",A=b.utils.defaultColor(),z=b.utils.state(),y=null,x=null,w=250,v=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");G.headerEnabled(!1).duration(0).valueFormatter(function(d,c){return I.valueFormat()(d,c)});var u=b.utils.renderWatch(v),t=function(c){return function(){return{active:c.map(function(d){return !d.disabled})}}},a=function(c){return function(d){void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};return I.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:J.x()(c.data),value:J.y()(c.data),color:c.color},G.data(c).hidden(!1)}),I.dispatch.on("elementMouseout.tooltip",function(){G.hidden(!0)}),I.dispatch.on("elementMousemove.tooltip",function(){G.position({top:d3.event.pageY,left:d3.event.pageX})()}),J.legend=H,J.dispatch=v,J.pie=I,J.tooltip=G,J.options=b.utils.optionsFunc.bind(J),J._options=Object.create({},{noData:{get:function(){return x},set:function(c){x=c}},showLegend:{get:function(){return C},set:function(c){C=c}},legendPosition:{get:function(){return B},set:function(c){B=c}},defaultState:{get:function(){return y},set:function(c){y=c}},tooltips:{get:function(){return G.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),G.enabled(!!c)}},tooltipContent:{get:function(){return G.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),G.contentGenerator(c)}},color:{get:function(){return A},set:function(c){A=c,H.color(A),I.color(A)}},duration:{get:function(){return w},set:function(c){w=c,u.reset(w)}},margin:{get:function(){return F},set:function(c){F.top=void 0!==c.top?c.top:F.top,F.right=void 0!==c.right?c.right:F.right,F.bottom=void 0!==c.bottom?c.bottom:F.bottom,F.left=void 0!==c.left?c.left:F.left}}}),b.utils.inheritOptions(J,I),b.utils.initOptions(J),J},b.models.scatter=function(){function aG(c){return R.reset(),c.each(function(o){function n(){if(S=!1,!ak){return !1}if(U===!0){var p=d3.merge(o.map(function(w,v){return w.values.map(function(x,A){var z=ar(x,A),y=aq(x,A);return[av(z)+0.0001*Math.random(),au(y)+0.0001*Math.random(),v,A,x]}).filter(function(y,x){return aj(y[4],x)})}));if(0==p.length){return !1}p.length<3&&(p.push([av.range()[0]-20,au.range()[0]-20,null,null]),p.push([av.range()[1]+20,au.range()[1]+20,null,null]),p.push([av.range()[0]-20,au.range()[0]+20,null,null]),p.push([av.range()[1]+20,au.range()[1]-20,null,null]));var u=d3.geom.polygon([[-10,-10],[-10,az+10],[aA+10,az+10],[aA+10,-10]]),t=d3.geom.voronoi(p).map(function(v,w){return{data:u.clip(v),series:p[w][2],point:p[w][3]}});i.select(".nv-point-paths").selectAll("path").remove();var r=i.select(".nv-point-paths").selectAll("path").data(t),q=r.enter().append("svg:path").attr("d",function(v){return v&&v.data&&0!==v.data.length?"M"+v.data.join(",")+"Z":"M 0 0"}).attr("id",function(w,v){return"nv-path-"+v}).attr("clip-path",function(w,v){return"url(#nv-clip-"+ax+"-"+v+")"});ae&&q.style("fill",d3.rgb(230,230,230)).style("fill-opacity",0.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),af&&(i.select(".nv-point-clips").selectAll("clipPath").remove(),i.select(".nv-point-clips").selectAll("clipPath").data(p).enter().append("svg:clipPath").attr("id",function(w,v){return"nv-clip-"+ax+"-"+v}).append("svg:circle").attr("cx",function(v){return v[0]}).attr("cy",function(v){return v[1]}).attr("r",ad));var s=function(v,C){if(S){return 0}var B=o[v.series];if(void 0!==B){var A=B.values[v.point];A.color=ay(B,v.series),A.x=ar(A),A.y=aq(A);var z=aw.node().getBoundingClientRect(),y=window.pageYOffset||document.documentElement.scrollTop,x=window.pageXOffset||document.documentElement.scrollLeft,w={left:av(ar(A,v.point))+z.left+x+aB.left+10,top:au(aq(A,v.point))+z.top+y+aB.top+10};C({point:A,series:B,pos:w,seriesIndex:v.series,pointIndex:v.point})}};r.on("click",function(v){s(v,V.elementClick)}).on("dblclick",function(v){s(v,V.elementDblClick)}).on("mouseover",function(v){s(v,V.elementMouseover)}).on("mouseout",function(v){s(v,V.elementMouseout)})}else{i.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(v,y){if(S||!o[v.series]){return 0}var x=o[v.series],w=x.values[y];V.elementClick({point:w,series:x,pos:[av(ar(w,y))+aB.left,au(aq(w,y))+aB.top],seriesIndex:v.series,pointIndex:y})}).on("dblclick",function(v,y){if(S||!o[v.series]){return 0}var x=o[v.series],w=x.values[y];V.elementDblClick({point:w,series:x,pos:[av(ar(w,y))+aB.left,au(aq(w,y))+aB.top],seriesIndex:v.series,pointIndex:y})}).on("mouseover",function(v,y){if(S||!o[v.series]){return 0}var x=o[v.series],w=x.values[y];V.elementMouseover({point:w,series:x,pos:[av(ar(w,y))+aB.left,au(aq(w,y))+aB.top],seriesIndex:v.series,pointIndex:y,color:ay(v,y)})}).on("mouseout",function(v,y){if(S||!o[v.series]){return 0}var x=o[v.series],w=x.values[y];V.elementMouseout({point:w,series:x,seriesIndex:v.series,pointIndex:y,color:ay(v,y)})})}}aw=d3.select(this);var m=b.utils.availableWidth(aA,aw,aB),k=b.utils.availableHeight(az,aw,aB);b.utils.initSVG(aw),o.forEach(function(q,p){q.values.forEach(function(r){r.series=p})});var j=ac&&ab&&Y?[]:d3.merge(o.map(function(p){return p.values.map(function(r,q){return{x:ar(r,q),y:aq(r,q),size:ap(r,q)}})}));av.domain(ac||d3.extent(j.map(function(p){return p.x}).concat(an))),av.range(ai&&o[0]?aa||[(m*ah+m)/(2*o[0].values.length),m-m*(1+ah)/(2*o[0].values.length)]:aa||[0,m]),au.domain(ab||d3.extent(j.map(function(p){return p.y}).concat(am))).range(Z||[k,0]),at.domain(Y||d3.extent(j.map(function(p){return p.size}).concat(al))).range(X||a),W=av.domain()[0]===av.domain()[1]||au.domain()[0]===au.domain()[1],av.domain()[0]===av.domain()[1]&&av.domain(av.domain()[0]?[av.domain()[0]-0.01*av.domain()[0],av.domain()[1]+0.01*av.domain()[1]]:[-1,1]),au.domain()[0]===au.domain()[1]&&au.domain(au.domain()[0]?[au.domain()[0]-0.01*au.domain()[0],au.domain()[1]+0.01*au.domain()[1]]:[-1,1]),isNaN(av.domain()[0])&&av.domain([-1,1]),isNaN(au.domain()[0])&&au.domain([-1,1]),aF=aF||av,aE=aE||au,aD=aD||at;var i=aw.selectAll("g.nv-wrap.nv-scatter").data([o]),h=i.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+ax),g=h.append("defs"),f=h.append("g"),e=i.select("g");i.classed("nv-single-point",W),f.append("g").attr("class","nv-groups"),f.append("g").attr("class","nv-point-paths"),h.append("g").attr("class","nv-point-clips"),i.attr("transform","translate("+aB.left+","+aB.top+")"),g.append("clipPath").attr("id","nv-edge-clip-"+ax).append("rect"),i.select("#nv-edge-clip-"+ax+" rect").attr("width",m).attr("height",k>0?k:0),e.attr("clip-path",ag?"url(#nv-edge-clip-"+ax+")":""),S=!0;var d=i.select(".nv-groups").selectAll(".nv-group").data(function(p){return p},function(p){return p.key});d.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001),d.exit().remove(),d.attr("class",function(q,p){return"nv-group nv-series-"+p}).classed("hover",function(p){return p.hover}),d.watchTransition(R,"scatter: groups").style("fill",function(q,p){return ay(q,p)}).style("stroke",function(q,p){return ay(q,p)}).style("stroke-opacity",1).style("fill-opacity",0.5);var l=d.selectAll("path.nv-point").data(function(p){return p.values.map(function(r,q){return[r,q]}).filter(function(r,q){return aj(r[0],q)})});l.enter().append("path").style("fill",function(p){return p.color}).style("stroke",function(p){return p.color}).attr("transform",function(p){return"translate("+aF(ar(p[0],p[1]))+","+aE(aq(p[0],p[1]))+")"}).attr("d",b.utils.symbol().type(function(p){return ao(p[0])}).size(function(p){return at(ap(p[0],p[1]))})),l.exit().remove(),d.exit().selectAll("path.nv-point").watchTransition(R,"scatter exit").attr("transform",function(p){return"translate("+av(ar(p[0],p[1]))+","+au(aq(p[0],p[1]))+")"}).remove(),l.each(function(p){d3.select(this).classed("nv-point",!0).classed("nv-point-"+p[1],!0).classed("nv-noninteractive",!ak).classed("hover",!1)}),l.watchTransition(R,"scatter points").attr("transform",function(p){return"translate("+av(ar(p[0],p[1]))+","+au(aq(p[0],p[1]))+")"}).attr("d",b.utils.symbol().type(function(p){return ao(p[0])}).size(function(p){return at(ap(p[0],p[1]))})),clearTimeout(aC),aC=setTimeout(n,300),aF=av.copy(),aE=au.copy(),aD=at.copy()}),R.renderEnd("scatter immediate"),aG}var aF,aE,aD,aC,aB={top:0,right:0,bottom:0,left:0},aA=null,az=null,ay=b.utils.defaultColor(),ax=Math.floor(100000*Math.random()),aw=null,av=d3.scale.linear(),au=d3.scale.linear(),at=d3.scale.linear(),ar=function(c){return c.x},aq=function(c){return c.y},ap=function(c){return c.size||1},ao=function(c){return c.shape||"circle"},an=[],am=[],al=[],ak=!0,aj=function(c){return !c.notActive},ai=!1,ah=0.1,ag=!1,af=!0,ae=!1,ad=function(){return 25},ac=null,ab=null,aa=null,Z=null,Y=null,X=null,W=!1,V=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),U=!0,T=250,S=!1,R=b.utils.renderWatch(V,T),a=[16,256];return aG.dispatch=V,aG.options=b.utils.optionsFunc.bind(aG),aG._calls=new function(){this.clearHighlights=function(){return b.dom.write(function(){aw.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(e,g,f){b.dom.write(function(){aw.select(" .nv-series-"+e+" .nv-point-"+g).classed("hover",f)})}},V.on("elementMouseover.point",function(c){ak&&aG._calls.highlightPoint(c.seriesIndex,c.pointIndex,!0)}),V.on("elementMouseout.point",function(c){ak&&aG._calls.highlightPoint(c.seriesIndex,c.pointIndex,!1)}),aG._options=Object.create({},{width:{get:function(){return aA},set:function(c){aA=c}},height:{get:function(){return az},set:function(c){az=c}},xScale:{get:function(){return av},set:function(c){av=c}},yScale:{get:function(){return au},set:function(c){au=c}},pointScale:{get:function(){return at},set:function(c){at=c}},xDomain:{get:function(){return ac},set:function(c){ac=c}},yDomain:{get:function(){return ab},set:function(c){ab=c}},pointDomain:{get:function(){return Y},set:function(c){Y=c}},xRange:{get:function(){return aa},set:function(c){aa=c}},yRange:{get:function(){return Z},set:function(c){Z=c}},pointRange:{get:function(){return X},set:function(c){X=c}},forceX:{get:function(){return an},set:function(c){an=c}},forceY:{get:function(){return am},set:function(c){am=c}},forcePoint:{get:function(){return al},set:function(c){al=c}},interactive:{get:function(){return ak},set:function(c){ak=c}},pointActive:{get:function(){return aj},set:function(c){aj=c}},padDataOuter:{get:function(){return ah},set:function(c){ah=c}},padData:{get:function(){return ai},set:function(c){ai=c}},clipEdge:{get:function(){return ag},set:function(c){ag=c}},clipVoronoi:{get:function(){return af},set:function(c){af=c}},clipRadius:{get:function(){return ad},set:function(c){ad=c}},showVoronoi:{get:function(){return ae},set:function(c){ae=c}},id:{get:function(){return ax},set:function(c){ax=c}},x:{get:function(){return ar},set:function(c){ar=d3.functor(c)}},y:{get:function(){return aq},set:function(c){aq=d3.functor(c)}},pointSize:{get:function(){return ap},set:function(c){ap=d3.functor(c)}},pointShape:{get:function(){return ao},set:function(c){ao=d3.functor(c)}},margin:{get:function(){return aB},set:function(c){aB.top=void 0!==c.top?c.top:aB.top,aB.right=void 0!==c.right?c.right:aB.right,aB.bottom=void 0!==c.bottom?c.bottom:aB.bottom,aB.left=void 0!==c.left?c.left:aB.left}},duration:{get:function(){return T},set:function(c){T=c,R.reset(T)}},color:{get:function(){return ay},set:function(c){ay=b.utils.getColor(c)}},useVoronoi:{get:function(){return U},set:function(c){U=c,U===!1&&(af=!1)}}}),b.utils.initOptions(aG),aG},b.models.scatterChart=function(){function aj(c){return O.reset(),O.models(ai),N&&O.models(ah),L&&O.models(ag),T&&O.models(ae),R&&O.models(ad),c.each(function(h){Y=d3.select(this),b.utils.initSVG(Y);var n=b.utils.availableWidth(aa,Y,ab),m=b.utils.availableHeight(Z,Y,ab);if(aj.update=function(){0===U?Y.call(aj):Y.transition().duration(U).call(aj)},aj.container=this,I.setter(K(h),aj.update).getter(M(h)).update(),I.disabled=h.map(function(o){return !!o.disabled}),!H){var l;H={};for(l in I){H[l]=I[l] instanceof Array?I[l].slice(0):I[l]}}if(!(h&&h.length&&h.filter(function(o){return o.values.length}).length)){return b.utils.noData(aj,Y),O.renderEnd("scatter immediate"),aj}Y.selectAll(".nv-noData").remove(),W=ai.xScale(),V=ai.yScale();var k=Y.selectAll("g.nv-wrap.nv-scatterChart").data([h]),j=k.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+ai.id()),i=j.append("g"),g=k.select("g");if(i.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),i.append("g").attr("class","nv-x nv-axis"),i.append("g").attr("class","nv-y nv-axis"),i.append("g").attr("class","nv-scatterWrap"),i.append("g").attr("class","nv-regressionLinesWrap"),i.append("g").attr("class","nv-distWrap"),i.append("g").attr("class","nv-legendWrap"),J&&g.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),P){var f=n;af.width(f),k.select(".nv-legendWrap").datum(h).call(af),ab.top!=af.height()&&(ab.top=af.height(),m=b.utils.availableHeight(Z,Y,ab)),k.select(".nv-legendWrap").attr("transform","translate(0,"+-ab.top+")")}k.attr("transform","translate("+ab.left+","+ab.top+")"),ai.width(n).height(m).color(h.map(function(p,o){return p.color=p.color||X(p,o),p.color}).filter(function(p,o){return !h[o].disabled})),k.select(".nv-scatterWrap").datum(h.filter(function(o){return !o.disabled})).call(ai),k.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+ai.id()+")");var e=k.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(o){return o});e.enter().append("g").attr("class","nv-regLines");var d=e.selectAll(".nv-regLine").data(function(o){return[o]});d.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),d.filter(function(o){return o.intercept&&o.slope}).watchTransition(O,"scatterPlusLineChart: regline").attr("x1",W.range()[0]).attr("x2",W.range()[1]).attr("y1",function(o){return V(W.domain()[0]*o.slope+o.intercept)}).attr("y2",function(o){return V(W.domain()[1]*o.slope+o.intercept)}).style("stroke",function(p,o,q){return X(p,q)}).style("stroke-opacity",function(o){return o.disabled||"undefined"==typeof o.slope||"undefined"==typeof o.intercept?0:1}),N&&(ah.scale(W)._ticks(b.utils.calcTicksX(n/100,h)).tickSize(-m,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+")").call(ah)),L&&(ag.scale(V)._ticks(b.utils.calcTicksY(m/36,h)).tickSize(-n,0),g.select(".nv-y.nv-axis").call(ag)),T&&(ae.getData(ai.x()).scale(W).width(n).color(h.map(function(p,o){return p.color||X(p,o)}).filter(function(p,o){return !h[o].disabled})),i.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),g.select(".nv-distributionX").attr("transform","translate(0,"+V.range()[0]+")").datum(h.filter(function(o){return !o.disabled})).call(ae)),R&&(ad.getData(ai.y()).scale(V).width(m).color(h.map(function(p,o){return p.color||X(p,o)}).filter(function(p,o){return !h[o].disabled})),i.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),g.select(".nv-distributionY").attr("transform","translate("+(J?n:-ad.size())+",0)").datum(h.filter(function(o){return !o.disabled})).call(ad)),af.dispatch.on("stateChange",function(o){for(var p in o){I[p]=o[p]}G.stateChange(I),aj.update()}),G.on("changeState",function(o){"undefined"!=typeof o.disabled&&(h.forEach(function(p,q){p.disabled=o.disabled[q]}),I.disabled=o.disabled),aj.update()}),ai.dispatch.on("elementMouseout.tooltip",function(o){ac.hidden(!0),Y.select(".nv-chart-"+ai.id()+" .nv-series-"+o.seriesIndex+" .nv-distx-"+o.pointIndex).attr("y1",0),Y.select(".nv-chart-"+ai.id()+" .nv-series-"+o.seriesIndex+" .nv-disty-"+o.pointIndex).attr("x2",ad.size())}),ai.dispatch.on("elementMouseover.tooltip",function(o){Y.select(".nv-series-"+o.seriesIndex+" .nv-distx-"+o.pointIndex).attr("y1",o.pos.top-m-ab.top),Y.select(".nv-series-"+o.seriesIndex+" .nv-disty-"+o.pointIndex).attr("x2",o.pos.left+ae.size()-ab.left),ac.position(o.pos).data(o).hidden(!1)}),S=W.copy(),Q=V.copy()}),O.renderEnd("scatter with line immediate"),aj}var ai=b.models.scatter(),ah=b.models.axis(),ag=b.models.axis(),af=b.models.legend(),ae=b.models.distribution(),ad=b.models.distribution(),ac=b.models.tooltip(),ab={top:30,right:20,bottom:50,left:75},aa=null,Z=null,Y=null,X=b.utils.defaultColor(),W=ai.xScale(),V=ai.yScale(),T=!1,R=!1,P=!0,N=!0,L=!0,J=!1,I=b.utils.state(),H=null,G=d3.dispatch("stateChange","changeState","renderEnd"),a=null,U=250;ai.xScale(W).yScale(V),ah.orient("bottom").tickPadding(10),ag.orient(J?"right":"left").tickPadding(10),ae.axis("x"),ad.axis("y"),ac.headerFormatter(function(d,c){return ah.tickFormat()(d,c)}).valueFormatter(function(d,c){return ag.tickFormat()(d,c)});var S,Q,O=b.utils.renderWatch(G,U),M=function(c){return function(){return{active:c.map(function(d){return !d.disabled})}}},K=function(c){return function(d){void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}};return aj.dispatch=G,aj.scatter=ai,aj.legend=af,aj.xAxis=ah,aj.yAxis=ag,aj.distX=ae,aj.distY=ad,aj.tooltip=ac,aj.options=b.utils.optionsFunc.bind(aj),aj._options=Object.create({},{width:{get:function(){return aa},set:function(c){aa=c}},height:{get:function(){return Z},set:function(c){Z=c}},container:{get:function(){return Y},set:function(c){Y=c}},showDistX:{get:function(){return T},set:function(c){T=c}},showDistY:{get:function(){return R},set:function(c){R=c}},showLegend:{get:function(){return P},set:function(c){P=c}},showXAxis:{get:function(){return N},set:function(c){N=c}},showYAxis:{get:function(){return L},set:function(c){L=c}},defaultState:{get:function(){return H},set:function(c){H=c}},noData:{get:function(){return a},set:function(c){a=c}},duration:{get:function(){return U},set:function(c){U=c}},tooltips:{get:function(){return ac.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),ac.enabled(!!c)}},tooltipContent:{get:function(){return ac.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),ac.contentGenerator(c)}},tooltipXContent:{get:function(){return ac.contentGenerator()},set:function(){b.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return ac.contentGenerator()},set:function(){b.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return ab},set:function(c){ab.top=void 0!==c.top?c.top:ab.top,ab.right=void 0!==c.right?c.right:ab.right,ab.bottom=void 0!==c.bottom?c.bottom:ab.bottom,ab.left=void 0!==c.left?c.left:ab.left}},rightAlignYAxis:{get:function(){return J},set:function(c){J=c,ag.orient(c?"right":"left")}},color:{get:function(){return X},set:function(c){X=b.utils.getColor(c),af.color(X),ae.color(X),ad.color(X)}}}),b.utils.inheritOptions(aj,ai),b.utils.initOptions(aj),aj},b.models.sparkline=function(){function D(c){return c.each(function(d){var e=x-y.left-y.right,j=w-y.top-y.bottom;v=d3.select(this),b.utils.initSVG(v),t.domain(C||d3.extent(d,r)).range(A||[0,e]),s.domain(B||d3.extent(d,q)).range(z||[j,0]);var i=v.selectAll("g.nv-wrap.nv-sparkline").data([d]),h=i.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");h.append("g"),i.select("g");i.attr("transform","translate("+y.left+","+y.top+")");var g=i.selectAll("path").data(function(k){return[k]});g.enter().append("path"),g.exit().remove(),g.style("stroke",function(l,k){return l.color||a(l,k)}).attr("d",d3.svg.line().x(function(l,k){return t(r(l,k))}).y(function(l,k){return s(q(l,k))}));var f=i.selectAll("circle.nv-point").data(function(l){function k(E){if(-1!=E){var F=l[E];return F.pointIndex=E,F}return null}var p=l.map(function(F,E){return q(F,E)}),o=k(p.lastIndexOf(s.domain()[1])),n=k(p.indexOf(s.domain()[0])),m=k(p.length-1);return[n,o,m].filter(function(E){return null!=E})});f.enter().append("circle"),f.exit().remove(),f.attr("cx",function(k){return t(r(k,k.pointIndex))}).attr("cy",function(k){return s(q(k,k.pointIndex))}).attr("r",2).attr("class",function(k){return r(k,k.pointIndex)==t.domain()[1]?"nv-point nv-currentValue":q(k,k.pointIndex)==s.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),D}var C,B,A,z,y={top:2,right:0,bottom:2,left:0},x=400,w=32,v=null,u=!0,t=d3.scale.linear(),s=d3.scale.linear(),r=function(c){return c.x},q=function(c){return c.y},a=b.utils.getColor(["#000"]);return D.options=b.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return x},set:function(c){x=c}},height:{get:function(){return w},set:function(c){w=c}},xDomain:{get:function(){return C},set:function(c){C=c}},yDomain:{get:function(){return B},set:function(c){B=c}},xRange:{get:function(){return A},set:function(c){A=c}},yRange:{get:function(){return z},set:function(c){z=c}},xScale:{get:function(){return t},set:function(c){t=c}},yScale:{get:function(){return s},set:function(c){s=c}},animate:{get:function(){return u},set:function(c){u=c}},x:{get:function(){return r},set:function(c){r=d3.functor(c)}},y:{get:function(){return q},set:function(c){q=d3.functor(c)}},margin:{get:function(){return y},set:function(c){y.top=void 0!==c.top?c.top:y.top,y.right=void 0!==c.right?c.right:y.right,y.bottom=void 0!==c.bottom?c.bottom:y.bottom,y.left=void 0!==c.left?c.left:y.left}},color:{get:function(){return a},set:function(c){a=b.utils.getColor(c)}}}),b.utils.initOptions(D),D},b.models.sparklinePlus=function(){function D(c){return c.each(function(h){function f(){if(!v){var G=j.selectAll(".nv-hoverValue").data(w),p=G.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);G.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),G.attr("transform",function(H){return"translate("+C(A.x()(h[H],H))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),w.length&&(p.append("line").attr("x1",0).attr("y1",-z.top).attr("x2",0).attr("y2",o),p.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-z.top).attr("text-anchor","end").attr("dy",".9em"),j.select(".nv-hoverValue .nv-xValue").text(u(A.x()(h[w[0]],w[0]))),p.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-z.top).attr("text-anchor","start").attr("dy",".9em"),j.select(".nv-hoverValue .nv-yValue").text(t(A.y()(h[w[0]],w[0]))))}}function d(){function G(I,H){for(var L=Math.abs(A.x()(I[0],0)-H),K=0,J=0;J<I.length;J++){Math.abs(A.x()(I[J],J)-H)<L&&(L=Math.abs(A.x()(I[J],J)-H),K=J)}return K}if(!v){var p=d3.mouse(this)[0]-z.left;w=[G(h,Math.round(C.invert(p)))],f()}}var F=d3.select(this);b.utils.initSVG(F);var E=b.utils.availableWidth(y,F,z),o=b.utils.availableHeight(x,F,z);if(D.update=function(){F.call(D)},D.container=this,!h||!h.length){return b.utils.noData(D,F),D}F.selectAll(".nv-noData").remove();var n=A.y()(h[h.length-1],h.length-1);C=A.xScale(),B=A.yScale();var m=F.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),l=m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),k=l.append("g"),j=m.select("g");k.append("g").attr("class","nv-sparklineWrap"),k.append("g").attr("class","nv-valueWrap"),k.append("g").attr("class","nv-hoverArea"),m.attr("transform","translate("+z.left+","+z.top+")");var i=j.select(".nv-sparklineWrap");if(A.width(E).height(o),i.call(A),s){var g=j.select(".nv-valueWrap"),e=g.selectAll(".nv-currentValue").data([n]);e.enter().append("text").attr("class","nv-currentValue").attr("dx",q?-8:8).attr("dy",".9em").style("text-anchor",q?"end":"start"),e.attr("x",E+(q?z.right:0)).attr("y",r?function(p){return B(p)}:0).style("fill",A.color()(h[h.length-1],h.length-1)).text(t(n))}k.select(".nv-hoverArea").append("rect").on("mousemove",d).on("click",function(){v=!v}).on("mouseout",function(){w=[],f()}),j.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-z.left+","+-z.top+")"}).attr("width",E+z.left+z.right).attr("height",o+z.top)}),D}var C,B,A=b.models.sparkline(),z={top:15,right:100,bottom:10,left:50},y=null,x=null,w=[],v=!1,u=d3.format(",r"),t=d3.format(",.2f"),s=!0,r=!0,q=!1,a=null;return D.sparkline=A,D.options=b.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return y},set:function(c){y=c}},height:{get:function(){return x},set:function(c){x=c}},xTickFormat:{get:function(){return u},set:function(c){u=c}},yTickFormat:{get:function(){return t},set:function(c){t=c}},showLastValue:{get:function(){return s},set:function(c){s=c}},alignValue:{get:function(){return r},set:function(c){r=c}},rightAlignValue:{get:function(){return q},set:function(c){q=c}},noData:{get:function(){return a},set:function(c){a=c}},margin:{get:function(){return z},set:function(c){z.top=void 0!==c.top?c.top:z.top,z.right=void 0!==c.right?c.right:z.right,z.bottom=void 0!==c.bottom?c.bottom:z.bottom,z.left=void 0!==c.left?c.left:z.left}}}),b.utils.inheritOptions(D,A),b.utils.initOptions(D),D},b.models.stackedArea=function(){function N(c){return a.reset(),a.models(x),c.each(function(h){var r=J-K.left-K.right,n=I-K.top-K.bottom;F=d3.select(this),b.utils.initSVG(F),M=x.xScale(),L=x.yScale();var l=h;h.forEach(function(s,m){s.seriesIndex=m,s.values=s.values.map(function(t,u){return t.index=u,t.seriesIndex=m,t})});var k=h.filter(function(m){return !m.disabled});h=d3.layout.stack().order(A).offset(B).values(function(m){return m.values}).x(E).y(D).out(function(s,m,t){s.display={y:t,y0:m}})(k);var j=F.selectAll("g.nv-wrap.nv-stackedarea").data([h]),i=j.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),g=i.append("defs"),f=i.append("g"),e=j.select("g");f.append("g").attr("class","nv-areaWrap"),f.append("g").attr("class","nv-scatterWrap"),j.attr("transform","translate("+K.left+","+K.top+")"),0==x.forceY().length&&x.forceY().push(0),x.width(r).height(n).x(E).y(function(m){return m.display.y+m.display.y0}).forceY([0]).color(h.map(function(m){return m.color||H(m,m.seriesIndex)}));var d=e.select(".nv-scatterWrap").datum(h);d.call(x),g.append("clipPath").attr("id","nv-edge-clip-"+G).append("rect"),j.select("#nv-edge-clip-"+G+" rect").attr("width",r).attr("height",n),e.attr("clip-path",y?"url(#nv-edge-clip-"+G+")":"");var q=d3.svg.area().x(function(s,m){return M(E(s,m))}).y0(function(m){return L(m.display.y0)}).y1(function(m){return L(m.display.y+m.display.y0)}).interpolate(z),p=d3.svg.area().x(function(s,m){return M(E(s,m))}).y0(function(m){return L(m.display.y0)}).y1(function(m){return L(m.display.y0)}),o=e.select(".nv-areaWrap").selectAll("path.nv-area").data(function(m){return m});o.enter().append("path").attr("class",function(s,m){return"nv-area nv-area-"+m}).attr("d",function(m){return p(m.values,m.seriesIndex)}).on("mouseover",function(m){d3.select(this).classed("hover",!0),v.areaMouseover({point:m,series:m.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:m.seriesIndex})}).on("mouseout",function(m){d3.select(this).classed("hover",!1),v.areaMouseout({point:m,series:m.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:m.seriesIndex})}).on("click",function(m){d3.select(this).classed("hover",!1),v.areaClick({point:m,series:m.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:m.seriesIndex})}),o.exit().remove(),o.style("fill",function(m){return m.color||H(m,m.seriesIndex)}).style("stroke",function(m){return m.color||H(m,m.seriesIndex)}),o.watchTransition(a,"stackedArea path").attr("d",function(s,m){return q(s.values,m)}),x.dispatch.on("elementMouseover.area",function(m){e.select(".nv-chart-"+G+" .nv-area-"+m.seriesIndex).classed("hover",!0)}),x.dispatch.on("elementMouseout.area",function(m){e.select(".nv-chart-"+G+" .nv-area-"+m.seriesIndex).classed("hover",!1)}),N.d3_stackedOffset_stackPercent=function(s){var m,Q,P,O=s.length,u=s[0].length,t=[];for(Q=0;u>Q;++Q){for(m=0,P=0;m<l.length;m++){P+=D(l[m].values[Q])}if(P){for(m=0;O>m;m++){s[m][Q][1]/=P}}else{for(m=0;O>m;m++){s[m][Q][1]=0}}}for(Q=0;u>Q;++Q){t[Q]=0}return t}}),a.renderEnd("stackedArea immediate"),N}var M,L,K={top:0,right:0,bottom:0,left:0},J=960,I=500,H=b.utils.defaultColor(),G=Math.floor(100000*Math.random()),F=null,E=function(c){return c.x},D=function(c){return c.y},C="stack",B="zero",A="default",z="linear",y=!1,x=b.models.scatter(),w=250,v=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");x.pointSize(2.2).pointDomain([2.2,2.2]);var a=b.utils.renderWatch(v,w);return N.dispatch=v,N.scatter=x,x.dispatch.on("elementClick",function(){v.elementClick.apply(this,arguments)}),x.dispatch.on("elementMouseover",function(){v.elementMouseover.apply(this,arguments)}),x.dispatch.on("elementMouseout",function(){v.elementMouseout.apply(this,arguments)}),N.interpolate=function(c){return arguments.length?(z=c,N):z},N.duration=function(c){return arguments.length?(w=c,a.reset(w),x.duration(w),N):w},N.dispatch=v,N.scatter=x,N.options=b.utils.optionsFunc.bind(N),N._options=Object.create({},{width:{get:function(){return J},set:function(c){J=c}},height:{get:function(){return I},set:function(c){I=c}},clipEdge:{get:function(){return y},set:function(c){y=c}},offset:{get:function(){return B},set:function(c){B=c}},order:{get:function(){return A},set:function(c){A=c}},interpolate:{get:function(){return z},set:function(c){z=c}},x:{get:function(){return E},set:function(c){E=d3.functor(c)}},y:{get:function(){return D},set:function(c){D=d3.functor(c)}},margin:{get:function(){return K},set:function(c){K.top=void 0!==c.top?c.top:K.top,K.right=void 0!==c.right?c.right:K.right,K.bottom=void 0!==c.bottom?c.bottom:K.bottom,K.left=void 0!==c.left?c.left:K.left}},color:{get:function(){return H},set:function(c){H=b.utils.getColor(c)}},style:{get:function(){return C},set:function(c){switch(C=c){case"stack":N.offset("zero"),N.order("default");break;case"stream":N.offset("wiggle"),N.order("inside-out");break;case"stream-center":N.offset("silhouette"),N.order("inside-out");break;case"expand":N.offset("expand"),N.order("default");break;case"stack_percent":N.offset(N.d3_stackedOffset_stackPercent),N.order("default")}}},duration:{get:function(){return w},set:function(c){w=c,a.reset(w),x.duration(w)}}}),b.utils.inheritOptions(N,x),b.utils.initOptions(N),N},b.models.stackedAreaChart=function(){function ar(c){return S.reset(),S.models(ao),Z&&S.models(an),X&&S.models(am),c.each(function(f){var q=d3.select(this),r=this;b.utils.initSVG(q);var p=b.utils.availableWidth(ag,q,ah),o=b.utils.availableHeight(af,q,ah);if(ar.update=function(){q.transition().duration(Y).call(ar)},ar.container=this,R.setter(M(f),ar.update).getter(O(f)).update(),R.disabled=f.map(function(k){return !!k.disabled}),!P){var n;P={};for(n in R){P[n]=R[n] instanceof Array?R[n].slice(0):R[n]}}if(!(f&&f.length&&f.filter(function(k){return k.values.length}).length)){return b.utils.noData(ar,q),ar}q.selectAll(".nv-noData").remove(),aq=ao.xScale(),ap=ao.yScale();var m=q.selectAll("g.nv-wrap.nv-stackedAreaChart").data([f]),l=m.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),j=m.select("g");if(l.append("rect").style("opacity",0),l.append("g").attr("class","nv-x nv-axis"),l.append("g").attr("class","nv-y nv-axis"),l.append("g").attr("class","nv-stackedWrap"),l.append("g").attr("class","nv-legendWrap"),l.append("g").attr("class","nv-controlsWrap"),l.append("g").attr("class","nv-interactive"),j.select("rect").attr("width",p).attr("height",o),ab){var i=ad?p-a:p;al.width(i),j.select(".nv-legendWrap").datum(f).call(al),ah.top!=al.height()&&(ah.top=al.height(),o=b.utils.availableHeight(af,q,ah)),j.select(".nv-legendWrap").attr("transform","translate("+(p-i)+","+-ah.top+")")}if(ad){var h=[{key:aa.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=ao.style(),style:"stack"},{key:aa.stream||"Stream",metaKey:"Stream",disabled:"stream"!=ao.style(),style:"stream"},{key:aa.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=ao.style(),style:"expand"},{key:aa.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=ao.style(),style:"stack_percent"}];a=ac.length/3*260,h=h.filter(function(k){return -1!==ac.indexOf(k.metaKey)}),ak.width(a).color(["#444","#444","#444"]),j.select(".nv-controlsWrap").datum(h).call(ak),ah.top!=Math.max(ak.height(),al.height())&&(ah.top=Math.max(ak.height(),al.height()),o=b.utils.availableHeight(af,q,ah)),j.select(".nv-controlsWrap").attr("transform","translate(0,"+-ah.top+")")}m.attr("transform","translate("+ah.left+","+ah.top+")"),V&&j.select(".nv-y.nv-axis").attr("transform","translate("+p+",0)"),T&&(aj.width(p).height(o).margin({left:ah.left,top:ah.top}).svgContainer(q).xScale(aq),m.select(".nv-interactive").call(aj)),ao.width(p).height(o);var g=j.select(".nv-stackedWrap").datum(f);if(g.transition().call(ao),Z&&(an.scale(aq)._ticks(b.utils.calcTicksX(p/100,f)).tickSize(-o,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+o+")"),j.select(".nv-x.nv-axis").transition().duration(0).call(an)),X){var e;if(e="wiggle"===ao.offset()?0:b.utils.calcTicksY(o/36,f),am.scale(ap)._ticks(e).tickSize(-p,0),"expand"===ao.style()||"stack_percent"===ao.style()){var d=am.tickFormat();W&&d===K||(W=d),am.tickFormat(K)}else{W&&(am.tickFormat(W),W=null)}j.select(".nv-y.nv-axis").transition().duration(0).call(am)}ao.dispatch.on("areaClick.toggle",function(k){f.forEach(1===f.filter(function(s){return !s.disabled}).length?function(s){s.disabled=!1}:function(s,t){s.disabled=t!=k.seriesIndex}),R.disabled=f.map(function(s){return !!s.disabled}),L.stateChange(R),ar.update()}),al.dispatch.on("stateChange",function(k){for(var s in k){R[s]=k[s]}L.stateChange(R),ar.update()}),ak.dispatch.on("legendClick",function(k){k.disabled&&(h=h.map(function(s){return s.disabled=!0,s}),k.disabled=!1,ao.style(k.style),R.style=ao.style(),L.stateChange(R),ar.update())}),aj.dispatch.on("elementMousemove",function(z){ao.clearHighlights();var y,x,w,v=[];if(f.filter(function(B,A){return B.seriesIndex=A,!B.disabled}).forEach(function(E,D){x=b.interactiveBisect(E.values,z.pointXValue,ar.x());var C=E.values[x],B=ar.y()(C,x);if(null!=B&&ao.highlightPoint(D,x,!0),"undefined"!=typeof C){"undefined"==typeof y&&(y=C),"undefined"==typeof w&&(w=ar.xScale()(ar.x()(C,x)));var A="expand"==ao.style()?C.display.y:ar.y()(C,x);v.push({key:E.key,value:A,color:ae(E,E.seriesIndex),stackedValue:C.display})}}),v.reverse(),v.length>2){var u=ar.yScale().invert(z.mouseY),t=null;v.forEach(function(B,A){u=Math.abs(u);var D=Math.abs(B.stackedValue.y0),C=Math.abs(B.stackedValue.y);return u>=D&&C+D>=u?void (t=A):void 0}),null!=t&&(v[t].highlight=!0)}var s=an.tickFormat()(ar.x()(y,x)),k=aj.tooltip.valueFormatter();"expand"===ao.style()||"stack_percent"===ao.style()?(U||(U=k),k=d3.format(".1%")):U&&(k=U,U=null),aj.tooltip.position({left:w+ah.left,top:z.mouseY+ah.top}).chartContainer(r.parentNode).valueFormatter(k).data({value:s,series:v})(),aj.renderGuideLine(w)}),aj.dispatch.on("elementMouseout",function(){ao.clearHighlights()}),L.on("changeState",function(k){"undefined"!=typeof k.disabled&&f.length===k.disabled.length&&(f.forEach(function(s,t){s.disabled=k.disabled[t]}),R.disabled=k.disabled),"undefined"!=typeof k.style&&(ao.style(k.style),Q=k.style),ar.update()})}),S.renderEnd("stacked Area chart immediate"),ar}var aq,ap,ao=b.models.stackedArea(),an=b.models.axis(),am=b.models.axis(),al=b.models.legend(),ak=b.models.legend(),aj=b.interactiveGuideline(),ai=b.models.tooltip(),ah={top:30,right:25,bottom:50,left:60},ag=null,af=null,ae=b.utils.defaultColor(),ad=!0,ab=!0,Z=!0,X=!0,V=!1,T=!1,R=b.utils.state(),P=null,N=null,L=d3.dispatch("stateChange","changeState","renderEnd"),a=250,ac=["Stacked","Stream","Expanded"],aa={},Y=250;R.style=ao.style(),an.orient("bottom").tickPadding(7),am.orient(V?"right":"left"),ai.headerFormatter(function(d,c){return an.tickFormat()(d,c)}).valueFormatter(function(d,c){return am.tickFormat()(d,c)}),aj.tooltip.headerFormatter(function(d,c){return an.tickFormat()(d,c)}).valueFormatter(function(d,c){return am.tickFormat()(d,c)});var W=null,U=null;ak.updateState(!1);var S=b.utils.renderWatch(L),Q=ao.style(),O=function(c){return function(){return{active:c.map(function(d){return !d.disabled}),style:ao.style()}}},M=function(c){return function(d){void 0!==d.style&&(Q=d.style),void 0!==d.active&&c.forEach(function(e,f){e.disabled=!d.active[f]})}},K=d3.format("%");return ao.dispatch.on("elementMouseover.tooltip",function(c){c.point.x=ao.x()(c.point),c.point.y=ao.y()(c.point),ai.data(c).position(c.pos).hidden(!1)}),ao.dispatch.on("elementMouseout.tooltip",function(){ai.hidden(!0)}),ar.dispatch=L,ar.stacked=ao,ar.legend=al,ar.controls=ak,ar.xAxis=an,ar.yAxis=am,ar.interactiveLayer=aj,ar.tooltip=ai,ar.dispatch=L,ar.options=b.utils.optionsFunc.bind(ar),ar._options=Object.create({},{width:{get:function(){return ag},set:function(c){ag=c}},height:{get:function(){return af},set:function(c){af=c}},showLegend:{get:function(){return ab},set:function(c){ab=c}},showXAxis:{get:function(){return Z},set:function(c){Z=c}},showYAxis:{get:function(){return X},set:function(c){X=c}},defaultState:{get:function(){return P},set:function(c){P=c}},noData:{get:function(){return N},set:function(c){N=c}},showControls:{get:function(){return ad},set:function(c){ad=c}},controlLabels:{get:function(){return aa},set:function(c){aa=c}},controlOptions:{get:function(){return ac},set:function(c){ac=c}},tooltips:{get:function(){return ai.enabled()},set:function(c){b.deprecated("tooltips","use chart.tooltip.enabled() instead"),ai.enabled(!!c)}},tooltipContent:{get:function(){return ai.contentGenerator()},set:function(c){b.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead"),ai.contentGenerator(c)}},margin:{get:function(){return ah},set:function(c){ah.top=void 0!==c.top?c.top:ah.top,ah.right=void 0!==c.right?c.right:ah.right,ah.bottom=void 0!==c.bottom?c.bottom:ah.bottom,ah.left=void 0!==c.left?c.left:ah.left}},duration:{get:function(){return Y},set:function(c){Y=c,S.reset(Y),ao.duration(Y),an.duration(Y),am.duration(Y)}},color:{get:function(){return ae},set:function(c){ae=b.utils.getColor(c),al.color(ae),ao.color(ae)}},rightAlignYAxis:{get:function(){return V},set:function(c){V=c,am.orient(V?"right":"left")}},useInteractiveGuideline:{get:function(){return T},set:function(c){T=!!c,ar.interactive(!c),ar.useVoronoi(!c),ao.scatter.interactive(!c)}}}),b.utils.inheritOptions(ar,ao),b.utils.initOptions(ar),ar},b.models.sunburst=function(){function L(c){return a.reset(),c.each(function(h){function m(n){n.x0=n.x,n.dx0=n.dx}function l(o){var n=d3.interpolate(x.domain(),[o.x,o.x+o.dx]),q=d3.interpolate(w.domain(),[o.y,1]),p=d3.interpolate(w.range(),[o.y?20:0,g]);return function(r,s){return s?function(){return u(r)}:function(t){return x.domain(n(t)),w.domain(q(t)).range(p(t)),u(r)}}}B=d3.select(this);var k,j=b.utils.availableWidth(G,B,H),i=b.utils.availableHeight(F,B,H),g=Math.min(j,i)/2;b.utils.initSVG(B);var f=B.selectAll(".nv-wrap.nv-sunburst").data(h),e=f.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+C),d=e.selectAll("nv-sunburst");f.attr("transform","translate("+j/2+","+i/2+")"),B.on("click",function(o,n){y.chartClick({data:o,index:n,pos:d3.event,id:C})}),w.range([0,g]),K=K||h,I=h[0],v.value(D[E]||D.count),k=d.data(v.nodes).enter().append("path").attr("d",u).style("fill",function(n){return A((n.children?n:n.parent).name)}).style("stroke","#FFF").on("click",function(n){J!==K&&K!==n&&(J=K),K=n,k.transition().duration(z).attrTween("d",l(n))}).each(m).on("dblclick",function(n){J.parent==n&&k.transition().duration(z).attrTween("d",l(I))}).each(m).on("mouseover",function(n){d3.select(this).classed("hover",!0).style("opacity",0.8),y.elementMouseover({data:n,color:d3.select(this).style("fill")})}).on("mouseout",function(n){d3.select(this).classed("hover",!1).style("opacity",1),y.elementMouseout({data:n})}).on("mousemove",function(n){y.elementMousemove({data:n})})}),a.renderEnd("sunburst immediate"),L}var K,J,I,H={top:0,right:0,bottom:0,left:0},G=null,F=null,E="count",D={count:function(){return 1},size:function(c){return c.size}},C=Math.floor(10000*Math.random()),B=null,A=b.utils.defaultColor(),z=500,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),x=d3.scale.linear().range([0,2*Math.PI]),w=d3.scale.sqrt(),v=d3.layout.partition().sort(null).value(function(){return 1}),u=d3.svg.arc().startAngle(function(c){return Math.max(0,Math.min(2*Math.PI,x(c.x)))}).endAngle(function(c){return Math.max(0,Math.min(2*Math.PI,x(c.x+c.dx)))}).innerRadius(function(c){return Math.max(0,w(c.y))}).outerRadius(function(c){return Math.max(0,w(c.y+c.dy))}),a=b.utils.renderWatch(y);return L.dispatch=y,L.options=b.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return G},set:function(c){G=c}},height:{get:function(){return F},set:function(c){F=c}},mode:{get:function(){return E},set:function(c){E=c}},id:{get:function(){return C},set:function(c){C=c}},duration:{get:function(){return z},set:function(c){z=c}},margin:{get:function(){return H},set:function(c){H.top=void 0!=c.top?c.top:H.top,H.right=void 0!=c.right?c.right:H.right,H.bottom=void 0!=c.bottom?c.bottom:H.bottom,H.left=void 0!=c.left?c.left:H.left}},color:{get:function(){return A},set:function(c){A=b.utils.getColor(c)}}}),b.utils.initOptions(L),L},b.models.sunburstChart=function(){function x(c){return a.reset(),a.models(w),c.each(function(A){var y=d3.select(this);b.utils.initSVG(y);var k=b.utils.availableWidth(t,y,u),g=b.utils.availableHeight(s,y,u);if(x.update=function(){0===o?y.call(x):y.transition().duration(o).call(x)},x.container=this,!A||!A.length){return b.utils.noData(x,y),x}y.selectAll(".nv-noData").remove();var f=y.selectAll("g.nv-wrap.nv-sunburstChart").data(A),e=f.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),B=f.select("g");e.append("g").attr("class","nv-sunburstWrap"),f.attr("transform","translate("+u.left+","+u.top+")"),w.width(k).height(g);var z=B.select(".nv-sunburstWrap").datum(A);d3.transition(z).call(w)}),a.renderEnd("sunburstChart immediate"),x}var w=b.models.sunburst(),v=b.models.tooltip(),u={top:30,right:20,bottom:20,left:20},t=null,s=null,r=b.utils.defaultColor(),q=(Math.round(100000*Math.random()),null),p=null,o=250,n=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),a=b.utils.renderWatch(n);return v.headerEnabled(!1).duration(0).valueFormatter(function(c){return c}),w.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:c.data.name,value:c.data.size,color:c.color},v.data(c).hidden(!1)}),w.dispatch.on("elementMouseout.tooltip",function(){v.hidden(!0)}),w.dispatch.on("elementMousemove.tooltip",function(){v.position({top:d3.event.pageY,left:d3.event.pageX})()}),x.dispatch=n,x.sunburst=w,x.tooltip=v,x.options=b.utils.optionsFunc.bind(x),x._options=Object.create({},{noData:{get:function(){return p},set:function(c){p=c}},defaultState:{get:function(){return q},set:function(c){q=c}},color:{get:function(){return r},set:function(c){r=c,w.color(r)}},duration:{get:function(){return o},set:function(c){o=c,a.reset(o),w.duration(o)}},margin:{get:function(){return u},set:function(c){u.top=void 0!==c.top?c.top:u.top,u.right=void 0!==c.right?c.right:u.right,u.bottom=void 0!==c.bottom?c.bottom:u.bottom,u.left=void 0!==c.left?c.left:u.left}}}),b.utils.inheritOptions(x,w),b.utils.initOptions(x),x},b.version="1.8.1"}();